<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NUMINA | Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --primary: #ffd700;
      --primary-dark: #e6c200;
      --dark: #111;
      --dark-light: #1a1a1a;
      --dark-lighter: #222;
      --text: #fff;
      --text-light: #ccc;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { overflow-y: scroll; }
    body { font-family: 'Montserrat', sans-serif; background: var(--dark); color: var(--text); min-height: 100vh; display:flex; flex-direction:column; }
    .dashboard-header { background: linear-gradient(to right, var(--dark), var(--dark-lighter)); padding: 1rem 2rem; display:flex; justify-content:space-between; align-items:center; border-bottom: 1px solid rgba(255,215,0,.1); }
    .logo { color: var(--primary); font-size: 1.8rem; font-weight: 700; letter-spacing: 1px; }
    .user-menu { display:flex; align-items:center; gap:1rem; }
    .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: var(--dark); display:flex; align-items:center; justify-content:center; font-weight:700; cursor: default; }
    .dashboard-container { display:flex; flex:1; }
    .sidebar { width: 250px; background: var(--dark-light); padding: 1.5rem 0; border-right: 1px solid rgba(255,255,255,.05); }
    .sidebar-menu { list-style: none; }
    .menu-item { padding: .8rem 1.5rem; display:flex; align-items:center; gap:.8rem; cursor:pointer; transition: .2s ease; border-left: 3px solid transparent; }
    .menu-item:hover, .menu-item.active { background-color: rgba(255,215,0,.1); border-left-color: var(--primary); color: var(--primary); }
    .menu-item i { width: 20px; text-align:center; }
    .main-content { flex:1; padding: 2rem; background: var(--dark); }
    .welcome-banner { background: linear-gradient(135deg, rgba(255,215,0,.1), rgba(255,215,0,.05)); border: 1px solid rgba(255,215,0,.1); border-radius:10px; padding:1.5rem; margin-bottom:2rem; display:flex; justify-content:space-between; align-items:center; gap:1rem; }
    .welcome-text h2 { color: var(--primary); margin-bottom:.5rem; white-space:nowrap; min-height:1.6em; display:flex; align-items:center; }
    .welcome-text p { color: var(--text-light); }
    .welcome-right { display:flex; flex-direction:column; align-items:flex-end; gap:.6rem; }
    .lang-dropdown{ position:relative; display:inline-block; }
    .lang-btn{ background:#ffd700; border:0; border-radius:999px; padding:6px 12px; cursor:pointer; color:#111; font-weight:800; display:inline-flex; align-items:center; gap:8px; box-shadow:inset 0 -2px 0 rgba(0,0,0,.15), 0 2px 8px rgba(0,0,0,.25); }
    .lang-btn:focus{ outline:none; box-shadow:0 0 0 3px rgba(255,215,0,.3); }
    .lang-btn .chevron{ width:12px; height:12px; fill:none; stroke:#111; stroke-width:2px; transition:transform .18s ease; }
    .lang-dropdown.open .chevron{ transform: rotate(180deg); }
    .lang-menu{ position:absolute; top:110%; right:0; z-index:100; background:#fff; color:#111; border-radius:12px; padding:6px 0; margin:8px 0 0; box-shadow:0 12px 28px rgba(0,0,0,.25), 0 2px 8px rgba(0,0,0,.2); min-width:170px; list-style:none; display:none; max-height:260px; overflow:auto; }
    .lang-dropdown.open .lang-menu{ display:block; }
    .lang-item{ display:flex; align-items:center; gap:10px; padding:10px 14px; cursor:pointer; font-weight:700; user-select:none; white-space:nowrap; }
    .lang-item:hover, .lang-item[aria-selected="true"]{ background:#ffd700; color:#111; }
    .lang-flag{ width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; }
    .referral-code{ background: var(--dark-light); padding:.8rem 1.2rem; border-radius:8px; display:flex; align-items:center; gap:.8rem; }
    .copy-btn{ background: var(--primary); color: var(--dark); border:0; padding:.3rem .6rem; border-radius:5px; cursor:pointer; transition:.2s ease; }
    .copy-btn:hover{ background: var(--primary-dark); }
    .stats-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap:1.5rem; margin-bottom:2rem; }
    .stat-card{ background: var(--dark-light); border-radius:10px; padding:1.5rem; border-left: 4px solid var(--primary); }
    .stat-card h3{ color: var(--text-light); font-size:.9rem; font-weight:500; margin-bottom:.5rem; text-transform:uppercase; letter-spacing:1px; }
    .stat-card .value{ font-size:1.8rem; font-weight:700; color: var(--primary); margin-bottom:.5rem; }
    .change{ font-size:.8rem; display:flex; align-items:center; gap:.3rem; }
    .positive{ color: var(--success); }
    .negative{ color: var(--danger); }
    .section-title{ color: var(--primary); margin: 2rem 0 1rem; font-size: 1.3rem; font-weight: 600; display:flex; align-items:center; gap:.8rem; }
    .section-content{ display:none; }
    .table-container{ background: var(--dark-light); border-radius:10px; overflow:hidden; margin-bottom:2rem; }
    table { width:100%; border-collapse: collapse; table-layout: fixed; }
    th, td { padding:1rem; text-align:left; }
    th { background: var(--dark-lighter); color: var(--primary); font-weight:600; text-transform:uppercase; font-size:.8rem; letter-spacing:1px; }
    td { border-bottom: 1px solid rgba(255,255,255,.05); color: var(--text-light); overflow:hidden; text-overflow:ellipsis; }
    tr:last-child td{ border-bottom: none; }
    .account-info-table td:first-child{ width:30%; font-weight:700; color:#f1f1f1; }
    :root { --tbl-col-product: 42%; --tbl-col-date: 16%; --tbl-col-value: 14%; --tbl-col-status: 14%; --tbl-col-actions: 14%; }
    #purchases-table th:nth-child(1), #purchases-table td:nth-child(1),
    #referrals-table th:nth-child(1), #referrals-table td:nth-child(1){ width: var(--tbl-col-product); }
    #purchases-table th:nth-child(2), #purchases-table td:nth-child(2),
    #referrals-table th:nth-child(2), #referrals-table td:nth-child(2){ width: var(--tbl-col-date); white-space:nowrap; }
    #purchases-table th:nth-child(3), #purchases-table td:nth-child(3),
    #referrals-table th:nth-child(3), #referrals-table td:nth-child(3){ width: var(--tbl-col-value); white-space:nowrap; }
    #purchases-table th:nth-child(4), #purchases-table td:nth-child(4),
    #referrals-table th:nth-child(4), #referrals-table td:nth-child(4){ width: var(--tbl-col-status); }
    #purchases-table th:nth-child(5), #purchases-table td:nth-child(5),
    #referrals-table th:nth-child(5), #referrals-table td:nth-child(5){ width: var(--tbl-col-actions); }
    .status{ display:inline-block; text-align:center; min-width:10ch; white-space:nowrap; border-radius:20px; padding:.3rem .6rem; font-size:.8rem; font-weight:600; }
    .status.active{ background: rgba(40,167,69,.2); color: var(--success); }
    .status.pending{ background: rgba(255,193,7,.2); color: var(--warning); }
    .status.completed{ background: rgba(13,110,253,.2); color:#0d6efd; }
    .status.cancelled{ background: rgba(220,53,69,.2); color: var(--danger); }
    .status.inactive{ background: rgba(255,255,255,.12); color: #aaa; }
    .status.paid{ background: rgba(0,255,127,.18); color:#58d68d; }
    .status.disputed{ background: rgba(255,99,132,.18); color:#ff718f; }
    .action-btn{ background:transparent; border:1px solid var(--primary); color: var(--primary); padding:.3rem .8rem; border-radius:5px; cursor:pointer; transition:.2s ease; min-width:9ch; text-align:center; }
    .action-btn:hover{ background: var(--primary); color: var(--dark); }
    .settings-card{ background: var(--dark-light); border: 1px solid rgba(255,255,255,.05); border-radius:10px; padding:1.5rem; margin-bottom:1.5rem; }
    .settings-card h3{ color: var(--primary); margin-bottom:.8rem; font-size:1.05rem; }
    .form-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:1rem; }
    .form-row{ display:flex; flex-direction:column; gap:.4rem; }
    .form-row label{ color: var(--text-light); font-size:.9rem; }
    .form-row input, .form-row select{ background: var(--dark); border:1px solid var(--dark-lighter); border-radius:8px; padding:.7rem .8rem; color: var(--text); outline:none; }
    .form-actions{ display:flex; gap:.6rem; justify-content:flex-end; margin-top:1rem; }
    .btn{ background:var(--primary); color:var(--dark); border:0; padding:.6rem 1rem; border-radius:8px; font-weight:600; cursor:pointer; }
    .btn:hover{ background: var(--primary-dark); }

  /* Smooth hover transitions for buttons and cards */
    button, .stat-card, .settings-card, .srt-card, .pd-card, .sc-card, .card, .product-card{
      transition: transform .2s ease, box-shadow .2s ease;
    }
    button:hover, .stat-card:hover, .settings-card:hover, .srt-card:hover, .pd-card:hover, .sc-card:hover, .card:hover{
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,.35);
    }
    /* Entry animations */
    .section-title, .product-card{ opacity:0; transform:translateY(20px); }
    .section-title.animate-in, .product-card.animate-in{ animation:fadeInUp .6s ease forwards; }
    @keyframes fadeInUp{ to{ opacity:1; transform:translateY(0); } }

    #section-productos .products-wrap{ max-width:1100px; margin:0 auto; padding: .5rem 1rem 0; }
    #section-productos .products-grid{ display:grid; grid-template-columns: repeat(2, 1fr); gap:1.5rem; justify-items:center; }
    #section-productos .product-card{ width:100%; max-width:500px; border-radius:16px; background: var(--dark-light); border:1px solid rgba(255,255,255,.05); overflow:hidden; display:flex; flex-direction:column; transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease; }
    #section-productos .product-card:hover{ transform: translateY(-2px); border-color: rgba(255,215,0,.25); box-shadow: 0 8px 24px rgba(0,0,0,.35); }
    #section-productos .product-media{ background: var(--dark-lighter); aspect-ratio:16/9; display:block; }
    #section-productos .product-body{ padding:1rem; display:flex; flex-direction:column; gap:.6rem; }
    #section-productos .product-title{ font-size:1rem; font-weight:700; color: var(--text); }
    #section-productos .product-desc{ font-size:.9rem; color: var(--text-light); }
    #section-productos .price{ color: var(--primary); font-weight:700; font-size:1.1rem; }
    @media (max-width: 992px) {
      .sidebar { width: 70px; }
      .menu-item span { display:none; }
      .menu-item { justify-content:center; }
      .welcome-right { align-items:center; width:100%; }
      .welcome-right .referral-code{ align-self:center; }
      table { table-layout:auto; }
      .action-btn, .status{ min-width:auto; }
    }
    @media (max-width: 900px){ #section-productos .products-grid{ grid-template-columns: 1fr; } }
  
    /* Tarjetas y layout de Sorteos */
    .srt-stats { display:grid; grid-template-columns:1fr 1fr; gap:1.2rem; margin-bottom:1.5rem; align-items:stretch; }
    @media (max-width:900px){ .srt-stats{ grid-template-columns:1fr; } }
    .srt-card{ background:var(--dark-light); border-radius:12px; padding:1.2rem; border:1px solid rgba(255,255,255,.07);
               display:flex; flex-direction:column; min-height:150px; }
    .srt-card h3{ color:var(--text-light); font-size:.9rem; text-transform:uppercase; letter-spacing:.6px; margin-bottom:.5rem; }
    .srt-card .val{ font-size:1.5rem; font-weight:800; color:var(--text-light); }
    .srt-card.gold{ background:linear-gradient(135deg, rgba(255,215,0,.12), rgba(255,215,0,.04)); }

    /* Progreso Upgrade Numina */
    .srt-progress{ margin-top:.8rem; }
    .srt-track{ position:relative; height:14px; background:linear-gradient(180deg,#1a1a1a,#151515);
                border:1px solid rgba(255,255,255,.08); border-radius:999px; overflow: visible; }
    .srt-fill{ height:100%; width:0%; background:linear-gradient(90deg, rgba(255,215,0,.85), rgba(255,215,0,1));
               box-shadow:0 0 12px rgba(255,215,0,.35) inset; transition:width .35s ease; }
    .srt-hit{ position:absolute; top:50%; transform:translate(-50%,-50%); width: 10px; height: 10px; border-radius:50%;
              background:#222; border:2px solid rgba(255,255,255,.25); }
    .srt-hit.on{ background:var(--primary); border-color:var(--primary); }
    .srt-marks{ position:relative; height:20px; margin-top:.45rem; }
    .srt-mark{ position:absolute; top:0; transform:translateX(-50%); font-size:.8rem; color:var(--text-light); white-space:nowrap; }

    /* Tabla */
    #sorteos-table th{ background:var(--dark-lighter); color:var(--primary); font-weight:600; text-transform:uppercase; font-size:.8rem; }
    #sorteos-table td{ color:var(--text-light); border-bottom:1px solid rgba(255,255,255,.05); }
  

  /* === NUMINA: Modal de producto pantalla completa === */
  .nm-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;z-index:1000;}
  .nm-overlay.show{display:block;}
  .nm-modal{position:relative;min-height:100vh;background:#111214;color:#fff;display:flex;flex-direction:column;}
  .nm-modal header{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;background:#1a1b1f;border-bottom:1px solid #24262b}
  .nm-modal header h3{margin:0;font-size:18px;color:#ffd700;letter-spacing:.3px}
  .nm-close{background:transparent;border:0;color:#b7b7b7;font-size:22px;cursor:pointer}
  .nm-body{flex:1;display:grid;grid-template-columns:0.85fr 1.15fr;gap:22px;padding:22px;max-width:1200px;margin:0 auto}
  .nm-imgbox{background:#222;border-radius:16px;display:flex;align-items:center;justify-content:center;overflow:hidden;aspect-ratio:1/1;max-width:520px;width:100%;margin:0 auto}
  .nm-imgbox img{width:100%;height:100%;display:block;object-fit:contain}
  .nm-info h4{margin:.2rem 0 .6rem;font-size:22px}
  .nm-desc{color:#d0d0d0;line-height:1.55;margin:0 0 14px}
  .nm-price{font-size:24px;font-weight:900;margin:10px 0 18px;color:#ffd700}
  .nm-actions{display:flex;gap:10px;align-items:center;margin-top:6px}
  .nm-btn{background:transparent;border:1px solid #3a3a3a;color:#fafafa;padding:11px 14px;border-radius:12px;cursor:pointer}
  .nm-buy{background:#ffd700;color:#111;border:0;padding:12px 18px;border-radius:12px;font-weight:900;cursor:pointer}
  .nm-note{font-size:12px;color:#9aa0a6;margin-top:8px}
  @media(max-width:900px){.nm-body{flex:1;display:grid;grid-template-columns:0.85fr 1.15fr;gap:22px;padding:22px;max-width:1200px;margin:0 auto}

  .nm-pitch{margin:10px 0 14px;padding:12px 14px;border:1px solid #2b2e34;background:#16181d;border-radius:12px;line-height:1.55;color:#e7e7e7}
  .nm-pitch strong{color:#ffd700}
}




/* --- Ensure sidebar labels are visible next to icons --- */
.sidebar .nav-label{display:inline-block;margin-left:.75rem;white-space:nowrap}
.sidebar a{display:flex;align-items:center}


/* inline filter bar for purchases */
.table-filter-inline{display:flex;gap:.6rem;align-items:center;justify-content:flex-end;background:var(--dark-light);padding:.6rem .8rem;border-bottom:1px solid rgba(255,255,255,.05)}
.table-filter-inline input{background:#0f0f0f;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:.45rem .7rem;color:#f0f0f0;outline:none;min-width:260px}
.table-filter-inline input::placeholder{color:#8a8a8a}


/* === GPT patch: Sorteos alignment fix === */
.srt-marks{ padding-right: 8px; }
.srt-marks .srt-mark:last-child{ transform: translateX(-100%); text-align: right; }


.btn-delete-row{border:1px solid #f5c400;color:#f5c400;background:transparent;
  padding:.35rem .7rem;border-radius:.55rem;font-weight:700;cursor:pointer;
  transition:all .12s ease}
.btn-delete-row:hover{background:#f5c400;color:#111}


/* Efecto: la línea amarilla se llena al hover */
.stat-card{ position: relative; overflow: hidden; }
.stat-card::after{
  content: "";
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: var(--primary);       /* mismo amarillo de bordes */
  border-radius: inherit;
  z-index: 1;
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform .6s cubic-bezier(.22,.61,.36,1);
  will-change: transform;
  backface-visibility: hidden;
}


.stat-card:hover::after,
.stat-card:hover::before,
.stat-card:focus-within::after,
.stat-card:focus-within::before{ width: 100%; }

/* Efecto: se rellena TODO el botón (card) al hover */
.stat-card{ position: relative; overflow: hidden; isolation: isolate; }
 /* desactivamos la línea superior previa */
.stat-card::after{
  content: "";
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: var(--primary);       /* mismo amarillo de bordes */
  border-radius: inherit;
  z-index: 1;
  transform: scaleX(0);
  transform-origin: left center;
  transition: transform .6s cubic-bezier(.22,.61,.36,1);
  will-change: transform;
  backface-visibility: hidden;
}
.stat-card:hover::after,
.stat-card:focus-within::after{ transform: scaleX(1); }

/* Texto por encima del relleno y con color legible al cubrirse de amarillo */
.stat-card h3,
.stat-card .value,
.stat-card .change{
  position: relative;
  z-index: 2;
  transition: color .25s ease;
}
.stat-card:hover h3,
.stat-card:hover .value,
.stat-card:hover .change,
.stat-card:focus-within h3,
.stat-card:focus-within .value,
.stat-card:focus-within .change{
  color: var(--dark);
}

/* Evitar línea/solapado en el borde izquierdo durante el relleno */
.stat-card:hover{ border-left-color: transparent; }
.stat-card:focus-within{ border-left-color: transparent; }
</style>

  <script>
    (function(){
      const DICT = {
        en: {
            "mbox.tabs.open": "Open",
            "mbox.tabs.upcoming": "Upcoming",
            "mbox.tabs.closed": "Closed",
            "mbox.status.open": "Open",
            "mbox.actions.details": "Details",
            "mbox.actions.participate": "Participate",
            "actions.delete": "Delete",
            "confirm.noRowId": "Can't find the ID in the row. Remove visually?",
            "confirm.deletePurchase": "Delete this purchase? This action is permanent.",
            "table.date": "Date",
            "table.product": "Product",
            "table.tickets": "Tickets",
            "table.referral": "Referral",
            "table.noData": "No data",
          "catalog.goldPitch": "🪙 Gold: Protect your money, secure your future",
          "catalog.platinumPitch": "🪙 Platinum: Solid value to diversify your wealth",
          "catalog.rolexPitch": "⏱️ Rolex: An icon of precision and prestige",
          "catalog.braceletPitch": "✨ Numina Bracelet: Exclusive design and premium materials",

          "account.undefined": "Undefined",
          "labels.welcome": "Welcome",
          "labels.loading": "Loading…",
          "sections.dashboard": "Dashboard",
          "sections.compras": "Purchases",
          "sections.sorteos": "Raffles",
          "sections.referidos": "Referrals",
          "sections.configuracion": "Settings",
          "actions.logout": "Log out",
          "catalog.title": "Catalog",
          "stats.balance": "Balance",
          "stats.activePurchases": "Active Purchases",
          "stats.referrals": "Referrals",
          "stats.tickets": "Active Tickets",
          "sections.comprasActivas": "Active Purchases",
          "sections.referralsHistory": "Referrals History",
          "tables.product": "Product",
          "tables.date": "Date",
          "tables.value": "Value",
          "tables.status": "Status",
          "tables.details": "Details",
          "tables.actions": "Actions",
          "tables.referral": "Referral",
          "tables.purchases": "Purchases",
          "tables.commission": "Ticket Commission",
          "tables.details": "Details",
          "raffles.noParticipations": "No participations",
          "sections.sorteoTitle": "Raffles",
          "raffles.activeTickets": "Active tickets",
          "sections.raffleHistory": "Raffles history",
          "raffles.name": "Raffle",
          "raffles.date": "Date",
          "raffles.ticketsUsed": "Tickets used",
          "tables.claim": "Claim",
          "sections.misCompras": "Purchases",
          "account.info.title": "Account Information",
          "accountForm.labels.fullName": "Full Name",
          "accountForm.labels.email": "Email",
          "accountForm.labels.phone": "Phone",
          "accountForm.labels.address": "Address",
          "accountForm.labels.country": "Country",
          "accountForm.labels.city": "City",
          "accountForm.labels.zip": "ZIP code",
          "accountForm.ph.fullName": "Full name",
          "accountForm.ph.phone": "Phone",
          "accountForm.ph.address": "Address",
          "accountForm.ph.country": "Country",
          "accountForm.ph.city": "City",
          "accountForm.ph.zip": "ZIP code",
          "account.settings.title": "Account Settings",
          "account.settings.personalData": "Personal Data",
          "account.settings.save": "Save changes",
          "account.settings.security": "Security",
          "accountForm.labels.newPassword": "New password",
          "accountForm.labels.repeatPassword": "Repeat password",
          "account.settings.updatePassword": "Update password",
          "catalog.moreInfo": "More information",
          "catalog.goldTitle": "Gold Bar",
          "catalog.goldDesc": "Certified 999.9 gold. Ideal for investment and store of value.",
          "catalog.platinumTitle": "Platinum Bar",
          "catalog.platinumDesc": "Certified 999.5 platinum. High-value and rare investment.",
          "catalog.braceletTitle": "Numina Bracelet",
          "product.lingote_100g_oro_fino": "100g Fine Gold Bar 999.9",
          "product.lingote_100g_platino_fino": "100g Fine Platinum Bar 999.5",
          "product.rolex_126610lv": "Rolex Submariner Date 126610LV",
          "product.bracelet": "Numina Bracelet",
          "catalog.braceletDesc": "Exclusive design with high‑quality materials. Limited edition.",
          "productNames.gold100": "100g Fine Gold Bar 999.9",
          "productNames.plat100": "100g Fine Platinum Bar 999.5",
          "productNames.rolex126610lv": "Rolex Submariner Date 126610LV",
          "productNames.braceletLimited": "Numina Bracelet \u2013 Limited Edition",
          "catalog.rolexDesc": "Submariner Date with green bezel and Oystersteel case. Automatic.",
          "actions.copy": "Copy",
          "actions.copied": "Copied!",
          "product.shippingNote": "Insured shipping with tracking. Certificate included.",
          "product.buy": "Buy",
          "buttons.back": "Back"
      
        },
        es: {
            "mbox.tabs.open": "Abiertos",
            "mbox.tabs.upcoming": "Próximamente",
            "mbox.tabs.closed": "Finalizados",
            "mbox.status.open": "Abierto",
            "mbox.actions.details": "Detalles",
            "mbox.actions.participate": "Participar",
            "actions.delete": "Eliminar",
            "confirm.noRowId": "No encuentro el ID en la fila. ¿Eliminar solo visualmente?",
            "confirm.deletePurchase": "¿Eliminar esta compra? Esta acción es permanente.",
            "table.date": "Fecha",
            "table.product": "Producto",
            "table.tickets": "Tickets",
            "table.referral": "Referido",
            "table.noData": "Sin datos",
          "catalog.goldPitch": "🪙 Oro: Protegé tu dinero, asegurá tu futuro",
          "catalog.platinumPitch": "🪙 Platino: Valor sólido para diversificar tu patrimonio",
          "catalog.rolexPitch": "⏱️ Rolex: Icono de precisión y prestigio",
          "catalog.braceletPitch": "✨ Pulsera Numina: Diseño exclusivo y materiales premium",

          "account.undefined": "No definido",
          "labels.welcome": "Bienvenido",
          "labels.loading": "Cargando…",
          "sections.dashboard": "Dashboard",
          "sections.compras": "Compras",
          "sections.sorteos": "Sorteos",
          "sections.referidos": "Referidos",
          "sections.configuracion": "Configuración",
          "actions.logout": "Cerrar Sesión",
          "catalog.title": "Catálogo",
          "stats.balance": "Balance",
          "stats.activePurchases": "Compras activas",
          "stats.referrals": "Referidos",
          "stats.tickets": "Tickets activos",
          "sections.comprasActivas": "Compras Activas",
          "sections.referralsHistory": "Historial de Referidos",
          "tables.product": "Producto",
          "tables.date": "Fecha",
          "tables.value": "Valor",
          "tables.status": "Estado",
          "tables.details": "Detalles",
          "tables.actions": "Acciones",
          "tables.referral": "Referido",
          "tables.purchases": "Compras",
          "tables.commission": "Comisión en tickets",
          "tables.details": "Detalles",
          "raffles.noParticipations": "Sin participaciones",
          "sections.sorteoTitle": "Sorteos",
          "raffles.activeTickets": "Tickets activos",
          "sections.raffleHistory": "Historial de Sorteos",
          "raffles.name": "Sorteo",
          "raffles.date": "Fecha",
          "raffles.ticketsUsed": "Tickets usados",
          "tables.claim": "Reclamo",
          "sections.misCompras": "Mis Compras",
          "account.info.title": "Información de la Cuenta",
          "accountForm.labels.fullName": "Nombre Completo",
          "accountForm.labels.email": "Correo Electrónico",
          "accountForm.labels.phone": "Teléfono",
          "accountForm.labels.address": "Dirección",
          "accountForm.labels.country": "País",
          "accountForm.labels.city": "Ciudad",
          "accountForm.labels.zip": "Código postal",
          "accountForm.ph.fullName": "Nombre completo",
          "accountForm.ph.phone": "Teléfono",
          "accountForm.ph.address": "Dirección",
          "accountForm.ph.country": "País",
          "accountForm.ph.city": "Ciudad",
          "accountForm.ph.zip": "Código postal",
          "account.settings.title": "Configuración de la Cuenta",
          "account.settings.personalData": "Datos Personales",
          "account.settings.save": "Guardar cambios",
          "account.settings.security": "Seguridad",
          "accountForm.labels.newPassword": "Nueva contraseña",
          "accountForm.labels.repeatPassword": "Repetir contraseña",
          "account.settings.updatePassword": "Actualizar contraseña",
          "catalog.moreInfo": "Más información",
          "catalog.goldTitle": "Lingote de Oro",
          "catalog.goldDesc": "Oro 999.9 certificado. Ideal para inversión y resguardo de valor.",
          "catalog.platinumTitle": "Lingote de Platino",
          "catalog.platinumDesc": "Platino 999.5 certificado. Inversión de alto valor y rareza.",
          "catalog.braceletTitle": "Pulsera Numina",
          "product.lingote_100g_oro_fino": "Lingote 100g Oro Fino 999.9",
          "product.lingote_100g_platino_fino": "Lingote 100g Platino Fino 999.5",
          "product.rolex_126610lv": "Rolex Submariner Date 126610LV",
          "product.bracelet": "Pulsera Numina",
          "catalog.braceletDesc": "Diseño exclusivo con materiales de alta calidad. Edición limitada.",
          "productNames.gold100": "Lingote 100g Oro Fino 999.9",
          "productNames.plat100": "Lingote 100g Platino Fino 999.5",
          "productNames.rolex126610lv": "Rolex Submariner Date 126610LV",
          "productNames.braceletLimited": "Pulsera Numina \u2013 Edici\u00f3n Limitada",
          "catalog.rolexDesc": "Submariner Date con bisel verde y caja Oystersteel. Automático.",
          "actions.copy": "Copiar",
          "actions.copied": "¡Copiado!",
          "product.shippingNote": "Envíos asegurados con seguimiento. Certificado incluido.",
          "product.buy": "Comprar",
          "buttons.back": "Volver"
      
        },
        pt: {
            "mbox.tabs.open": "Abertos",
            "mbox.tabs.upcoming": "Em breve",
            "mbox.tabs.closed": "Finalizados",
            "mbox.status.open": "Aberto",
            "mbox.actions.details": "Detalhes",
            "mbox.actions.participate": "Participar",
            "actions.delete": "Excluir",
            "confirm.noRowId": "Não encontro o ID na linha. Remover visualmente?",
            "confirm.deletePurchase": "Excluir esta compra? Esta ação é permanente.",
            "table.date": "Data",
            "table.product": "Produto",
            "table.tickets": "Tickets",
            "table.referral": "Indicação",
            "table.noData": "Sem dados",
          "catalog.goldPitch": "🪙 Ouro: Proteja seu dinheiro, garanta seu futuro",
          "catalog.platinumPitch": "🪙 Platina: Valor sólido para diversificar seu patrimônio",
          "catalog.rolexPitch": "⏱️ Rolex: Ícone de precisão e prestígio",
          "catalog.braceletPitch": "✨ Pulseira Numina: Design exclusivo e materiais premium",

          "account.undefined": "Não definido",
          "labels.welcome": "Bem-vindo",
          "labels.loading": "Carregando…",
          "sections.dashboard": "Painel",
          "sections.compras": "Compras",
          "sections.sorteos": "Sorteios",
          "sections.referidos": "Referências",
          "sections.configuracion": "Configurações",
          "actions.logout": "Sair",
          "catalog.title": "Catálogo",
          "stats.balance": "Saldo",
          "stats.activePurchases": "Compras ativas",
          "stats.referrals": "Indicações",
          "stats.tickets": "Tickets ativos",
          "sections.comprasActivas": "Compras Ativas",
          "sections.referralsHistory": "Histórico de Indicações",
          "tables.product": "Produto",
          "tables.date": "Data",
          "tables.value": "Valor",
          "tables.status": "Status",
          "tables.details": "Detalhes",
          "tables.actions": "Ações",
          "tables.referral": "Indicação",
          "tables.purchases": "Compras",
          "tables.commission": "Comissão em tickets",
          "tables.details": "Detalhes",
          "raffles.noParticipations": "Sem participações",
          "sections.sorteoTitle": "Sorteios",
          "raffles.activeTickets": "Tickets ativos",
          "sections.raffleHistory": "Histórico de Sorteios",
          "raffles.name": "Sorteio",
          "raffles.date": "Data",
          "raffles.ticketsUsed": "Tickets usados",
          "tables.claim": "Reclamação",
          "sections.misCompras": "Minhas Compras",
          "account.info.title": "Informações da Conta",
          "accountForm.labels.fullName": "Nome completo",
          "accountForm.labels.email": "E-mail",
          "accountForm.labels.phone": "Telefone",
          "accountForm.labels.address": "Endereço",
          "accountForm.labels.country": "País",
          "accountForm.labels.city": "Cidade",
          "accountForm.labels.zip": "CEP",
          "accountForm.ph.fullName": "Nome completo",
          "accountForm.ph.phone": "Telefone",
          "accountForm.ph.address": "Endereço",
          "accountForm.ph.country": "País",
          "accountForm.ph.city": "Cidade",
          "accountForm.ph.zip": "CEP",
          "account.settings.title": "Configurações da Conta",
          "account.settings.personalData": "Dados Pessoais",
          "account.settings.save": "Salvar alterações",
          "account.settings.security": "Segurança",
          "accountForm.labels.newPassword": "Nova senha",
          "accountForm.labels.repeatPassword": "Repetir senha",
          "account.settings.updatePassword": "Atualizar senha",
          "catalog.moreInfo": "Mais informações",
          "catalog.goldTitle": "Barra de Ouro",
          "catalog.goldDesc": "Ouro 999,9 certificado. Ideal para investimento e reserva de valor.",
          "catalog.platinumTitle": "Barra de Platina",
          "catalog.platinumDesc": "Platina 999,5 certificada. Investimento de alto valor e raridade.",
          "catalog.braceletTitle": "Pulseira Numina",
          "product.lingote_100g_oro_fino": "Lingote 100g Ouro Fino 999,9",
          "product.lingote_100g_platino_fino": "Lingote 100g Platina Fina 999,5",
          "product.rolex_126610lv": "Rolex Submariner Date 126610LV",
          "product.bracelet": "Pulseira Numina",
          "catalog.braceletDesc": "Design exclusivo com materiais de alta qualidade. Edição limitada.",
          "productNames.gold100": "Lingote 100g Ouro Fino 999,9",
          "productNames.plat100": "Lingote 100g Platina Fina 999,5",
          "productNames.rolex126610lv": "Rolex Submariner Date 126610LV",
          "productNames.braceletLimited": "Pulseira Numina \u2013 Edi\u00e7\u00e3o Limitada",
          "catalog.rolexDesc": "Submariner Date com aro verde e caixa Oystersteel. Automático.",
          "actions.copy": "Copiar",
          "actions.copied": "Copiado!",
          "product.shippingNote": "Envio assegurado com rastreamento. Certificado incluído.",
          "product.buy": "Comprar",
          "buttons.back": "Voltar"
      
        }
      };
      // === Merge extra translation keys without touching the base dictionary ===
      (function(){
        const EXTRA = {
          en: {
            "purchases.none": "No purchases",
            "referrals.none": "No referrals",
            "filters.search.purchases": "Search purchases…",
            "filters.search.referrals": "Search referrals…",
            "filters.search.miscompras": "Search my purchases…",
            "filters.search.raffles": "Search raffles…",
            "filters.clear": "Clear",


          "referrals.shareLink": "Share invitation link",
          "referrals.confirmed": "Confirmed referrals",
          "referrals.progress": "Progress to next ticket","mb.kpi.yourTickets": "Your tickets",            "mb.kpi.openRaffles": "Open raffles",            "mb.kpi.yourParticipation": "Your participation",

          },
          es: {
            "purchases.none": "Sin compras",
            "referrals.none": "Sin referidos",
            "filters.search.purchases": "Buscar compras…",
            "filters.search.referrals": "Buscar referidos…",
            "filters.search.miscompras": "Buscar mis compras…",
            "filters.search.raffles": "Buscar sorteos…",
            "filters.clear": "Limpiar",


          "referrals.shareLink": "Compartir enlace de invitación",
          "referrals.confirmed": "Referidos confirmados",
          "referrals.progress": "Progreso hacia próximo ticket","mb.kpi.yourTickets": "Tus tickets",            "mb.kpi.openRaffles": "Sorteos abiertos",            "mb.kpi.yourParticipation": "Tu participación",

          },
          pt: {
            "purchases.none": "Sem compras",
            "referrals.none": "Sem indicações",
            "filters.search.purchases": "Buscar compras…",
            "filters.search.referrals": "Buscar indicações…",
            "filters.search.miscompras": "Buscar minhas compras…",
            "filters.search.raffles": "Buscar sorteios…",
            "filters.clear": "Limpar",


          "referrals.shareLink": "Compartilhar link de convite",
          "referrals.confirmed": "Indicações confirmadas",
          "referrals.progress": "Progresso para o próximo ticket",

          }
        };
        try {
          Object.keys(EXTRA).forEach(function(L){
            if (DICT[L]) Object.assign(DICT[L], EXTRA[L]);
          });
        } catch(_) {}
      })();
        // === i18n placeholders helper ===
        (function(){
          function applyI18nPlaceholders(scope){
            try{
              var root = scope || document;
              var nodes = root.querySelectorAll('[data-i18n-ph]');
              nodes.forEach(function(el){
                var key = el.getAttribute('data-i18n-ph');
                if(!key) return;
                var txt = (window.dI18n && dI18n.t) ? dI18n.t(key) : (el.getAttribute('placeholder')||'');
                if(txt) el.setAttribute('placeholder', txt);
                if(el.hasAttribute('aria-label')) el.setAttribute('aria-label', txt);
              });
            }catch(e){}
          }
          window.applyI18nPlaceholders = applyI18nPlaceholders;
          try{
            if(window.dI18n && typeof dI18n.apply==='function' && !window.__i18nPHWrapped){
              var _origApply = dI18n.apply.bind(dI18n);
              dI18n.apply = function(){
                var r = _origApply.apply(this, arguments);
                try{ applyI18nPlaceholders(document); }catch(_){}
                return r;
              };
              window.__i18nPHWrapped = true;
            }
          }catch(_){}
          // Run once on load
          try{ applyI18nPlaceholders(document); }catch(_){}
        })();
        

      // === Extra NAV labels (merged into DICT) ===
      (function(){
        const EXTRA = {
          es: {
            "nav.dashboard": "Dashboard",
            "nav.purchases": "Compras",
            "nav.raffles": "Sorteos",
            "nav.referrals": "Referidos",
            "nav.catalog": "Catálogo",
            "nav.settings": "Configuración",
            "nav.logout": "Cerrar sesión"
          },
          en: {
            "nav.dashboard": "Dashboard",
            "nav.purchases": "Purchases",
            "nav.raffles": "Raffles",
            "nav.referrals": "Referrals",
            "nav.catalog": "Catalog",
            "nav.settings": "Settings",
            "nav.logout": "Log out"
          },
          pt: {
            "nav.dashboard": "Painel",
            "nav.purchases": "Compras",
            "nav.raffles": "Sorteios",
            "nav.referrals": "Indicações",
            "nav.catalog": "Catálogo",
            "nav.settings": "Configurações",
            "nav.logout": "Sair"
          }
        };
        try{
          Object.keys(EXTRA).forEach(function(L){
            if (DICT[L]) Object.assign(DICT[L], EXTRA[L]);
          });
        }catch(_){}
      })();

      // === Extra NAV labels (merged into DICT) ===
      (function(){
        const EXTRA = {
          es: {"nav.dashboard":"Dashboard","nav.purchases":"Compras","nav.raffles":"Sorteos","nav.referrals":"Referidos","nav.catalog":"Catálogo","nav.settings":"Configuración","nav.logout":"Cerrar sesión"},
          en: {"nav.dashboard":"Dashboard","nav.purchases":"Purchases","nav.raffles":"Raffles","nav.referrals":"Referrals","nav.catalog":"Catalog","nav.settings":"Settings","nav.logout":"Log out"},
          pt: {"nav.dashboard":"Painel","nav.purchases":"Compras","nav.raffles":"Sorteios","nav.referrals":"Indicações","nav.catalog":"Catálogo","nav.settings":"Configurações","nav.logout":"Sair"}
        };
        try{ Object.keys(EXTRA).forEach(function(L){ if (DICT[L]) Object.assign(DICT[L], EXTRA[L]); }); }catch(_){}
      })();

      // Global helper to translate product names in tables (available before first render)
      window.i18nProductName = function(name){
        try{
          if(!name) return '';
          let key = null;
          const n = String(name).toLowerCase();
          if (n.includes('126610lv')) key = 'productNames.rolex126610lv';
          else if (/(platino|platinum)/i.test(name)) key = 'productNames.plat100';
          else if (/(oro|gold)/i.test(name)) key = 'productNames.gold100';
          else if (/(pulsera|bracelet)/i.test(name)) {
            key = (/(edici[oó]n limitada|limited)/i.test(name)) ? 'productNames.braceletLimited' : 'product.bracelet';
          }
          if (!key) return name;
          // return a translatable span so language switches re-translate automatically
          return '<span data-i18n=\"'+key+'\">'+(dI18n.t(key) || name)+'</span>';
        } catch(_){ return name; }
      };

      function i18nProductName(name){
        try{
          if(!name) return '';
          let key = null;
          const n = String(name).toLowerCase();
          if (n.includes('126610lv')) key = 'productNames.rolex126610lv';
          else if (/(platino|platinum)/i.test(name)) key = 'productNames.plat100';
          else if (/(oro|gold)/i.test(name)) key = 'productNames.gold100';
          else if (/(pulsera|bracelet)/i.test(name)) {
            key = (/(edici[oó]n limitada|limited)/i.test(name)) ? 'productNames.braceletLimited' : 'product.bracelet';
          }
          if (!key) return name;
          return '<span data-i18n="'+key+'">'+(dI18n.t(key) || name)+'</span>';
        }catch(_){ return name; }
      }

      function canon(lang){
        try{ lang = (lang || localStorage.getItem('lang') || navigator.language || 'es').toLowerCase(); }catch(_){ lang = 'es'; }
        if (lang.startsWith('en')) return 'en';
        if (lang.startsWith('pt')) return 'pt';
        return 'es';
      }
      const dI18n = window.dI18n || {
        lang: canon(),
        t: function(key){
          try{
            if (window.dI18nReal && typeof window.dI18nReal.t === 'function') {
              const v = window.dI18nReal.t(key);
              if (v && v !== key) return v;
            }
          }catch(_){}
          const L = this.lang || 'es';
          return (DICT[L] && DICT[L][key]) || key;
        },
        set: function(l){ this.lang = canon(l); try{ localStorage.setItem('lang', this.lang); }catch(_){}; this.apply(); },
        apply: function(){
          document.querySelectorAll('[data-i18n]').forEach(el=>{
            const k = el.getAttribute('data-i18n'); if(!k) return;
            el.textContent = this.t(k);
          });
          document.querySelectorAll('[data-i18n-ph]').forEach(el=>{
            const k = el.getAttribute('data-i18n-ph'); if(!k) return;
            el.setAttribute('placeholder', this.t(k));
          });
          try{ window.updateStatusBadges && window.updateStatusBadges(); }catch(_){}
          try{ window.__updateLangLabel && window.__updateLangLabel(); }catch(_){}
          try{
            const el = document.getElementById('welcome-title');
            if (el && window.__lastUserName != null){
              el.textContent = (dI18n.t('labels.welcome') + ', ' + String(window.__lastUserName || '')).trim();
            }
          }catch(_){}
        }
      };
      Object.defineProperty(window, 'dI18n', {
        get(){ return dI18n; },
        set(obj){
          window.dI18nReal = obj;
          if (obj && typeof obj.set === 'function') {
            const _set = obj.set.bind(obj);
            obj.set = function(l){ _set(l); dI18n.set(l); };
          }
          if (obj && typeof obj.apply === 'function') {
            const _apply = obj.apply.bind(obj);
            obj.apply = function(){ _apply(); dI18n.apply(); };
          }
        }
      });
      window.setText = function(id, val){
  const el = document.getElementById(id); if(!el) return;
  const empty = (val === undefined || val === null || String(val).trim()==='');
  if (empty) {
    // put a translatable span so language switches re-translate automatically
    el.innerHTML = '<span data-i18n="account.undefined">' + dI18n.t('account.undefined') + '</span>';
  } else {
    el.textContent = val;
  }
};
      const STATUS_FALLBACK = {
        es: { active:'Activo', pending:'Pendiente', completed:'Completado', cancelled:'Cancelado', inactive:'Inactivo', paid:'Pagado', disputed:'En disputa' },
        en: { active:'Active', pending:'Pending',  completed:'Completed', cancelled:'Cancelled', inactive:'Inactive', paid:'Paid',    disputed:'Disputed' },
        pt: { active:'Ativo',  pending:'Pendente',completed:'Concluído',  cancelled:'Cancelado', inactive:'Inativo',  paid:'Pago',   disputed:'Em disputa' }
      };
      function normalizeStatus(x){
        const s = String(x ?? '').toLowerCase();
        if (s==='true' || s==='activo' || s==='active') return 'active';
        if (s==='completed' || s==='completado' || s==='complete') return 'completed';
        if (s==='cancelled' || s==='canceled' || s==='cancelado') return 'cancelled';
        if (s==='inactive' || s==='inactivo') return 'inactive';
        if (s==='paid' || s==='pagado') return 'paid';
        if (s==='disputed' || s==='disputado' || s==='disputa') return 'disputed';
        return 'pending';
      }
      window.statusBadge = function(state){
        const key = normalizeStatus(state);
        const label = (STATUS_FALLBACK[dI18n.lang] || STATUS_FALLBACK.es)[key] || key;
        return `<span class="status ${key}">${label}</span>`;
      };
      window.updateStatusBadges = function(){
        document.querySelectorAll('.status').forEach(el=>{
          const key = ['completed','active','cancelled','inactive','paid','disputed'].find(k=> el.classList.contains(k)) || 'pending';
          let label = (STATUS_FALLBACK[dI18n.lang] || STATUS_FALLBACK.es)[key] || key;
          el.textContent = label;
        });
      };
    })();
  </script>

<style id="auto-scale-75">
/* Scale the whole UI to look like browser zoom 75% on large screens only */
@media (min-width: 1200px) {
  html.__uiScale75 body {
    transform: scale(0.75);
    transform-origin: top left;
    width: 133.333333%;
  }
  /* Safari / iOS */
  @supports (-webkit-touch-callout: none) {
    html.__uiScale75 body {
      -webkit-transform: scale(0.75);
      -webkit-transform-origin: top left;
    }
  }
}
@media (max-width: 1199.98px) {
  html.__uiScale75 body {
    transform: none;
    -webkit-transform: none;
    width: 100%;
  }
}

.btn-delete-row{border:1px solid #f5c400;color:#f5c400;background:transparent;
  padding:.35rem .7rem;border-radius:.55rem;font-weight:700;cursor:pointer;
  transition:all .12s ease}
.btn-delete-row:hover{background:#f5c400;color:#111}

</style>


<!-- Sidebar uniform height = tallest section (v4) -->
<style id="sidebar-uniform-fix-v4">
  :root { --header-h: 0px; --sidebar-h: auto; }

  /* Ensure the main container stretches to the sidebar height */
  .dashboard-container {
    align-items: stretch !important;
    min-height: var(--sidebar-h) !important;
  }

  /* Sidebar takes the height of the tallest panel across tabs */
  .sidebar {
    position: relative !important;
    top: 0 !important;
    height: var(--sidebar-h) !important;
    min-height: var(--sidebar-h) !important;
    overflow: hidden;
  }

.btn-delete-row{border:1px solid #f5c400;color:#f5c400;background:transparent;
  padding:.35rem .7rem;border-radius:.55rem;font-weight:700;cursor:pointer;
  transition:all .12s ease}
.btn-delete-row:hover{background:#f5c400;color:#111}

</style>
<script id="sidebar-uniform-fix-v4-script">
  (function(){
    function measureEl(el){
      if(!el) return 0;
      var cs = window.getComputedStyle(el);
      var hidden = cs.display === 'none';
      var prev = {display: el.style.display, position: el.style.position, visibility: el.style.visibility, height: el.style.height, left: el.style.left, top: el.style.top};
      if(hidden){
        el.style.visibility = 'hidden';
        el.style.display = 'block';
        el.style.position = 'absolute';
        el.style.height = 'auto';
        el.style.left = '-10000px';
        el.style.top = '0';
      }
      var h = Math.max(el.scrollHeight, el.offsetHeight, el.clientHeight);
      if(hidden){
        el.style.display = prev.display;
        el.style.position = prev.position;
        el.style.visibility = prev.visibility;
        el.style.height = prev.height;
        el.style.left = prev.left;
        el.style.top = prev.top;
      }
      return h || 0;
    }

    function setHeaderVar(){
      var header = document.querySelector('.dashboard-header');
      var h = header ? header.offsetHeight : 0;
      document.documentElement.style.setProperty('--header-h', h + 'px');
      return h;
    }

    function recalc(){
      var headerH = setHeaderVar();
      var ids = ['main-dashboard','section-configuracion','section-compras','section-sorteos','section-referidos','section-productos'];
      var maxH = 0;
      for(var i=0;i<ids.length;i++){
        var el = document.getElementById(ids[i]);
        maxH = Math.max(maxH, measureEl(el));
      }
      // Ensure at least viewport height minus header so it never shrinks
      var viewportH = Math.max(0, window.innerHeight - headerH);
      var sidebarH = Math.max(maxH, viewportH);
      document.documentElement.style.setProperty('--sidebar-h', sidebarH + 'px');
    }

    // Recalculate on load, resize, language changes and DOM mutations
    recalc();
    window.addEventListener('load', recalc);
    window.addEventListener('resize', recalc);
    setTimeout(recalc, 150);
    setTimeout(recalc, 600);
    setTimeout(recalc, 1500);

    // Observe dynamic content
    try{
      var root = document.querySelector('.main-content') || document.body;
      var obs = new MutationObserver(function(){ setTimeout(recalc, 30); });
      obs.observe(root, {childList: true, subtree: true});
    }catch(_){}
  })();
</script>

<!-- Fix: animation visibility + hover unification -->
<style>
/* Smooth hover transitions for buttons and cards */
button, .stat-card, .settings-card, .srt-card, .pd-card, .sc-card, .card, .product-card{
  transition: transform .2s ease, box-shadow .2s ease;
}
button:hover, .stat-card:hover, .settings-card:hover, .srt-card:hover, .pd-card:hover, .sc-card:hover, .card:hover, .product-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}

/* Entry animations – visibles por defecto; sólo animan si tienen .animate-in */
.section-title, .product-card { opacity: 1; transform: none; }
.section-title.animate-in, .product-card.animate-in { animation: fadeInUp .6s ease both; }

@keyframes fadeInUp{ to { opacity:1; transform:translateY(0); } }

/* Respeto a usuarios con preferencia de reducir movimiento */
@media (prefers-reduced-motion: reduce){
  .section-title.animate-in, .product-card.animate-in { animation: none; }
  button, .stat-card, .settings-card, .srt-card, .pd-card, .sc-card, .card, .product-card{ transition: none; }
}
</style>

<!-- NUMINA: Opción E (Neon suave) para botones Detalles/Eliminar + separación -->
<style id="numina-buttons-opcion-e">
  /* Separación entre botones en la columna de Acciones */
  #purchases-table td:nth-child(5),
  #miscompras-table td:nth-child(5) {
    display: flex;
    gap: 14px;
    align-items: center;
  }

  /* Detalles (dorado) – estilo Neon suave */
  .table-container .action-btn[data-action="details"]{
    background: transparent;
    color: var(--primary);
    border: 1.5px solid var(--primary);
    border-radius: 14px;
    font-weight: 700;
    padding: .45rem .9rem;
    box-shadow: 0 0 0 1px rgba(255,215,0,.45) inset;
    text-shadow: 0 0 6px rgba(255,215,0,.35);
    transition: all .18s ease;
  }
  .table-container .action-btn[data-action="details"]:hover{
  background: var(--primary) !important;
  color: var(--dark) !important;
  border-color: var(--primary) !important;
  box-shadow: 0 0 12px rgba(255,215,0,.45), 0 0 0 2px var(--primary) inset !important;
  text-shadow: none !important;
}

  /* Eliminar (rojo) – estilo Neon suave */
  .table-container .btn-delete-row,
  .table-container .action-btn[data-action="delete"]{
    background: transparent;
    color: var(--danger);
    border: 1.5px solid var(--danger);
    border-radius: 14px;
    font-weight: 700;
    padding: .45rem .9rem;
    box-shadow: 0 0 0 1px rgba(220,53,69,.45) inset;
    text-shadow: 0 0 6px rgba(220,53,69,.35);
    transition: all .18s ease;
  }
  .table-container .btn-delete-row:hover,
  .table-container .action-btn[data-action="delete"]:hover{
    background: rgba(220,53,69,.10);
    color: #fff;
    box-shadow: 0 0 18px rgba(220,53,69,.35), 0 0 0 1px rgba(220,53,69,.6) inset;
  }
</style>


<style id="numina-actions-visible-fix">

/* === NUMINA FIX v2: acciones en una sola línea === */
.table-container { overflow-x: auto; }
#purchases-table th:nth-child(5),
#miscompras-table th:nth-child(5),
#referrals-table th:nth-child(5){
  width: 22% !important;               /* más espacio para dos botones */
}
#purchases-table td:nth-child(5),
#miscompras-table td:nth-child(5),
#referrals-table td:nth-child(5){
  overflow: visible !important;
  white-space: nowrap !important;       /* NO partir en varias líneas */
  display: flex !important;             /* coloca los botones en fila */
  gap: 12px !important;
  align-items: center !important;
  justify-content: flex-start !important;
  flex-wrap: nowrap !important;         /* evitar que bajen a segunda línea */
  min-width: 240px !important;          /* asegura espacio mínimo */
  padding-right: 16px;
}
/* Asegurar que los botones no tomen todo el ancho */
.table-container .action-btn,
.table-container .btn-delete-row{
  display: inline-flex !important;
  width: auto !important;
  min-width: auto !important;
  flex: 0 0 auto !important;
  padding: .45rem .9rem !important;
  border-radius: 12px !important;
}

</style>



<!-- NUMINA: Hero en recuadro (tuneado para mayor visibilidad) -->
<style id="raffle-hero-css">
  :root{
    --raffle-img: url("data:image/webp;base64,UklGRnAvAQBXRUJQVlA4IGQvAQAwaQSdASqEA0YFPj0ejkSiIaGmI3KpSMAHiWM6YL/Fh/0iKQex1XaLuQMW/vd850Pa/bjT/s9Jv97gTuMfv/wn+E/Y3+6f930qR890/wP7Ff33/xf7P6U7c/dP79+h/7n/5P9D81P+59zPzJ2B/4fuQ+Hbyf9L/yf9u/zP+5/x////+H3V/33+V/0H7L/v/9zf1J/yv8H+8P/U+wX+O/zP/Jf3P/Uf7/+6////8flL/o/9L/T+8395f9P+x3wE/qn9n/4X+J/eL/Z///7iv9N/u/8l+8Hyv/sf+u/6f+u/0P/j+gL+f/1//e/nl/uvnR9jf/Vf87/qe4R/O/8l/2v9X++Hy+f7v/zf6b/Wf///ZfaL/S/85/7v8//sv///vfsT/m39v/6v7S//7/cfQB/4v//7038A/6X//9gD/e///3X+8H9z/uv7Nf1f5QedH3/+9/5T/Y/3H/x+yPqG+Ve3f+C/7nTy7M/9noZ/Mfvf+k/tX+U/5X+V/aj7wfd9+Z3+N/ZL3Z/X/8r/j/cr8hH5N/Rv79/ev2o/uf7w/atyq8Fzjf3e/03sC+230b/K/3z/Nf+X/F/Aj+P/3v8p68fa7/m/5P93v9D9gP9F/tH+x/wP7v/53////L8R/5P/p8dj0z9wfgF/m/95/7X+Y/2P7S/TT/if+z/Y/679zvdt+kf5v/y/5//Y/uD9hv8r/s3/I/vv+l/+3+s////z++H//++P9vv//7xX7e////lDN/kzhUHVrGEmWUjBsjFSKo6WdpQdWsYSI2NRSRtJ3NKrBlrAZZgHqQHWFB26aPPL994SP7/pQdWsYSItSbqvnUJ0MGWY4F5QUBjv/gtyqJ0eJB5OsxHxZymOrWMI9dpVujLjV5BvEIGK0x1YzfH+Uvx8K7eq2ME8EEnZpY7JnEguxdVEukfVVUHT0Rg4hpH/AlA+cWfAhJ6vJtjgeOfFRpiomPKGyikHuyvHOEG+gvXH6Fx3gU5oilcGrZqtjBgZqMnZc7MR+BZpo+9ea8K2L9/0oN8LaRth4kEJ91wUnZc2omVN1e2ygWq+5LcfYcbl/QcDHEWCKjIS2unXQM/DSr94Rlv//Qv2fZU+M97kz4z+dmGR/gIooPn193gin+BM4Qb8lKbrA3UkMnwR4X1nf/+vWD/G/k0umXB696RI81bfIYayjXCUlqx74Z0TbJQTzNccrTzAcLsVfiKQ+PoiLVKpLD8Ndg3f+MX/olpr5e1/Dyh0K2YxtgbdfDPQYBaTqDf/pUDutYzI/WsmyPi9Ndhm2U6LFgYfnoElxPMEhaNyv4IozQdWwwMyfwF8jbv5T/m/Gahe3/7UauoKtsMqhJgOq/8oof8kKX0/EnR08r3R/oSYl06O4t8iljvtjy6HaaSSrKKRI1aoxTwJBegcxlspFFuqvHKrG65////JoXDDU+IsR/72J7+oWtH9KKD0//zt9PhOtEz/nuTjY0MVo7QNMD1FAC6o2LgHumQ6k/MEl+TiE2fsDzoknDrbvoRBowd/kYOKGxpF209dBMhbneupd1//77mX4oTt3LiybAL1+e24P/wgyu+JezkvjpQ2a4/+RGdV1W1xZLt/IPVUPYdfGOC1Co5pBfVTY/aM6Wx8kt+wC+Oaj+9XtC0Pg1mjzVB3nYObXys/9E7Q0KL/GrxQ7P4+ZmH7iNHZcqhPbS5Af+Kv/nu5NtaOvt4of6QXyutdvN7a+jQvXRNZlNyvgdoKBULjS9toXZyHHZeT+hYzqJ09Ninu8KKcKQ2ayJyq5e45cKrWHKx+D0Czy8VhgUqpxHXINXf/b3SCrcW3FkSoEh+XMdt/n9jQX6cKRq+vub2v/bE9tJNeJ7HlitwglNMkxcAWCXNv8HRbP0olJ3xenzPogtOXCR9clibqtRv7v8CVGx193qqNjx4VmBDvo/141+Ac78aanPIXB/qFh8T/5u+n/STigz//TBxPTDp74JmcqDOYI67/7ne+uPZsvBgpTLbdveAiAug4+7e2vy7ri/C2MRhTFPf6B9geTja+dp2Ah6q9zvAy7heRGdcOE+jTbxIH5ZKNG1aSH///9NpTYYTAmmv9/8NpIt9tCT//am7v///WqFrDd2WgKRqMeiH34+tS6V/RcGLrsEyTFhbar2ARtxmY2DIV5xz3+i8PR8egAJj/fvzTKwoYVIPtq3O0/TIkhT078InbfX/kJp5dnuDWXhpEEdG/9TcPAiVtUXM1jSX92t3vo2J9CteXk/fd2adLttXf7xmL/cQCO9FeB7/nkuX1Gzyldgib+ZV3BvEwlm3AN5ce0xvi8usAglVsdU3GrnKJGQxwEsMU63KvQKZGOpUbqNB4yMlj36jpeglDzYpCbWnSKlGak2WP/ITyMVc38WR2L/t1ytMkpb7QTorzn//wkA8p1HpM7xBH///Gqamy5ELbh1XwPp5tn68SCKYaHtWsO/7tsfP/wtrwYnK5S6W+PLHYO19+/Sm9gYyMjchkTZfXH3lt053NUpVz6KJEm9Ugy43byn54zEaUiO+O7XsVqvxAiktAVw4H40k2UJnZhu0PedRx32ycjrtXiRAVOj0+2NcmpjHz+rY7Yaw4R76eXqmr/0H3DXiT0NF5qFPemqOvD723SAfSLY1KTNZ8TN2kfYvjvfSsOhOZ5c/zd93IJGRAETJWrLf6P6tuMbA1vBZlGFmCIloqZbL7AJFExVo6SW8CD8CJInb7EFQLa9hapwf0ZenTeTl6XzgVO34OqXLDyY0QOfYA4WxTaCmkyT1th++MdJ6X4bxkk6H5QI3DYZu17SNkjy+riO7zcpKpOrB3iLH6JYpoUXFGzpfIvvF1V6oQc+pmnBx5hdJvM/Jsb207bAILxnsaKlKhkF2veZvon5S0bX5Pg8by87Vt9oYCjWXv7GVIgd2Orlu5udEanNlCg8VqriREVAqX5TmqOFKnQoiHGucLqGSC+zIyLJzRuV3eYtRpXgWBxJ68MC2JIOK4xLkoGzr40Fn1CQuce4kRkS7duaECubOpYLPsY/8/iww4j2FfKxJrxWlQoJFdohFHNn767P91K5Yl8WQZf91tA96B1oyLXphVWNSXtXaQYCg3eynwtjLvjL8wvDcF5u32nE1HZLP9KZaPxR+mMhS+1Zxv7a48yuLrev7Aii+RaOHWQrXaAnXM/+Iw8b/3QH4hwzdfY4GQaPt3/cN7b1P5kZMhVFHzU4oA8I34rmhg+J/TtFROuT4Jo7sSdIyljD77170jjnWxdGO15QT988MqYAYF3OXwDyV9EfziOQS/4PgW/JMMLNDG/KApkuzBVPS0F6Sx3hgAq0nBqmMxqJl5on/6dWfUK0MckI2ymaCzMpRxDy/5ckr+uQtXKfHXnMwyokmikgVgNwaoief9PcIz/ZfgcOwacFX38K4kFcCFn43QXv++9j+Ci0qrM/uVfLEZz/B8H8yPrxbP38j3pRjJ9PX87OMUshEhwmZj6Fqd/sTHQhj7NegX+pBI//85TOw2IwyGFjKwg3t1oE+Aooc64AR+nRQryMoZBUOMmNWdKWf3BSbmSlOl8Lef2ZeqynHryd65iTdB5wjYMh1wBhHuAgoMBdTP2qTBh8lqK+JOJOzV7bJlK8cVcMw/3OBnENlVl9yecGJ85wymAysj4kaqNWXkLfP33x6vm1ECH7////eDvDPf06e1Fo//mSrn8nskXjQTf2nHAcL/lJCSW1iInyJclOib/CdfNPl9/uJcXmrDMoEBKg+OJEgsNhWiZ3T0c08PEb/rkalI7i2H7coI+7FPqLVzqCIiK7vJ/IRbwhwyg1dE84Z9MGitLL6XUUha71woY5sWpomHOppCSHetQbOwkMHGd4a8xP/9N6wOwf/kjpVO//nrb//0hcXRBLE3pNIOmbGoiE6VANYPZRTqcj+Kw4hrALJdtkepS6JauYmU+Ipm19VkQ64M2ZEav2TTszJt2ol2Ol/FWdmCArECg1mQcm9xS9DrsDQFBlVWvn6bqgNOiPv24vX//xguWP3UOIKbdvjml6uN+UQzGwg////lwf//Huj/PWeZSSOCQzuEyqLTLPtFV6Wj7+Bz9NHhWNzjN5DOzKcvaxMtivRMPYXT2Rc6E/HhTolyN5dCSg3NJu/FtCbUHTRvWjF6vWhvll2K0mW9t8cGoVcTWxOw4i4T/9d/r3gBp//9Nl5mc9MTfW+xE02FOoKI5v9IqiQfFVmM6wL8iOtB4//w3PQntz3tufvCu+B2XvHy2lRoMH7GMPUmev5Eh7KT2VxPpEgIoxAzrOu4W2ZFQP4IS4DcaieK/fhJVxLNESW4OKV5JAVJxZQu7gtY2sBZC+5LVauAFFH//ZiiyZ8waPzt6zpFMr//8eNESkO16n8PhDSKI8s9PMkQpvRd6mali7xvPYPC+sjd0poV5y1RlRSq3a7QZP84bqS/r76ZH5guubUrO/w/CFTlVxTVuhhE0xhHS2wtOc/Z5B0Hz6BmEn+YQxg95RBDqQfaRR9q3H6sYFjjKeXTedPkvK/z/nJRng4///WnUDOd9N5FYJ5dSGSrMCNzDzTU9udXVCbp/yw/L+AtzLUWoAomyPgvt6QLEpqED0OxHE7DWzPNCKd7gPf+S8SQZ80TOrFhObdPNu+f6dOWgyVzhxLxvi6Dmzsojv4CIFephvhkLzR1raIYpp0PjR6HsIIe6CHLltopvg9Ne///8u6nh81yqVRS7fc1e/q7vmDJtV0Sk2oAWmw+L9ZcCkTtnZf0F6GOMY+pH9sXKuLXyXazEOp+Qtd7tzS/RS+3kb4OrV2ofX5qrBdZHgyU+yBQ+6hs7p082CdeVshK9iaNOHbL28wu1M+WAUcmdUISsMR1uqNU+mcuZW8UaVUqRyf///Ht//1ItKPv/9Zneyf+ytJADFai6ueJlA4A0CvtbpzOXps8mYcfwcb+ndJyisLU8ZkttP2JFmQ9OSAbED399+2bO6FpllOdkjZBHkaoXKmnG43KH3TNNFc8W/rD10fO4d+yi5YlOBGjxcNY7Fcrj/ZiSPPInFojVzJ5pYDrAr7PAHQhXIRujomVbVyFcoU/OZd3/KHB5ouu//ypBI8332RnVOiVtMipBrVSfb6sSiFVVnF0ZQjOrozN4I2aaAsO5BdvK/UeFA6xqZv57tnhhb1ylTdm2opuK+NOaFNRsCPrmVQ4w8Zyj/9eMM6zrMWSsN8o4KHq+hqVbafD13Ypgpwn9lfw4HwMPdCIq5IZCo85i74iVcjTHtQPIbybDeezpoqO/pdhMj4C9+vyn6EJrNN5tzOtcZuuyVtJgtTz4nPmlC7GETWnI/2DZ7YANWYUuL2kPM7bQGxT2yaYw1dNrUwNSmdZaQJngO1LHVl3QKmFALxCcMMfWlRagbTP94zmNLmmi5KOulLp5hehja2VTpqUy1VtmbFryFXtIWQ+EFE0GMyFv9FFXjJnEzRU+QfQW2ngvofCUG2/CU3oBwxw+AqNl7qgt8Vk1Uloh3OElXpsCBhlVs9tW/8aFrDpW1F5oF91x50gbqveu4ln/doPsRXxnN9jYFce17N3kOMJXDwAhXeN+pCGEY/FfyEnC6qEsLfBgnnsiV5kBwxgSJ9PhI7fDrIt1oOnta/ffPnLbVxfCEzpLmg7gn7KbsuVDVKJOj9JmdSG76n2P9RxlwsXuDAGgFsofQYZ4gd8uG5xNEkqo0McCDIg5OyyzTR0U5zd2jLs20+SzP4GY2139RuXF4D7OwcveetcNcLPKrj9jaVPitIkO9bIIdDzL3AnArXqKh7VaU1YK9celWsSegrqtG573oE4Y/5rRGjNpChBN1Ig2El3gy9X9hZpU7larPJZp5/9f0ZzOgG/NLcASAD1TR7LuqWNnqZY01E5SyzN+Pa78T/7XjW4HeJ5xM8rLiKBZTilpnbyh68P9e2PlLj4yCgClGR8Ln9DHEf8y1nZJrIor2nJD+cF665rT+H7slI7HUUcVHKBE/wKQqHkxZ2jTgpIATdYsczKI5+Q7VhayWF9WRnXnOX1F42xkMCMHMIofuI0AbRdcVJncVe+1vf2EXITTuDxu4UoRPyKQml3m+dQXEFXL0WYP2afNu4qYix4hED8MJ98NV/EGl9Uo+FPIj8hJMep71SmFBYbMRaGUwQQegcYZkzKM6xKSMF+IRUFRQURwxHY4uHLd+Durwzd3gwYW/GCXiB6EGvRMzGJiWTfmGVgy9h1B1a7NXd91rGDLr9Y10sG63SwOjOElViyufPsBx4Mx498pcqrwyJa/rWS5NlXRpvzLrlFeDNPUEFLwro41AqaPGIWfPS1uOPlciRm0GO8Aj4SCAnpw/Lusx4QxMMaKIlXUKtL/yfL0oVrgCP2EycP5ZpAwzye7zS0m6Ld8c5EMOp4aewUvVlT42RLd+jO8Crz9HFqgytGoNDr9VkVJkSGY5zUj1LyvogdA/nIspmsiXBEY4IgpqwuHKMb8m9BT747NF5IrIVl83LRc+KdltB/7S8jdWPwX5gjZRjKR9Ex3lIk2lYU/Hby6upxv9RyzZDWJ5osujqTHT6YqPirRTAr3Csp/hQKSCbqYF8oW7E6TAkZY3o7J7UZ/I/P0tarscm2vgPV0NFJTZBs/xx6WXZjFYnOmzJg4/vQ/60mhWe5f4KsMwjiGOU0no2Kq9OWdkbOHblw9LRdnN6nAVmfTPL3qtbZUgwt93UyL3rAH8sggqjzzA581OLm+WHqulslnmVYArPGz8B0pR6CpM9DDBFNGki2DbN1U7KrwN8XbE0xz2uTQ14Qi+3PAEjeXNDhJtc8SgfSCWLRXF+/+OUKvzU5YP8hu+ou3ARIWJVnNqU83iOdoTwS9mWs/15drSN4cvyDzR0k5eHaBD10UTtkPnrdv1TTvOd//Nyi33FWYPTHmr2DS7HNeiPCTH9g96SVErc5l+zukWIPGE5F5RbVY9AIKiqOfcNMgZZ0A9LItUxQ0TeX8HiiYJUzN/lq2phr3ui+0UlRr46TS/QtvxXrRltKTd2GPcvftS9i4+k60GHfgS6b9L09r6MbthoMtW9vE4cYxp0Bffmw222J5ExNLMajKHtS6aON19QUqtqj2cXnxyfdbXv8oixeR4Iv1z1IlYJpL7XPiSHn447lMhJd4OGkAjNiHPD1UofO0bEap7OkJKDv2e5NIAK8WE5xkUMe7BuogpkLxpROWC/OGQFCH5r7bgCDE7IocxaaR7pVjtVtrdE4bcago5zzZY9HfbJi+WD83VYC4J5XCFra6oVgSlq++xdNddu3y7VGYtZ2l9tPgWy8Y4BWLaJx8IXUOH+/T4h+np62Niw57ydrJeJv1kYl13/2kOW91LZBcYlmGUbREaAmbSVOVK/AdNrMBIuoFQ9ajOJG73cmkZZM6EcZ9AmlBvytCDuwKjJyRnzi5ccPGLGpUUnVJeZBFtxcwbdgViCqZK4YwEamawbm+1onwrhhl+mRatk5hHqWyEzYQ3HBcakt1gFaoVt+4NaHjJ27CrjBoo6U42h4bvExbJruG7JzX8cD4zclS/mj2/o5Qd+cifkomz5uvaqKKuL6SfHW/eG5FZeVgGgSV+FkRovk5xjZeZ7TaQHXPM1xpnT89r/IEiT/SLwQ9yoPXnlfNUnoIQ/RVQCxhbTc+PuYeocboYg49kfiY8okxmKAQlycNRaC5B4brRfXiGFpc4Xrt2bf93mbxAs46JrAIoh4DwkTivWefvE/Ni/9iNmr/DvDpX4kytsSsMocVrPALRL4e9bRqvoljNYJ0rNM3+u9SBOaZcOm6wz93zGajOBywYL06qmjf6GIRNrTMoY+53iRWQfgNWc+86P8eHNBzWGXo+1IClbNaHOsxhG/A+S1S7aIcNiL1CoDHbj4zRGARPrmT8KDBhugeXR05C4C+IcZR08ttcFO90WpeKKE/zO6r9pVrqZuztawdayb+vnT+MCTVXCd6/0FLHGTzdjlI5ikKHWLmAwSvJ6HUh7pRfQ1hBvmIjuHo1rL/zBILJoMAw2IpczjhXW6JTCwKCTl5sepcLsJ+X0H6Ke2VH21XbienWo1C/gTEW9zkQESzr63ageGkVHzXdHHieqBndtAFpsaaahAINWFb7XmMyGPK/8hFciLQ55MawEinPhd4oWpL5oBJR9KqPphGPss3aMhDBkPPpTZw4TnCo5baTJKBNo9OeaUOqrhf/q8PUJlO2Z1F0QhCe/u/6KPLIhvnlT3LGIZcDEcbS0ALR+e4rfjqaJlH3hhrk+fIzblKK4Uh2I68XnLaMnz/zqHGvyxWphR/It4y2Ize9BrLVHq1hnKPdbabKC2K2B3XDcJQmy7JIeZdbzAqnwcqNctyVxaWkcn5qU7FKxediem5UbG8S94EBrfrPmtlPiFV84N64dbozNz0QOWv10unsScnGhviV2YG2xMD8Tlr4oYILDbbHrNzWLx7dqXQvxLpsSDpyyQ5TTm+ud92ikHEbcX+xPF3e/VamNlQO3ye5YtCVtgdG4gwWrlLZ4dprrgEQLju0ZaTKISuW5irPZlo/tVIbh2LT+mMzoKvMzSIxkd6xaw8NFBqQPqBfwAqYuCPvptGQxUNnKcQfaHp16H8VsJBfEt0kd4Ne31NDHD2UyW3iGr6peG8SG7KFZyK22+1wfCwhEEr1G/OAEsoup79JR3buXK1rDaM42CYorEEoiqswSYWaZcaBal8VR5Uq0nsjU+xXn12tezcMkYsGs55bbbUYQqvj9iXtjzFv/ybl8z2NM/+NqdDKp9/ndLFlqxuMp9wm2kSBDi25yjplZ1/f8lv8BbihU/31O0GXtf/3BBVffCv13jN8RdBGsakqvMf6t4/RUW1Fdlln4fEiKRTI9+RJYHa3lTPBYdQWAvITKrU9pIVOD9LkjTdq2x5QEj8Y1SO/cF0f/UIZwDu7VhcVTw3UprZAwuy56se9HX5nXhRlyZQIBt1FHv3vdPitE0xQ4naiRdg7NS5MgSj/St/8Cr/DWeXtBIIA0/ZSyjWmq7lReFTA4YyzgwApY9UnXrRan83TSOfYuczXsgc6w8eejHNJPtFNRFIT3y+VI/muBP6nIarw5G/s6C8cBz/buBF8F8pflVOcx1Ztqb6/dI5dC616hgp/UBw5FBRo7mf/TMfiThYdYGXETwKp2nDAYQpXUDGT4LTpdt7f/i04ZJvpeIbkEaASPMirytGiMWUZVlnGgAnlaNEfyt/Fnl5qUr+3t+nxVeUE/LJgefo6OMysAPxKE73iRCSqhdYvRaegDfrC3GpLZrHanS/R2vucGAqLc2ujQr0/N7hKJhLXAvGz3Qsy3AlUTMT/o9hXbLceaSsrwiKPN9mtWfpCWalC807EQfFU0tq0JXmWIR9adB+Qt3GoyC9OyQRxnIlbdE3O2TyAT9tmDE6z8TfFBbCcXzwVufXgx7PHEof74oOZ+tcp/mYv5pqLx7g2rcG/nkXjoVR6dODVcAyTMv/XUUWmbVaKR0ObH/LHNl7er4qtblrHXDpsUl8ab3W3KtTa9Vf/9cnkMTZtVImg2nRE+6mVcEthhSPzzwlnXIf+3FzlyFYQVJxCWoHGsohfWdoRgWsvQ61oYmNWLy/ffRpzpJ5fFUX6ejIzfAT0PfGjyNJ1hVdeihWEIiCVzft4CXyfsOPCLeP4j3XigtmzJkemncygB+HcKwSt2elh2tb/QgXs4+eAZpY5Ay8R1qCz1ly0R/tAZLDREWGiXzInNJYxwuXWPTuXEawDsCnbDKyd8Rc1OKg3ZlvvY1S+mzhxS4Bt5ePcFahPqv/iRFWmg0Txblu3mw+ZARCahXTvM2zv3Jq/HjWi5Qz3O/nZx21/DNFof+pyjDvx97zgpWpBWNwhoZIXhaI895e05mZMA2tSNqCIbjlB8EbmUXPykGlUxqyjewubk/OG3QX1VTEYPKkE1hyd+/2MWoUKCThaSAIqA91Fi/FdHorwE7nQhOrUozqmbQhjf3q7vRdJQXBX7GJlqToILApBU1lzhBvnv8CX777VCYM8Y0Wg6+pMgnttZRC1zzmLrjeoMmUobxFvNVTGdTFJm6VWLSZOkFoqdntdwxOv8nXHMdGe5rDTvupa+5Tkzat69m8VMotm7MZFb9rXZ+y/nmoLc63pkBKQzXXpcrPN9eXCvSKcyfAP7NH6JPiSwpTGQny1qe1UtPV69zzu6oUPfkcaLDCe07Jf7i1OqqICB+aKGYxu+thH2KugacdFZ8ZD1nL/ZWiWB4DA44PaFcIp84Vqg4EkopH9EJ20zk9qhiTlzloFDPm6G4UzNEsvAE+XwH72pFSHTiM5Z8JStz5w7rQXAhFyyVDa3+ZxcmDK36hTJisrxYemxHm6kUZaU5KvwAOr1QJ8s9UYjupOtr4eiKJGN6DmN37L6gZBVwbKPKTzNZ3L2xcYGhdcitzIcUmV7TMbvAyDNpAs6XSztcIA82o8cGDLa6bWOwyD6wccNzEzabel8qfDIZUIo5mSFgImjwnXX0JbrQHoHK4iaflFKPqOChWuQcqnOKVXi/dagCsBY55CRAN6ZMLqpHF6IXau6x/mqM0UpiHaM48GaBhhuzktCQHE6rbMhQn1P4R0KnJbrgRVG5/YEkVuka6O/7Xianguz93K/jDgE5W3QoPNvLn7u5TVA37YKJojHxuOs90NkebJ2VdenzdwvonScrXNl1EqWuky7BvMCGEvtFSazpzevIOpnVk6gFcK1eEeu5dslZSUzJuHnDxP2WmL3rhSGMzpm8SzXUSblnh/d9TMglY6N0l4LCdXbMNU4VAy43yW3iQ3YgMGXpB0yEqNwSs9oMMepKhos6AfUKC/zT74jVAlfvT6lCrc6bmZ0jRoBPZpqJxx4/Besujv757nDb+g7/C95ETypibCjQfupFBeaxqmMtj8CNfkhBNoCRPBTSt/c5UbHTz4BfB4RRnTPKks3F5XmH6jQULkZBbkTW6Uk2DBOcjmg+o6ycqhzdZ6P//kCv1xNXAtseiRoku5qLrQF0k8q0DVNpf+2Ql3NE7XABMTfGqPSVk31+eThosUSHZBRamrtN4cJ4TPL9/0lo3zPAM1KdS1GmsNtNhWUi0i1EnOIEV1J5nqNoapeoQfjeMIUC6TxxsdRUBfv+mz++fmiHwnO4RrcZ2Vak1ysARq02Wgplpu8Fy6uRiAknxu3wbOsjMCavs9X/bnt78CQEQBRoSTR/MD/Yly+QUx4vJBxqSjeB+F3F7ZHfAk3SL5G+E6b+CdVw+f2LwOz55qgcuX8ENxyDMirCt8/nRJIdBdbRi171ne5rzqSWbuD6QUNzsDA0kJXcZ+Uy1tPmkmNWpEgxCLIHHqkiARof7IOu+1LBkyBSQi3OJ5oZhQa4NYiWmkjOkgbqqvDymsImzGfnyC+dsjbVjnkAh4H8Q9Kw83Ae/qAV2qXyEDLJf4zy2zaYpOw9uKoziQXpWqoOrUxmKhQxzIN46VkEvfL6LK3FQUb1XdjgKRi+ncevk5PZ8q8LRgf9nmKUYf8JYFhpvCPy9xK8hqUoTdWhIaUrKlTa4GiEqdQccD2xgRwC03DOEBT4A0NzwPkAkZL4D+iBf/tEf/AQxKhRRGd9Ilq6XKcNcO67iCu448D5ejnr+69yINIsA3MzMkNHDfRWCR1CEF/hL88TOpHESBNJ5iZbBiLDs+2RIZ1GsQF6DPFwKgsLdST6xs/h6KL7JNRYykb0efBXCMPgKWR6/t5/eqqKOwqYTh05gqUkypwg/yqZuBL4RNxkbwbgT0E5sV6IG036qIPTGDMT+iGYK2C7M0ujiXsG1h80dPPg1N4lRnFH7HO9BRy+RWr8elnCUWaRyEu5qLpJmS8hLuai6SZpHIS2GopIu9euKLg61fBccbwoG452BBHliQXpQdWsYO4EijYGHaeAAqZNaJmlZdSlWsrpz19qMTqSVW2YC7AE3EpUX3T6Ruye6As/nl9weM9Jv7e3vF63HhmECgVau26qITE+unr5S0WgLKbSq1jFLD1IFkXF27BuBw2N1a4GvpKbwXW826PUXv2Upv73z398zvpQGE6UeKv0wIoEUbBopzVazmyfksU0kUUfv9f0WW++UFB9VuYKupC7g1e/e9vLgleKxTAQmJ1XFbQ/gHAA/v3uvVjQhCUjtcRRxpXMhUu+rx3GCzbxPsFoBKnXefhfDV1kBjNDRzmz6e9qV+05Uy3co2PH/z3/OpH11zFcu1s0hM7uwtaFTsf8dgOu+SlWacNIDEPPc3HDnEB/0QALsJ8cwMlHtmmFnRQRkaV+xkdrFBB+OaBG1/sRSwPoACqCLuwWdHRd+wtxdEplIY4Yki24t+112AFPUP9TS5b/8+rIZcx9F82D3HJ+8CYz9kUG823LmyPeoAm3N+tyBlquIbSXLcIAHsJ/+wHcNlHLZhAN2fraJpkTAEKNfJ7mvIxHpx392RzRe/eas8kcaElUojrDrUPpj+tXaarBnLsWYwQFqdi1tU2z5H/NQ8J82bIrXusoqDTbURnjFqegx3lI8NDtZQEet2HCv4uE4QBEKNEfUyzQoNnxrohQlR5R7+QTDwG7M4s47YNfGT6R3Gmv2yDganzoZKmcgvOJnybGRHtFJn4nNSVhUkJgq33boAOUFuMN7rBm9kKczx1bKcQpUEW+K1/Z+6I47y5VQbHF+Std8PXazd6YO2wIjLnmLTWK35JjD9TMrgE/z1gMGRlSk2nsrw+DDwtWVq+kbCxv9qLgmcFZ7SbPWrPfbqIugp+72NG4YBjXmGwm2FB+qsItURT5K6Wdg1gmiUuMflh1gwiDzF3QXkykphDy+xajeRgiUrGT3tMC/o2il7B/+c+DHdd6+hXfBWr84bZf6guCLGt4NGiQQw2pay6E2GhxXrI4cgPPkAb+sAYBT4TF4PMxzQcnMzY69xskMvjwhML+1MbtvTCOvckDnjLzf2pYuLfEPlHJbEa1SDoUs2x9JMWGG70RUNvHxawWbci8xWs3oEQ50E99tZU9Xw5j2qimvmvMgtzxtg+NKOt5T9de9qFxjiUexY9WdsDWz+zzSNvu6fCiL50fMcCU0wfoX61Ah5StL2Z9lF0/RYqVWUp02Hg2LPbw7Pm1DokgNlRr7/smVpj8YiZr4eeeVLTk8WTwU7C7XNQIpbPb8Au7QYMShFngkmolzBtrD+kQT4SsLrjbCNxbIle1vDAis8n9i6xmIYWjbF0UiLT+hlNnfdR3IVUVGhHlc0+7C7eRQ/AXfK/4lMiuBbdHNLRsw5ritYUSFBpWMklT2cRszrhDPR4+GavH/UkBKVvwhF4lWgj/N3dp02NtNPKY0ZpUDV8O9KKUrI7wTe3185Xu31Upz0I8O43jvyT68vALigDsGgZ/LELLiA+IGSgJsQOsnoaOyOEX//ffuMLhdO/YbpvRyY5rNlIzVTGekhSAH26I1u6qoidsEYgxxxsG5UWJc6kWDgE+YJCaC5sY+i2uFPG+AKEMDgIWQbawVVOjFfxYG75WpbOBpHlbQk3cKmTKkFu8urTtSOF/8kCig5BGUutMFc6g74K47xnDlYZDMVZ4Q7MpEmECOVKsq5fM3RPNDEfOhAVHL63hUeU9Kq/3lRknsEApFDMhAxnZ+11CNPJGoVCc/bfZhc+Q6ocJyfpFPGl634VJhOtXixK5Wz36ZFkFETJk+sUuPFSVN8PVRlDy9FyDci7T3RvWQ+Nf5gcls2hcCIKXmbyElYotCpvhCZu9H9zHc9Q/BvoiEYCr/BhPU9G7wWn8mvQammOlaGyjeiJe4JXxxQCFPI7mGwxiRi27DsxiFXHdcgl1/bifrTvP4CepsxFIjWPbnmotZUyNIK5Sbq1AoOrYxIAO2k+xZyV9fR93vB/RDUrzJzxIizM7dhMvmynmxy+CqU8cI4IAVjNIEZI2R04FpbWRtoRAnBMSxDTBoMwmln32zk/atW57xL9BtF+E8eF2KAoKWAC4kuOdr0MmG0WapddY9LTKQALxKuITIX03vWTzI3o73x8B0DNhknW9h3DXQmyxlsL8BynoE0vLToRvwVyIXwDX6QFgJs7OQ4JcVIIQRSFJ41Ns2UawVb10jjgszcKeMpg3k3SfJxdfN0Sn/ipwQnH2/ZsjoUaniKfPbjk63xJwaI3FjG5rc+WyTa5zo5niajGrG/dgjFZCz7IpcopWwsYoQ+oQZ5Omtms7YUMNleca6TXnkb5RT9rv8Yum0muyq+SIK+pRjAV8pMlYkwi3ndaHiAY5VD6Kx2MNTbxbe0X6PVA6dSZL+bVqSsY4ViB1bWdyDTltXVakkghT5XHXbzUdLwB03pAT+t0MmJugaG+x226rNifqUfIvjEAd4LjqAagkFGdopeTGxyb2DsGylVDnsWH9Z2/tbyWzBo+7y8E0Sy9AzJIrJR9ZzQAKL5NzBAPlhzpVqM5DV79o/xY6CqnuSZsUbGinWBDXnJq/owxpyY8DxcT9a5DNwfi4wjloqZzpmgkAINFyIoDJLv+RDqPeZreWCuvAihNbU8uvuh4Vt6rQYWBlFnEjCELHFn6XYUICEo/Y5ATItFzhu3WYBNAACQioZEB3eStUY8PS+/X8pJTZIRBJHb4Xd3ruk4+Jeg+sJViKYr6SgqHi0N6GQfwMjdM4abEdjspQSdt8evByKPtVB+IRHfQkXU+5uY3lveooRBnJbdum8XYg6nRUFSUnw1Dips2tX9Hsi/FiT6wZqjP5C67qiMK7S2h4HGBrEFp1+XOCrTyoSiiXAvw5Ndhud+p1154MR9tox91or9IB0x1PYGq3WTBbWkiU4eJvOcrIamUvw1nNN9bb56blo5hfkjobZTJGliG1PXoGMedtjw8m7tuOv6GEawYDee7NJXM9pvQ/HKjm47Sfbdgk/i6bt3SRSvu0/rRduNnAlqfGDN+OmDD2VkTsgQuOnQPhd46I1iKvdibA1bG/myQK75EtQRIJzAG9FXPv7Anhy3KWvOWvY97j6YDiRYSYV/6j5HWC/TkJ+5e5xs8KBlfD6pxLul9XjF5ZFNDlnTeGCQmqVhAxZdM9T4wlLR6veBxoLBFzKxlxCKJIGxoBMgSfrMPGnycocXkPFoso9Q63ZWHutBRkmNA25XjyEQDGDlOhWNyKa3Nny3+dvZlM3puVozdAHpj5toaauidgzvEbWJWU6ibfBwKSUaa9Y5bmhLVJskEN3HDggL9W+Y/zGOmA0wAVZf27p0MHedLIfz8LfLqsNf3iyF8LzF1Pq7A7H0PKmKoY2mkrXqsuog7hY7AUzOlcCKTLMJ4GFEq4t/Vqu6OCza8WtZLqKPsVjkncrmylv/A5hNBvcmrQZsZTFU5TKwXScSl18pn171D6kAak3eRQgyxwsWNYQOBBDHcmYZ7BoucDNvVuhDi6AYxFwydamQmkhJhhubpA1UChm6DOPGABKzswdxylRY59KzAWAyGhQgggo9kZipi926FSYi0ufJEuOZ+4s6T4eRtaMUrKL0Jh3M/ghwjAPQO1jBzXKcu8zEulvC9yD6KHt0EbImf2ryqKuUxM1FchpFtALZhWrnCphKPZGmzlu+raJqqKm5l22Dp0yu8Hpv08bH8d9C7+CmkpCAwVM06MzhnGH7h1hPSrJXCyrvhO1qu+seQPK65pSAsRAcqapdKUioTUnoNrhovgVRWj+UrlYu2g/BRX3gX+/6kJOdA3uDc2ijpoKgBFi8Kz7FChvcKfUpOWBfctYZfI/9OmdOzcJbxD1KmUz3uQgu2rQ91OtDn/zJj1ayfmAoBwRST3qhMAoalimCTmiCP7m2BI+LfhUZjTpIgnu3UJ906HVbj7IpeoZu9iz9xuf2hBD4VNlzmWfDCTgkSKdBwKxuQq5TlRTXasiOkyIwTVAn6QpYcdppdaHrtMaaQnmTWRByUofyti9QRNn9SQpDNg6GuEQGLNGzV/ffPuEmtaucS6I9umSNC+o5e3OJwEblexgPX/xEIUYRs36M1QBBMCgxYp6HL8vcr6uat0IqQRm1LJ0cCxoUJw3cZw3Ehw7kUyeBcab61ziibd5hhaW2vGxuzRvQBRTPkq8aMTMZFsirMuD+ipEohe9rqtBmAePeEMy2H40hKXm+dlxWYcD1UZcyjZQVoNWhL4e31M7umMq7ZpPc0EUbuktMKffl52dgZe4dgq9aCBKgo7kC4nRRxTXnFUyIMsOk3GFpxTbd20pcN6DbvgAkQca9/bCZ+o2ooX7txbpKBDhGsiIFTdAyVFVpCAHG/9SkR7ULFW5Iic3YdDR8zTlZ4/8mRPR2E6GcJiS+3fWgESUi1SkGcgKkXKDWPXe7BVCtewl2ZAZ2axEZJ5hyxnG8hG+OEtP//EY3nI9qTSInzyL4hLv1d96+ZAtvGwuBLsXyNHZw0wFdpNT3XHhT04NjEq/tM69d6C8+4SlgcjNaHHa1yOi2snajpBMl93kcaJDVzNKfQ9TiheUIEfErAvRUyfBiIAh051uYb3qLkXcDUTQjAaHOIqJmZZuHMd1Uwbtl83S09F8oq8oi4/P7yYar30NSBgE1FY8xAiUn++L2IMAoABAEL7+MXQSiul17LPwaJD/AoVyO0aZovSxX5hMBNTPVNXxeUmclUl1HVnLymQCGFPdx3ml9U0h+B3yxCAj8l/BhUZ253ncwYx72qmwWB6qB9JLgJgjH7INyuEDYJzl8cYMV+TFwRRJj7nKeiOa479+bVLm7QJvA8jiDgwlmo94ub/Nysnx5CrFCaEotPqP3iVaz55MDn/wewlbrmsuCFr+BS/f9Z7rTq6Y/ZfkcVtCWSDhDaoWWNy/T6eI3dtI4ZRJtnTNBST9bPov45A19Cf79lKk48SXc+Kv4yaL+6dZhwDYR2dj6pxNPzEd7/YduAWJwtrfH1i6m2QKfUMdA8WpRSJdY3Zbb3btB2IrHbD08nrqEz7/SHZxcc6MZMR4/r6Bo7MGj0JcrwwAgSqp+vPq9rKWoOIfXnVPZhbrE959LJRwAEBIvtCW4L2KLZAJu2dvxujIBe08Jub3tlAPt2nMxshADHESYaMB9ll08bR3JGIf3E1PW3UI+UaebmpaTW0nFRPLGRAWf795MTU1QxWD/MWjbnZKLOpv4Au3Tc75zGHzKxPzqaVh9UQV7AyjMFj3RkXmNHgl+Fy/YzfoW9cKxiwyNqPkInFGxiIAhh9GohB1ANQ+atAIAeNCZovw7lxx2NLvQEEnv5BVsD4EGd3joxFA6f8t04XA0OkPF3jwfmD7LvAcMyrtQOMfi+z4mKZHNXScXPk7I9bPN8WHwADYI553p4p4qxe3cXS/wvImyMJhwsQsJ7Yr+rGm6PMsv15ocu+e9h4gTy44J2Hx8lq2jCi03FdJ5A7h/UK/8L5FDmLDSdYGW7xa8DER5lPNEwf//KdyewXLxFPqdbW3OU0MThOkDcluYFiut3dookGjM95ZpXlRXx70OFSg9Dtv2Xm/vt8fLRT834OCdh1u+5NeSxjRLZ2RkFUe0wdc/oDUIFmfM+U5GZYJnPHQQ5mt4MlrZR63MR2rAO+fc02rOjpMqlYQQ9tI9P1PnKomI5mV36DwOALcywF0jj2GKCZJFHBqvo66pbfAMCfv+0yXO3gIW7mEsnYGyvrTr/iwr0dQU9mFW9V7/aD35hon+GpG7iYiR/Rm+/LIjkBR8B4D8szVP29MMGQQSBVENZ8HZfWeVhZdDdTegiQsNnQyDhPvEFX5iJkPQveHP+AUK5gcUzDjZLArOeEqsXB+xAtGAQ5paSAF0muykYtNtFDD+dQo1guc+pCXqEfmyOEha9UbWZVPVpNRy0ZXnFUquT3JfW8Vq2cE04gwBUMEdj/d3N6ijalSv65lCY8OmudZ4TgBnujo/gqsP6CCGRPBRzsPLToyqCihIQEYnpis0wbGOEkocIALNkNgSe3sp1iN1pvavqJ9uKu5lTywlSH3haWrHdl7WXFX4L68FmpKUf5E3klIK/2xTFMTPLyk7KLV7Bki0dSHZsMpbqsAm6foSuoPhU5rmvv65uoe2jy136cQ72ctoA8bXhsM20pxhwsXzCh/uYK611f7h4Omt5VVfuQo8plOlwkXhiT0rQS6fviS07LTwArf+LtDpaUcW4iAY9+tsghDQlwBseohOKB/m5b4YPNVD0cqRLeVY+3CtIePC/k6K/8krmiVtNFVSDkAn/9cAjMIFawRDneoV/aBrHM3iNimoQ7tJKXmi/lX0FKGysNowQ/3pVJ3Pm+WMuMkFAvaaE3KLPfZ8v/3A8UGcqsPNKYw9CyIosIvUG/jhQl2k6AM64fBRkeDwIoy33fC8IgilqK62pR8L0DlTsNJSnLoUPKNfO+7kgRNWhXjH2RnZgH+ghfaI0oxMYo3L2pv6nuNEzKGVpS3q70pXtN/NlH2WCPJaaxw1Yb/WwAz1iWkXSJsCnsY0hc2oli8MFJ36OCxhQl6J0bMjYGEUV0F516Kck8UdPcpKLJLzsBAsIWX0d+INGsIUjsr1aayYxIq0EY2QLnJp7fLV+2lEJw92Rhom6LIkRHoMzdbt0iJdonzJ14JC9eMIe3XLTlEEiRuKQMJxneZB8U8Zp2MGgjgmvFD3H1/OWSBDQpsiGSrJS6a7f2VLHXS6+eXAo9Etqj0lhjgg05hD2Yt6sHUoGvyHBEIFJh9qernCas3+MXqRhCQ84wp49bSpboMGDBh98A0IrMnc+OLvi0np7ZtSNksfexS62xVCTzhHz+FxBM9Nd4s/YZ4FepE3/IFN2SQ+6Dk5+o+oAgF2TZc07dpfCEBK9c1ppQAY1BMN9z8mdCrsdDgBqSk9vstQe81hpUbNQFcsT7LG4QsCyM4IPN3/2C/hWwPnAQs9I0x5CF8cVLLQaVgnKv1+Kc/mzPM0ZINOSmR7iqjv9d2JgnskuGRlh9DqBIlM9qBE8O8sfi6ZwddyRAvyoMhRZqsyGEzTvfT1WxNHvTxC96USpKK5OkZK6kNb21uPEBXmF6r3tUxdv5KRnhz9mIjYZEn1SCJ/qswRO7jORzXsmtRfixFtxTEc53mMkyKNsYyJDMG5ATDfmtyRWnCjCtgO6XLHrjVdN9HrduVl8Z3OeP7P0nA06In7b4aXYniroLXLhw5ib0cL8+sZNmEPpblpZX6VXBJ4FD8deXm8H9Sux2hDjvEHJaohXrpI9sTyIzmclLAm7nK8RxeaNDuiRWMv4lVBdAVOiDc0skqAYY7x9bqHOvfK5/A4BLapqr+ZxaNrA5aXcwBw8l6fUUKSirsVVW4Do7nIEjMn17CRNtJgnX/4MG39KA3t57NTw+upKh4T9KESXspsqcDVKCMYz8lt1js9rcaOy5ks93Kca4CptsY85ZgFcrH4c2DMh3ULCmswRssKsnGV67UAu0JNA74iQ54xHzYFU7JkDCUUEQr5L5TR3nJYMZeyq2K6mXfNQq3bHBt9vspxw8iyMSdYq4+JYFwBjejlxYnvCtvr4BIWr3t+tY9vOvpkDx10FwgfCOShUMB9Oo1qDNYVwz1HfJjiPYWecEKWllyhxMrKCjkagRUzvORUmF/lTu3AbrTqCZYYLGMFHLr292lkFg4qkEQCvtWGNRTUcbxLpE15us6ATJ0G7I6yvVppaVFpneYQ7+MbJFoZAlYlT3rW6tixB/rf9gHeffZWaYQZkRv3JOIcJDaxFERS/UIMf3Skc4f4dZQ0pFbsSMKzu2WELf8NrHqMSL2Yq7LB59qvRLgZrDb0YskMBruzk/eGsSKwHKrr1qjI0VqA1tvyVyOX4T4k9sd65F2USHRqt7LCZH/kswHwxMVS5fWD0mEET10R7huei26tfYK8Tb6ZATZY/ADmGVZ4EReNr50u1HbfPRWoI/6ydc3pXGjYnCtz4Gdzi+WGAXDac7xniaMVLWd85kVlv/F4pmkTEUXIu2gPVh2BjripiR0deeZZipO+ppmMiUFxO8hadgIfVkmi1iyQCFTnOKGSIOrrKYo0nUDns6D9EQawhYEx60LlkJYJiZaZ7o5OIW9a5L16zRnuAFRrta1kBO0DH7V8NF/OMn1UFuDJEw06aXWzhWbWQ+R3/o6tkkUOyOAg4doVe0muyp6yE41eyH36nLgAMOuH1uF98Gg5UuIHnik5jUeWsuUegCUVozEJLBzc2AOhHwyc9XoYUrC0RC81/+66KPpqe6yEQ6zoBHl7RjJsXYVcrXtu+FaI8v1f8jMUW1W1S0BrLrD/4Do5ON0YNLPFz2vOpl6X4o2Xm6oWFJonOJTG83ToqisZXyilo7Hmy5vUEEkE/J6X/JIo4cCp/kqOWayJVCosumxl6HJCS7yN/AYVUsrZhro2h8Oo1xdR5F4cYhzKUhspoS9APBjKgMEFPvxRR8I2VGVIRv4DztP35rfSt70ivZj9GATZYJqrePjf8YT16WV2rFfw1UrLFtfsUm/zhpeIEmSgubpIKCSbEC+FCozd3QR5gVP7VFs0ekkj9Q3GuO8p/bBK3KM6MHaqxsSpOdrBoGFy1TutOajUaiHscWiE2xi5z83NMjvypgEFgT9EGP2PlcrNFfAItNYBJYRDs/q1NZJVHKuuAugr4MI3JQyBFUpzxHpd2X3JqcfEu81DojDFmdI4SzaMTCPnk8kX2p9RTB41p0rYMGokDnBtkTx/hMqpZHaqJnx332JGrWBWk4q7b2bIYLI0tnnaovqadw/wqsD0h5WhA5rZr+lAHoZIk2Hq/zVE9ArPAz6AxXPtdtWwClYf+JcG7LYXoacro4pXvqRyyjgjxbmBOyK9NsCvm0P1LRPpLmQZ7SK9hLMAOO3ujOriQpjpTV2rig/m3KLTN8kKzRV4xGUwKHSEeqwm7AT7Vem8axzjz2Rp43LbgVGGl/bhor7XO0htyjjGl1jSEKTl2Hvo8vZ3hl9rNsXYnIUfIYIvJOKSnTmH8569mFBSAuBAEldFvQ3ugg/TRxKVD638FNlgQsKM3ydlBP9SxlB2dSUtcf7KR21hB3sjSXbbC/73VxTygclWPfAxEYMgyRfB/8XrqrfL00zvzfrFYx3tqwHVncTn1mASejI89Fzim/AVJEkkCeQWNEWGJO1dvDWA1TrnmabtaAkoL00onb2/mBz42fxhY6jW84QO53qpp44kqZ2tci2H9vOsYAa/Ezdy73KRg1a25dsAFQ2zma3GBgHBfIKTXrfxJArn/bc6IK0lnQqGFFZU6HFtAS6+SeQW1U4mH5Ww37FMMKiYAO/eyJuSxBAU6XUbd3ARIF3dNelpOcgFK95a1sDC9wH6YMNP7wNhWRk0l/g6whivHlFL1fNVv1GMWd8pwwFWwOPVNSiMQVioHUu1+tcHrW8NoCrMix/tZrd7YmUq3KKZhuKbkO73syCBrUnHFFRqIN6eUQoLte5UK8a/HjwYNCwQ9gWCk9hT2EoT5eQqRVeXACL64XzRXulR6DIkxYEMXiz+/l2yM+w9V+Y55d4KLRsl315IPnTdW6dycnRB67YgcPMdb7qgjxLRkmYk1qh+hXAzbYLZRWSoqyGmHHc+X/bkfcurt+6QMz6Vg/fRpYCq5aL93Bl4cRBUOt8WLeYiV3x3jTbTfPP4XUoXninQliAxUtMFrO5nz+G2yheB6WJ/zEkw5NBTLPrbuwTcl8jG/F0k+CT0TpoT9Rakmd5PErfQQUc7QJxn+aaX41vUAhcJMwQRTEJaS9K2NoEBCjao0luEGBG8saGPKep0limWEx9DQXCyN6bqfZK1BufluvWUg9xwHGrwQguQPHkm64NzJseG6/jYS9QfCGxrGNy/zDUPAhUdghOuP8m++bG93eMuANE7WhKNUxewx6DnqvYdRv/6QQhVzVBGObuU26q4f1kGboBvshF3r6tAK9tJsiq3IVEY+sESIqCEdXx0MrTEC8lP+8nYxF4+ONns4tJGuL6vkk8IT2fDSQMazqZCeNf+PajIoNEyMN2WQbbC8DDQJB18VMZNM/kLiYWpWZxDhHfiGCoNH2vMpiRCO249AebX60vbbnW1VtfJsMtIU/oGTspL5VfbK9lJSyUI2g3lepxMGhc7ISMwsCj1QnQcv9F+Ysbo8ChUqSmR+hDd6C5Gksq0n+AGXfmjhz5cW79QEjo573ZFKdCZFXOdzSG/s7I59YLpg2Yjc9EEY1g8ByOIYOHu2bhGEgfJU3AqY4iOyGHXK7PJPtAtZGzQUDU2trn2CV5OKu6KbfPuZRiYrP2v2YDw/HwxTlrgmB8v82Be6vjgH4BzofLI+ztpuHcSTzq84ZX5u5EsQvmLhYX9yeXOgBuoqPcYTePEuB3f0XowxUE/9M4eWgeIkkve6XG3ffzM5FaXE9pjUDJER+NCoRKn9/+1feB6VMYDNLcuzaeuQpf5KVAkkMCgsNL4qnLLgjbNPz2yPf68nUVkj9DBL2wGnTXijwcHOVpUfVhbA147o3NTMfGYaXOndfaNo8wGf73QurNuIB/tb2Cc2RL45dJJEAuVAGKoCBlvgvwlBKI6mPy7F5Vyjp62pAek4CV7X72Uej/rNKn9UOAobpxyvOVZMO1gYzD2G7E8KJUzUReaoyQFtSbGgZmVxw7nbd8UvQ6SN3JhWJwx669g9qpUXjOS7hzkZQfh7fxrWIaQ+USYfnCDUozTLW3PPobQYDFmvwXmuxPRaOVV1ia6Hn5K2iISdj1Yb9/ziaoPx7rNiPrdDudgpFBVKJLPqrVywDF4WkmqJwoqgRaGdpqTvCBmbaGMLtN7WECEK8Vr2TUdcj0eVR2OKBeeGfaesPlCSM5bAU27ScrIX3PSIhmFt28hKo0TEbf89lS41MFqyIp4+KGM1s9wJtuCVr8DVZEoELpFhDXH5T6U9aPd8D66Nmv+EMQxAp+0n5Jtb+iB6zNPccNCkEv2/ylunDMSxSuosl7kxQ1JN3FASa1kcHZG9qhRhZvn5mdByuhRjZooR8EANY25HInLLFZCd8xQdq9KA6ushQumDYeiqDHqJ3OhIe9vDDxPENxATvTTP1Fk5qtiDQlgVR89gpY8BLy9VXC6TeX5Q3sBg1ZVTCQUN/HPC1qtFjz0OgZ5VJiIyESzNtq+Gya/NgBvioYrG8c/BOscN8d6JjPEgV8eLTDZQsoqL5Kqhq7Kciucr455GckkukDqK242/s/aijjXHLhlaNCIHN2HZXn50gnEWtGjgiQdjHUqYHBIGUfocELJ940w2/fihoL55RbYr/7ANxxKk8HUvMXvsiJCHZvr9NaZxz8mjxePIlSPsUFC8zEmuP1jjR7OKTL/ecLv3Mh1mDGR2bjroV/LIj6UmV9KK6b7cS/zFJLg0ID0y+gyKCvuytzlwreY/8L/eHF3tH2fAWZBdHwWinh3hS00KtWA6vpEQxtdxHvbGLgNZA19Kc2fvCH8fJfcjtcjNKgwy3fpyicpMm2Phk2zpJ0gccTmS/LRBoaYi7oDt5WyZcJ3o7404x27Hfcq2XK8kL92xO2Vx/AY5OU6/ovXwVo+6Kp7uJCZwsDOVYYj7ilPXOUst242pVFBIVWKZxXWM7Dzrno87RCV65/ugQVNdl9MwPjnunMOwCizSCqJAcKBqiyrDjGhI3IBjqY3pFJvIkylHqyu1Y7XAAuW9LMxMaKowdNZtP738xgszcNGkVFra0vM6wWWwydUo8mJGHPf+luAsVvyNx7WEFpgODW8vEy2FZIybt+yHqzOsr++v8a0l0T1XsuQdByoUA4FSc+BCF3LBv9QJp1sCjCcIPP+aa5CTnRvriAe+PGNyiChfMSPUsqoN4oimySmLPBOt0p72WVBNhcQEfCbXT8iVEkpBB6lyYaql3N1donz0YuVfjV3QoZDaRywhp+yyuEJF7eqCZYqiszJRxUYfMP2hzhdN89pUcfGIXKa75gqaddAYU5ow5oczQ/b+0CtBddacjc1aRuXCgx9bGMfxoFpYh3CyA9NTrzjiGXT8sz3mgeu7mrK4ATCIcu2CFyKW8dK47dCyTuRXWmMd8CbUMAwYCD++iyLEaEJNqgc0ZAP7KICrsCg5sGoDeeEf2zGWoQUr2VeSDvOCkC2tZez0Le9zKQejHxATlYxlLOIq6m6Dkw6j/9SLtjXvks88Dcb7xzVrjuD99k5oJMLtB23rcV4XBAsNUVrtcfEZ5qSc4D+xbTz29Wz4UF6QycGVgvSJFk0PujwzyxQwFYserkYNP6ExLC0LRJ15S7HT3iWZSlTNFAexvBIGDdQ6+zVrj1HM2omWvcDoLxlhySTFK9FMXXPz3o3KcdXH50ZCpQku+VryEEUIgpcnQ8yCv/+K2BM/Bq3LEunRAJx9+HEmzLg+tOQ3ELC6Xtj68FRboYTyJXwPEBYYRRekCKqkN7/Br2MtiHLznLVRbhtIeJZirVIkgEZ0dvGbDEqsz+X+CdSCzIH3neY4SGYqE3YjQmh+4e6SASi4SnvKueHDirzdEA/myXDlvxV8PkB84xZYbf7zWEmYx5uc9P0qTh1YsQPbHaHyMbVmyCoOo+m+fYCADnmJ1wIfjuQjr6bkNGQKvZ21wBZt2eOpuLzfmpQcKHZ9+RPIiSOBMJR6AQQdsKL48HKFbmKeNtY9pb98/ZrUnynF7G1pGxVLlNELsEQU9hnmfspE+ynZO65jDbVSJMf4gBOq3D8IMQkxrC2NLghMJ31kzRfcLpbKrcOlmHnWUnd0Yr/NXQcezsYBGKVXuTDmQqr1IDTU2mUwur2aalcmfVSX2oJUCM8ApEsG3kGGzaRWwHLrPvgOhyxWUBxdt2en5Wmt7uWm1M06CD/U+UDZOofbb5YpOX9LtaXLEdtOpwCv6NZvOu0mtSn1g+JWO0e4yvCUPCHM6kIj+ArtguTdeqxPBZmebWbzeuHNdC5ZNXG9wTefLESt94tJdYeMavaCT7qfB2nxYfpjz2jtigR7XmlQmQfRULMzLXILG8QUp5apcliLJ2A6pMiPofgAY0XnxbMqC1A9/4hoqN3ZwocUCiBwbvz5tZ77YC4GNzQz5kn55hhs2t8esHgg8c5IHqDMB7+Mupp9GUeYSUneTfM8eAI9t1HCMnsTCCnPo7Fez8uRAtYEJF6tox8/b/BtGiLP1U9SjV3lrTHEEHKY1YLVhXLogToTlY+YiyQ3DeoX7dYDo/AbtYee/6tCt2bBuNWwvwtA1AX+zUjc5MfO/wtgybJ0zA6kqGAT4NplihjjoojyFgG7duAcenJPfOk1+F4T5EgB4JVxzcV+wJ4FRMOD7XM2D4DyreJhMz8ie6z8uB9lfCvXnD9cRwEgpciZzCnGQGZiZsY/sW4HERPQDWzO6Eb94+0TyuvaDLWonPBAx4RJqn6kwBSX8xigMkiLFk9ri59vYgWxMm12aTDEGOBBhTn25qxs8WjaCIOsUFR2CQz1L8oKQgiSIRoxi0gAjFAgl9Q/IPzTBWGFX4zM9Me3axsrg8OW7y2MgPJ/adkieFQ4fX0+W5CQwuwfDOVSRg2RyDm0Woua0OwczyjE0b2c2tBjQGYiRCjHOA73xaYsz20aIeWEEEcmlM+ifixP14VYrqP8XUWAUzwaEgmz/96rQhF2pLSQMRFuPCIBmelAllU6FWS6STMJLXf/A3S203do9VwraRNPK5oaWJvr2T7WD0wA9FXUEk84VITyRbHR0ap3cHeu31HA8HZgnduvLq7yfmRuYfa97wV19kApX6+QFt3TbhAA0ro6h0caFMFsdNyqihYVrmf61m3rtJEyaL6oMtmEycocxDtPZ1VP7oSZeHujk+takMNdovi+mPDIhNy+elbiuiNy5mUkgbXqyVLw/V2pJldgW8c/i01nh2R3pOG6DxOP2kDJj2shvTg3VB6lqSilSwZyvW8GdjvB7K4KVrGm5fF++DNOKuCjePROz2RVtmlrruHrybGQvKGrkr8bvsc7CWrRe2apS7Ec47CFhnfDS5uUooWADSEYuhXNDT12zh/NEOalXOEZHLKjpATABWp+ZGBTBZDA904zP1uDilNxXXPH0pL+0B4F2EF41U7bebnc+ORbE9iOT8Z0WVtFa0Rcm6Ro0+kmHxFRKH6DM8Jn/IFhLShF/NdrtTyXslfLJ7zuu+9Y3nk/vu/T6LqiCv0ITjGxAtfYymYEKaqAre/BT5QJ0b513QgA2TU/7u+4bSV5tzsyOkG/vaQSMLgU3oe0MNsJLqCADRT8081oxDoZ43EcZRFYyhrRpCJKOMdie6lRDyZ3XyFIuE3L8UWmKdyPbDcP6jMpYrbzg2GArMZ6ZDcd9OZ7nvuFXf2/CcgUO5vYNIW1VXFFqECk82ytiwB4xlnkv3iKjKZCaqwNfSRFsrRz1tsJuG1++SUSL8vIDth6PDXj1OxTfNeqEcWj1mKm5akrhQCd2YKXIfiNLz9GRJa2nIBqOHeX36/9NNkRv1xvudqAlqbarC7yebMFVA0ZoLBM8Ipy4qT1EfHeLbrdb4I2jKXoH8kbtGxjbOCLlMJD1lEbrsjkpUgEaJxT9PdhMtLVx2YXR6SyBt8V5nWEu+Pk8UiyuCRKz7/NzWUeP0BdarS4H+UerpIuKLPo5hrOWNj33ZXWpEf0u/TCip9q9S5j8tteu6/7YGOFeeI4ylnR551gkAXxshUoEgF2O32AcyIqW49RVBi33LLRcDgXvGDT83tAfBBOoLmqEo0/kLO+K36A4FqlGj+/ftPfacpXIgpsk5sdBqG7HmFRAmc0U9z/Qax1A4SBz7+g271LZDLS2a+B58lhG17Sk8RSyK5+lTNzf/YwBCmFStbTn9ovOZ/qECcSwgX7YeKeR6YF7gbaxhg5MqDO6FSsUJ9mDE4TBPnrhrVz0VNS74CSNdl2DicGP+WU/tIUcziVvqUa92OJTJPv1fJ2xYiLIfDGXgm8joMiD3L4eErSs7odZIroFkHxkY/XG31aPUpK+am4O2jTA2bbrzidxNS24Dih/lbongD4P6GlDtDR2Ma1X6Lx0euvGoa/ajyEUnJyBwx875exiCMmoZoZ7i9G5BAzAV0gbmtFt1l/3c/yzbOGhtXW2deswq4Br02RIW4ZiJwFSnwudiNlcITxiFuXNj4kz29oh82gtzkVpOSRDjKcQDTOYxgiqe6lzyF14zKswsvrv6Hys6L7L5HRtJAc5EPDd28dtx6A5+3X0eA0Y8O2buGgFdMz9FUO89ysJSSDEoYfRYBESND5kTmO0w94RNRPw8lsd/JptoNbHxj04Oc/xK7OStAVInLOZBzejp8Vw65pSZqzvjnDb0cNnyo7JNLC/cWd0U+VsbR5JmQajboU7oHhjGtUkVYBnd8s1cHuGiqSWc63nQ/jgnLA/myiJA7WkTyH6UHzYIFfz8g6Op5XL1+SlhGyqRr4Yej+iTzV1GtL0+bBOvIYt3lv1LpeA0OGqsWUKr160hJNLy5Mw8eJfD8Ea3tfAsFfdOznjBAfmlsjjBYY5G1NiodD1iphfVm0C8dXaQJxARcsqfyDN1B2ADUvT6YvFIAca7kohuv/+WoIqze/dvuMiFfYwDGCyou6Wp3nsBRTmG8D+iLkpSw1BUIzUlE5fr3GXLi4d3/CHpE9nmAbweCR0fG79+xewcXu32jKOdkuVxV5Y8AIKCOw1fczbh2ht6dbrGbxo/93YCcG80zb5vCdxD80y/WY9jvZU0E3ZYyYE9l9WoT/UCWWTW8MDmDkx83vV/MndxbXy6BLFUyELO8oBLy4v12D8fqBD8Y1Q4hez6ymZYx+amaleCBDylUpPYu1DPGLswC8hr4biH/6J6NNeMWc3G4K/6sErOKX6P9jCKV1+EuL5TPLi4OcWB5vXIG/EmUKmyaDwv0ScTDmC7hHYwAeyy9dz8VH+Cf2xBles7JqBw2odR7adZ3hJ89m1g5pGvrHb10XUvC3wT+1C/lKDlD/hJiiEwcpkVKFa4loONBXZUxaHF7CLeIYRtCWhgtxSEa+1PEgpYcj+TDX+wms9e6M0OlL4/5C8Qp8VPqt16lM4EkuOF9Qu1D81ZKuPPavySjrHi7l5mRpZdw7Q4h/2n56DVyOyRrLiWXEdAeZhDA5FnnNu7aTlS7Qe3DIgY1go79hp85OaFJ3CocBx+bzeHGB4iGGQzhQq7mmvhgsxa2gpudtdl4ov7U9T4X6shrP87vz1Sq9R8p8nr7REbF9mXiyAeOOXgYAUboBLbodjvwLYQk773EoaZRIpb3X3NvsS1kH/Q5mkiWOqFKU9V1k6jKO+uU/yRyGAUMAX+Eefw2s7YyPEi4YF4EnBgdiOUV/pBCWV4UKX/ITHJpK+AF9sS7uZrBhSHuEkcbIKu5qNUav9f+JWdemSwmHFbgdLeGEjnnUAREZg6ghsd/726AHK7qe0XOmPtD+Sq3DuE2LV4x/gc49+T6nN4skwn/uXuuPMuFLes5VnLipBPV5p7v+EoA1zFMu5aTFronREaC8o68DOIoTlH70XyLuxOm0hEupEFc7y9RAZh3wfkJYfy8XwsiJSi3NZw/Rst9EyOkJp9kf8t9gPNBTaYczTPpimu3bDzYpYUIyypk3vX0qhQdvrZpL6GErOBPTx+PRf/A1ItbKyiOuVBloN229x6O8Ccm45/EYf/vs861nHMzHo+wP/JeWRoA7mIKFjErYhwWdU5BrXs3XQWamHuwmuAe5pEozURmRARg+HjB4DTcu34mtOhk7H7C8UQiJJ1dUX88fH775XETH5TeRADqAJy4jflIJfbmTVzUZfd3WEW17sRswGHcYiMKOvSBuJjhUpEvEH+krtjUm5xS9r+nTT4ruMHMgAfivUg92tTBXq+vCk8KNcUpinYjF+njo5qoWJ089J/9Hpuir4plfowFVxXxWKKd6SQn7byx+CdClIKdZEMVLm6PFyWgLrPi2wYHMXIOY//lwY1YRyB1yYnQtotzy6qVTaQvl8hhrIADTNN7Ol4UcdlvOyIQvuxFspU53ncKpeawj70LJU4QTXFR/OTKyZue8Vdmlm9KnuZrlsfNr5d6TmFltX/qKms7U9jYnAPx9tBAp8fdtaDh87GplGtUbHfP/x2AAVZ2pvz6lY7ZE8ns2nmAUE1iG93n3xMzKLVt2Va2Dc6+4KdUbEXgsUbbHIlHc/7TpE9KX1Q/s3TzgL2+uBLBTa7VQSW6MKoSwfd9sUxYyUx2wGlvhuaJpzoNXuZGCuN9sHkmCWvUcSO6/weQ5/s/xr8c5ve5lqZm1+BGk77RtQTq6jr/TD5u2xNRbxCCeHjTOWwV+Kue7G7qtXiG8evmosaQEZZc754HALBASm11I+w1T610xesn5QqZXao4GRcSSatOaWLe/5DgIapjhIWUfLHRVRc5RbF4sCxorkeFp+8DZ2wlk5Wzx9pintK5zWmJo6prfzYXhPho6iDEIwvQMJzFWTttCmqOFiq22bnApuSuEUBsg6Fn58MPOCAq4HiMjWuwcOLQLJpHJJLNKL8KSpI/IF8HsJGXnVdJFvGokaZsB8vuS8XW/A/E0unWAenaOzor6K6JLoPwATwhSSuu3qUy8LRG62Nc6yxJ0OBJd2nMQUjclZxBpmqx0GvGNRCiuY16jXZ1bxXh5leEjiWBdAmBgfoGolXkeicwIDQBQ2P8ktbHywPqpklCUgqE3/hOCjl+KDd8A4YXYh5XJDVl2V2CzP4eWWddKtLdBO1QV4ACXadBuCSkUCUTdGg/qKsMds1iZ+cH8Ps/FqZIxXPbIUHOWzQRYJ3gi+f9v1p6DQjSDJZMzHl83xzcoJLXoxGhnaFrtC39Uc2/lBZzHnmmLt4TeispHm2lxEemhfImdPTIJIjJnWg1eBdGkW4clQlC5eGj/tobKsKGzzbI18G3lttYhbcIOjvd9jkkIJAIVnvwiP5EclJyG+jq5+8wRV0MiGQyfkQoNgFxk9ppVKlcMbbmwmqviT2zi2p22LD205Fcjfg4tagVuWpDbYDms46gbY+fiannLvDzPydu1oZ5CJ9Zi86V8OXMZGoelGYQ8kwaOGKHT5+WXrJzxeRUcNzA6wdeYSP93LiKLoe8xEiwZT5dq0VPxAzuiKb3YXZTtovPEgEdZXXGJAFL8ShBT84VzGD/O5KNNHXT4eZV+uOIbmmF7mQXk3bUCnhEzLohcqLpfok/6rj+A5czgW6hZwFHJkuFEkYl38iloddgxsTfgcvt6GqZfC/5l7huqXzHhxHzR/ZSwdA1nkELA2Llz3ZH2kss7KhfUBgDV4z5LBX0yW5RdFoFQqAGNGer0GLHjYmiva9GWXtX2OoCdo5Itq//0G+Uqr+xJAf4lhd9hC6Wi5BiR054r1lerRtwX8rCAKVm9wDgAbvTXA5YF42I3NoIrQKFYR0KpnC5be6G9UEPHBLC2LQ/XlzlE573BVPwpVY29oJPrpBodUh/wnBdEj9uNBF7lWYOOT2ydr+kxkN5jOvOesBaDHIL4kR86nsEOmFXNwE0j+pnvXLS/TAXPNhNi1nqAZtO2Ki1nwnFrvWWMwxy9rJ6dZFBFFuNWRRRcdjKexgevFYmGgZ8PmRVyWDLxtZSu/26x3jGVyxJsaTVt/NY7zgl0ZoYybxEDemiRZqESxFAdUw468sJW8ZXawgdnNR+mk7toHIdbAtLu/ER84SuANZlLMU5ABB1BqsvarfCv2BO4thkBDY+/5lONGnNSbS/AUa/HU/OIyhRt2AE3IsROA4EaVLe/1/YVMUsR1H2t3YF0GaZiFBOSqt/YX6tORu/CmCzs8bTO1/JfeEpHWZZ6tI0Jb2yrnaMieU+nMjI8v99YHjX8FVHolKRVozYQxcyCSx4y/QvbvmzpXbo4ROUgyextIPj28+2coRxGyxzTLzQxYi8TPcHQRIMzQRdBQfQ4QSslssUGxOzRT8BDKGFbcEFsl5RcBvvoms657DZbiho6tce/UwzNNIt290sPNib0jCVZtawpDjWfl5e3QGzKxOAbbHRK49UMY+5tpmpnGl1cC3JG1sRsRiDy4z98+tbjf3mVViuFBygdAUyCnD+Rd882YqxaPwJU7Ob7CiD9Z2YJOZVNLl4uIFz4Ry2pMGYoqhwFMIHG8ZET4dNYNB866CWuW+58uW7rUErThZ8D7EG0JOUtQhKp+nUgoZHKjJluk84FAHm1tIiWlQB7wDaGEfLxd9I4mtLO/lB+xxSG3G4f6XH3I1SPLY79mXviHmNRbi6nqdGLQhJHjRfwgSUc+c5rkfHnuah0K33ebwnwhTrAP9frVt7YWRMtUc3hxJwg7yAvFnKQot1058L6dcHwkCQ9QPJePRmwu1tS+3bM56rdX//LF6yUf5Id+BlSCmkzGxVT0XwEB1kh905QFrZPlfpP6t5niM3OkwP+nVG0GACqb01uolXYxM9wuty/Seb0h1JKh0bS7R32X70qDY1dTO4bBqHxslA4IYUdmfKnqdh2lfYl+VLrtxdXPfFUwjo1CK0o1pJk91jkW9fQZIkF5754P+O2CrNvgs/ym/54kCel+4lIedAOyGF6LAgMvGLbHt1YogAdr1Z2HgFRdLGMgOf9ZkxkrC6Za/a67kV+7jBgldaBg5v8ZD0ETEUATlKhbSokf30R8mHU0UVcwZ6EWpdrLsfDY5TbP8VEJNTPrDJyh7Kfmv47exKLi1VvFuHnGs/YsudS34JkS+cuPJ/vrsa/UJaA9VGMm3og5hxVKTvqqMcGqQbBHC0pGYjGMPEP0Bd1OTe74J1RPIN98Rf8XZSSgwJp8MLOdAlSlsAVfOzfvNdk6xA9h4BXGyyKinztRobrM1P+OyHi2yfwzDLyFpZGpTcHW5MkGIl3dIm0Bkc06gmmd+LOQ9u3G3dF1GfMWoIjrTTdwl8ixoBOjDnnTTH8RE21agwEESY/L70zN0K3uyfIYYHURm4BXLEnSxyieR8FPt5cEScUiCxdmROabwwJMjDh+vFD90m7Sysc/6uTyHYXYj7GdzKlLf2MhLFdGcWmsd1OWjHckB1rTnQMsNc/UMP6+0kuwTVGlim8qciemgeVEWwF4+D9Hfb3sXdpdPCSoSvqxOSUPg9bYjikECw6RHLL5aM0IOARRVtsSDitKSTtkVK/pSV+3MdS2azhdZSiuq++C9vAaxyJRmF7Dl82gwPdrA27aPRwsY79aLJg8SJNgXNILwd56/Hky+4EYxwJAHtF4wiwqFu48O02CIku+e7ZJAHju7TdtU8xiBBcv+3TG3pxiFNAiJse4Cc6BzAd+sUVI2xG7SD7/FIZ/91YW8DETi++oJNnXMb2+Z5M1nsOZ9FZA44cU+oMgp6Pzk3W6YMyqq1JLaG451Txe9mmMZPjtvYecql3AOsm+eJ/ADg40nlvxGqfnfqNjtp7thxBsG1cdGdED8kuj+tOh1Svjf2V6vh8lBYI12X52dV72UU8NoUHyhr3I6McMuxzFbpgLoq2M6Xuf2M37ooN8kAwjMm1LxMwpEBqAHKg1ipMbKsle+UF5Tzm7YquLMPpG901b/02z4gi6fBL4XXkaMQjnFkRlVrMrkqXPcQogXfWQjofN7g3e+h2E1O0AVhzgwt5Rz5fJfdX/MwAPzXNi5K71dbF2AOVLTrG4X/at5nY31IqtkqcddSaO82v0KDCub9Esr+1wOigq9TLER4ENpULFiWkH0YMj2eghLHrHWyEbRas2A7FyTD50DwHW4u4bIl/Iq+MjcHJ4pphgs7Vbyl1ueNYHRP/SFyxWN8uiOi6DwsQknuKeeaC4Haqq2Q/zQ+z2lQuBVMbXjBmNkiZ40AMgrqvVcEfpsEdY37tU1JnENhDzArhBWSX7f1ZMuW9juuVcS+y/TkjbRqwFKOM2OGCg2e53hnaIxb1LEDXJozlwTfYqNok6vIzIrBvCfc3wv5oovXWFeXhN61Qk3278xeTxurBbmckrbC+cnlBpJ7hc1c5V9Oxyr6a08Vs1hibK5lSbKBrvldAGr5VIzvi2R25gGQoZxFekAnLUHL+2ImanGpap/8m0bE7T/TIkf+ILwCkeo1oaYppWM9WoReVMcJzwFeGQq/buyHX7Som1JLjp7G6IV5jqlfZ2hES/VEzZWrC9HySABKeZ/yizdb4zPPH100kQ5F1jzUwFoQU1qwNlOEJdcN/5Rcyjmk/C4pKXYxttZVfNbqjRHhFOVZxbp1MKln8PgVTNGhn5eYMmdqnHXXS1/VJRDuYleRBBz/YxolwsKLwPz09bOWUvdpsHQh+pXIkQ67MhKr1llx5LzxAFwULJPrN9xWJTMx9ZBBEkCv9e3dkQStN0aRAYw+GQpXW1Xbu6W2q/ggxmtXf9Ku8Sdhz4JohFVfGXrTVKlO/vI7U7UR0X3IPsrQBUaotfJFA5tYvEJEM6kYd9YCZWV39cJoGe+MU2ajbg6gaQJJsLbNim/Vtm/R7ezDV30dcWe90eM50NAJwqcR/9L8EyLvHxlkm2YvtO0jqpTm8Uow5KmBhMxbn9pisLeyRUZfXysiySKOuMECRPO4SzeSeDR3EjCXxWCy0LewAhvb6285QHpSXqeh2XROoQKNnR7uaYMaEjjvLD61UhG5KV0dLABfiqO6anC+YWPX7p/mxc6lu7RSjkj7H8Ch1m7IiAsdLeKPi0NRXu6uv40m9qsodUM1Qa+7VSbUPSDCb7a+WPUGwLbWHxYFImthpcYvUejTnrsTdyjuF2zhOY88tCDKPGXjascT29/DO8MhajI90AJEj6qVGuDAbHpwzxyowrW6QbbQBCwyU8IFIK5Ds6xuCUt7gDF6gsvXZgG2pVUahn3XDgp8FMQYM+Cw31oo15o19gk4SXhWOihfABADN96edqQNKOe9BEpzV135kuY879rm1YfUGrlduHqw5thNWBOA4IfvLWun7adHpFpvKTdWl4ZA0OZVLcyTylmaC28J9ao90xC2qLp86xcK/p4Mb3WLprXEgkFLeD9Pt2v19rn3qG8NYGWm/jpkaDSyTnGqFoIu0u0SZ70Lahy2V8UengdYHH2co4wLr/Kq9+6fZhNr+YG6SwV+EzOrpqGZwHofjNNILcuDcJl0QcCG/kpBx3Ql7IP++aZSy6NzlklX6XDZBDtnp5ZJYA1TyM4g1Cy5ZjAQR3bWG6nEG7SsRApIsmoAk3evSYo/5LsIGs7HYqvEbk7VgSqrauxQEjifwS4QN4k11dymUgcH7O19c7pOfFJ/PivD0f+zs0wFwN2hKn5WHi6vVNMybqxJp4vLgsEG5Jtz+pZvm7pEzBYlyZRwPLJkqE6f4NQR/rJ0YeoRnwweBaWaK94sM44zzKpVUbo6D/olJYO69M/8SXD0DM7i4eXG5DGrI2E8Gs1IsteLrakgYXG/meH/YSfDyjO9zt/aEzYvi3VUW+r68988EUJiHw6J0hfJO7lXHRBHBHCjN3RCHjQq5PW0r+2np34edRvGmrWhnnTLHE4DxC0dR9IXhj+aEBiz6l/Ngig9nwPkAUZq4G+Q1uRr6Qh0xCFB5GgObwGfLuYIkDj/xC8iKLHxgB0PXv6SkkhofQ8N0zcIsdsDo2TrgnIDU0MnmMY0FG0WFGtvr0Zz7dibar2gWXODSUPwIYRTmZTIpydMn40ImVJLguyuo5P4/y/N7kgLcLmNW431MKx1kU7bBhqHxoDX17SSLjok9ucKc+XTu3h1jetoVpOmvrBkQsdzx6vbbP2Awj5ZM8Zals/wd9HE1QYZ0wTewnDwH5U/l7d40ZSUTlEzm2n/zg1NDCQo2WjR1ZJCat2HI3PYuKXnea0/OBM9pmNzbUr5DGO7nmb6F8pzxznO3Gobq4vWURhvXUoxlLAw3y0z10aQ5/tBISci4JT4jC9cjenUeQmObgY27VoxCWJWfMLEWUIL7MZY9djhnxgS1ATlw9FX/gfU6eO80EhyjMvBfX147mBqY62qgiohAKjddL3aJOXlln92Fhd6dBKGlYTTtABcn/JPCs1OcJfJEieGs3aSCbcKTQm3eTbCEso/s+Nwomr9fNv0S4CzRYU8q9two9FdV3q/fFoS7SvBWOF42x1dO8vt9B0hZ6a4h51KpyEMXpSk7AjjOK7Kz3PlsUta0vaxVAr27q20vKsCvPG5AkC64MuJo5TWBKTtlBQoUoS9GI8Ruvzon0h5JVwP2/xuZbJFBKYprQ60Z0HRhweaD3dj4Um1l2FDWM0Mrc2pqmdrIIZrcYlGyIgmuEP27M83jSxxGPYpqSjSEFHE8Owhwie94pM9pZv3VNIqQftaeA010///oG8wKQOJ6MLpvPD40IqlDfTxrCX5ZFOIaYyQlzBsMsqRC4bO0R1SWDFy4hTG4Iob4xkGuEOLJknp/Fg+PZ+uTmo8cX81L23K/3ts6w0ld/UijXsvY3ktLkF47agc31qIxgTaNWLhltRUgTG+lu2aES6O62T+KB2KcvtNyNv2h4qoKgwchVVAHVrGcDFpHtlmQ6qeVkHskuyi7+6XKlrcexSNtY2dV745y48zNQQqMjWNCQN4p009XpePcJ3JQG+vGIZ5GJ447NMb/wMZz6LQ0Sz7EavGeW/0PNn2cm1lB4FQdTX/eY1gzUtS+62s9sKnlcwfpYR9BEQQRXiH2wtTaE5vlUw5wFGSWq4TOZkcAQboUvdBXRzW7SVrdR6KjKZg8VLB0Z3rQsdTZTeHU3Wr7mBppjvm+DQliHOsLIKKDmVPEAjQWcutZpvq7FljrnhNLRO39jMExB+wUnfJ40p/7R/vf/z/G576i+vfaOvUz8+pumtQbExY7H58Q9TqcQPcnArD2fgjrxbiC4HUvJ+Gm090WToENiPNrBYy+Wg7FL1CcPAVWrExI0LYlTk7oZaEW3Xt9VvMrMxQzu9tc6bE9fKO8YqHScV9AGy5uYWKUlwdaucCBg4kiopNxygEXCu3VWFAIIgylMWoNSnujlKK79Pk4MrDGWOn1PV6qAYc07oNcowSOF71O2ffgw82ThlOLtSOrlOKGRzT9cSNNAmpcHqcbH3jA8L6o1d9anylVCgC//vCFNSq+vTLFNspn7ODnMgfDuhNV6TaqSe6Pmn5qQZCv4BEbxu3JQ/EcarjDMBhNVWL4sHFbq94wyE0u0YiveimOrhOHlIxaMD6dJPGKI7zh/UnTDXmkztVLb70Ry4lW/e9ncM2XOMDTIeZ8B5u0F92jEZj02TfzMrV38+9HU/evcSjFscnFDPSQXE7HzNFv/2Cn+hIn13qxajca/oA0vwNmQu2ZnoBfQr2NT5kOXqlzreHeGWAIFQo9djwDxmpzyji0mQt8Yq87hjLv8HlaAxxYfw22iC4v8gHuxjq7aLQiNNuplFiY66vQPiWEE8ARq644LbKp/VhEt14ybQD56PF/G9SrxYKnGZKdZxalMyykpTiDard14IaM4zy1q7rAO6sMutBVFyHQN1Lnwz4SBNBuEfJ2PTnI9zNbXfpFBwHnCkgp/wH6nXanlQnHfRMP6EH6Y2BeGtmNjuK9PD8YP27ShjCvP/jBUgunWY6gFpWa6oKC2DM25VG4JUm7h2QMvKc6cOmE8H3UCVKIgEBhXuuOu1FGRQZNiLzg7Ou6nkZMC6UBr0osh5uZscqB4QOUskRSaq9xhh0nca/3LKtg83sqY4wYjzkmFiKprUrMVLziRDFmDNKZWasJCyJ7UF6jCo6Lny1wEPWnCzApaqYoXMF7Bjj1uJJ4G76oNw0pyiw0+tblh2MeOZ4pxeAqMYd7biiLY+6n1ndGRM9A/ULlaJRPCHNkTdy3VIQe1lbqqEoGB+SoTKqwivrez34oIIB9Evi27clmWYbmwAgXn1ibHwdw7bjygBLZWsBRPQnBL4LNGurQwAIWWZJZ8w2RAGD6rh4HcuQqAIYMzXwXpDtAtwyzHZJenPIHRzLS0ZC3ND+zHGfQ4lVGi8GqccE15RHhE6tm6H1rXXPk6JaKetK42loO04MPo/Xmd5km+5Ll6VqRhn4EnqU3lUuVVmM9Jik5q1zBBuDpY98n/EenWIl0ez5eFtScWhQMKLc+QAWGsdgSVxRiNaGC3kb43cqTK3BsJld3jKb7JAhfsQKLuRAFlHD5LtYJHmqY2ISzOuqQZfX6GyxWrgFqiYjRPUu8+rsOwga+z6HWXI4wxPO+OtFAxCxWrtdCkXzl1j8sEW4kSF/HmHERZykHPKQ36nnbw+GsBJrAYtZ317JFfDrvseqraY0ZDFAcikoeKhZCpOG4bRpszSToyZHatUdFgAnahX5xttLrNjWHrL6KOeKyNk6vLKK1JTuCEraETsJ2KXOcA56dJYm3+o+L65PJ/PhFfxbfGQ4wQqI9XAQQfnXr23nUg4tGa7IMZdkEi4Yhm7VqCMGnhzbtuwy7hLfHVMcBkhRjR7xRfGxJhyBHsEEYs5mIwRhCZaewTfT649yV7QQ49iBsgubTwbFUuwimC7RR2eFznK9HYvvRQP0aPyycZ4eUMIvBO+Ex64pNRJM0Lp52AJrPyieNIROC02g7RbCepq35VhELTS8Tk1JtiPvMZJXLRpAt0m/zsPyWoYtfKgUgP138Ac9o+BmdR42R0OqJ3FpP/w+QZJLHpcG1LZDci977cn5RXIVHt+aZ2SCGIIdhlqjlyqlPSZJB6D0YSVzWXOztD18xXZnIdO/T1f8MqHaUl3Ehr5R2mpZXmiogUiAhKvSVWvLMCcNZqEMLBlJyosDyQFeLklKSN+YyE3aaW9zlSS1KGVBJ8WY/JLtf9eeOfzqvVdytjwR8DUGySc4/Duxq0ih0/QX4Q+QF4nP6W4QlW9bt9oT8rvLN/Jh27o4swGcFV9GJPAoycERJEmMVbxsXc+qlXt6+qHNMBvCnXyEV5K3DhBMiI1tB2RYk550Cj2PhmQUIuoiJ0t8Y3d0Ss73dcgUbMFc5NP1H7O3A19F0RosRakpfG9Eba4L4Rt9VoqEzle+k4YnU9Tg3VjiDT9AAJS7OjoSPgGyPwGGfDR7Mp7AkgSleuxHhJV04jPH+kxQ0Faq8/3IAX3nlQcu3T1XXmipK1GRDiL5iF0uBXRKzjS15hgQJhuUf3imdpPXbGACJ8FbSVh1M8awFBzD3B6jxEyEWL2G9dkHN4NihOxjwnNk6710K+Z+CmIRhKpARDWSyKF4lqr1ah69Okh7iSpukFIvExx8NPRdnedYHbzcgIx6Ut+wDWL92QvhrcbNH71lHodRHtzz3jfYzLv4He6S5eorZ2+N8S89YuUQR1D8GKLWBWdM/vioGreXfblB8O5v4reQdpdOXKn8cQzvKWSuoAMdpDq0Qs+LyBLtXYSE66rtL9xOoXT723UA0EkKobKsoEmPP4GKvd7EGHdnDsCQVugGh47Lp8R28kaaXWyGwakkInqBgxICuLRGhmytPs5YMsW2rpf9EC2QAuT+zSzSrU40jMpbTzbprw2belxswjFzfjSebxkNTRrZriPgQlEVMu4BTFOlEfpsU1c6GkjNQsqxIl0V5PeqhPm+lsfJd4kTQE+T6vGq/CQaJWQ+tXFRk8b/IoOfL04gTXBXvvdBCndUacPaUU/MSmuRwYF+INyX0p1o5mB9p5kcezxpsBHniEPlhSXEp4l4k1mkAuidOcBIWvifTMYMhIvu8aF2UxUtgX0oFi1BwtzFO1Upy0FpaNodI8shBRasr/D2RsfppfIZKs0OWr1hNpIcx7nwdPNYVxPAsrvBS4+lwGhn4MuHRkXvYqpfMmqG0d2UsqfjwN9hFKiRdUKfBhDU06AQfT4z9FWJ02LXjtmEUtUyg+ScP/huGqOmrnP+Ug26yL6Fzhp9Qakc6Qr0G/N1xoE9WslgDmtSyBTHnoZgVxO+P/OAjWW1ZKRfXjMGhqJRdxm7gu8uPjuX0/vC0YvQDOZgG1ekqsMjK6OkVOUYGp0kydhJcS1mkqrYTiDOIGtQlSJSoeSuW8V7h0Oraznr7bRF1qWc1ssugfZZv5M9PIrU0aFJTA75shTY+m8/N14eHMvyTkr/aWWJWtNDLQNnLpC5VL6IYWXddY5TfK+D7t2lsk9PQo9t7gf4V+7q0OqHbDWQo4qGUgz6ML6NCdIbNBKdLhmTi1wtQVrBgiuFEbEYo6kmbWLbUrrfW6AC2rlG7jFUsRBHAqvpg1FuX0CnCwL6+IieLGcM75GrdsEywV2YCZWo4K21Sshr/HjCp4TZ8tgxjyCF3bmYwHKiwad2RUJEYUOZ8b3jylaKiqiCTvus/6iraWWiMC4RcvURjvVsRr/4Z+wa8+fgHyFTZ4uNcFmUdXDKs46RiyvKr+ZgWfxwJNa/03irzCLqv2QxwtJacnNOK72dyAjNL1QxFp73cm/hTd/wHja5uirK7WMFnBVL7o2L/OicUYMtQv3ce2nFSE4jGOynrcH3slgTObL//bfigQc2nYQzCV/N9TRxE4Sd3XlO5qid17t+n8K4VNuvovQ9yzf3UMt03ygAFQTEXpD9z5LJDI5m0fQwtTQO7A9NfAhXU4SNmDcvrtXJvLzrtxwy8zVPK4u4hCN4XbNqBKZFAtLWwt2cOyFuIU/H0fZDZ/+1J4swqT8JushlScXs8/DRkvWX0oC6NsfRuXbd0oImNAOTJ+QqY+xVgKndAum8KN48Qzb/pPFyJzYTcafuA7qgdjkjyjBRXWJhQbzCMoB/0ftKUrv0QdbhEGavzAVsVpJVUs+kX5+wMIYaMsx/73l1xesxDauaDQd7grfmIPmEs1t1Y7MwzEADwRfZkuvcVwmQ6J2Kf6eKwWrj2aM6c3e18cI+RZYwv7jmFm3zK44CauUvgNJgTDO4B2xNgUThTwpAc8CMlfh8FwdwOgJzC9ljav/IJA4CymUK9VrJAOD2xdex1vIip9mKbBhSS/4SHEvdFsxh5ZiLlA4z3XgyOS755op3aQkQd7hWjV9eVdjEXxyQ8FjMliXFodY2W8hwRXWeagcI/OIk+fQ9X4XSul76RaJ0XNn0UksAfTqJ7UaQ75X09/dCQN/qoD4ZXtZ+rrAsj6XA8fPPUYb+r0yvWykZhutu7p+qvkyJXLcyIvjsSvhX9McbmqdJIoihtw01bmAhyoOLrHMxJ6Z3r3SbuT1+Zf4Mv51opM3dagxqDfiy3Uez+9W8KUiCFZ1qxE8DXmRX1tKD54NanqP6oZntJHO6dOUJXp37Z0uqKAxhZBOySgV/3rfX24eKtP5rhARzVlQsdb5uob0bDSRSgIblrfGqRiONDtz3vzW8+9Z2gYcnk6XsVpzCIVoqvRZGUoW0kOBpGclNXNHPDKKeTcdSKWTVM8VBxCEwItipHcQutLcAfo/yjs7H2NbFOjtEuCsgsGGSbPItZ9qw9AKzw7g30e7AUXKnShfr4DDIKRDjZ/oQFpFNM0SjsGf4XCvPGaQ0I5tmq/TEb+dS5H3aT7MRjGEHU3gn5Ps1YkDjwjXqsYOZSC8//+y+p93t+wJ8acJnYtRKDjvE7kzfyO60eevBWqf9b6ZSIT8cOVVVTtooDQmso74QhQRmrwq9WY1q0pEFik2JFHX2yd1qLf2POCJyY825h6hatv49rMPSyonrJ6z3R2uHlqdfWRLlTq4psfUse0aC3/PL2rs4HetVGUT3xe8x5a+y9v5NFnhwHufEikUPEGmroYx5CL5hekuGo+GfyjjKlOcQKM4iZ4Zv+0RbuZunxEsB/pU8LCJ6wHqK/SXhrgqcl1B9c059hk5izJElvV6cn8AfeDuSA3vRT/yxZ9EunREnOUBTuupbGkau1MK1N4KGUYx33fe8dWb/SRgqlwg23L4qMUaLMvBzcFqxTCai/JUrbJJkSStvg/1nLh2yfzfkuEurzR8uWDdL4fW3WNVUC23Urb6IKi2vbkQvCtm0XtD/CidIWTO7pytQNeuMaNX3ngTZGt6Cn/pLhO8six8+1GgqmhQHUin8rYlz82qabEzhwdK2hZB+TFFVMD4GO9llUeB53I9RTsi+TejOkS4NsWTHBf376tmdJNlBmRKMozzL2St0ZdKrBTThdIPw6g/vTer5Geql4vIfkSSJulhhUf2Z1mFLPgnSNdN2TF3bnmd39oIuZN3PjHCdoCtNNc35wsmLBuqmcbBIjDruz87sGJtN4vSyu1YrW+gmwIBtMHDDnzLi+7WaW760ZO6O2Rj1PCmwecMw1KAaRG8dddYFDkV/Z/C2BQSNE9Q1rkr4FrzcMws/JrE6wDCo5VtiAd407NXJp4A4vkUisIo6IO1b+JDtvN9f36u5EPo53jG2TpWSobOnokayWonX/C65YBlmpeQRMbWtAQTNRv/UPQEtUarZIChvErGlGjMYvmpZwd5HlPNQwZCAAXvHuI53S/w0nQvrMzQeV/V1VdHwX2lD5Eg+iGhPOBfK1Z9vuBmHwN1uXveSfjWlQb3yghqRNN87qdDuOSXyBQC3yy6UMlGcBjDsrmeRM11Zfn88Z8rG8+h5Wm/NAhJ9eqp2BMrAqdOFrQh0k0jG8uomLUljYDutdg997ZcGoG7EYOl1jR8MHw2evB9oLnSbzc2itGQzOwHCNsxPGH5PhxaYblxY/Hpr8dXcHXijbHdg6suwhu5UgKrEZ7j1qPEt6LR09cKrGjJsymDJbf2eC2q4b+sT0EgILVDmaC/YPL/xhxVPiksB3vwiNXg3McoA+0gldCkbLyVJiadllzoL1pnLbsy5ywcaPsS5PYVVIfvNkYv2Bgnoh7QYCnSwFA3EwuyQKfNaGQBNgQqAA8RL7neUSgZow0MnQJZFYYaLQhIfX5v9ESc15w7xiWizzrARiMqhNt0sHYp4pJdOUAoHNtPmRNPC2ldDnEDYSmUKPYdM0s5/0ozuwYFmQVCDPU5UKSUHQSpEcN2lk+4UXJAWwcHh4Qj5H0SnbWKK0Dq2omKiXCY6Ea4d6XSop8rIwfPhtwTNg1mJBeX1ZyGlKkdIDmTTqmB4mX1bCCK1zTCGfWn7L4flG0i1puqjRM8yC9qoktWqWekij6lDJ2eXGnBsunpQFGbFgK9eYSHQOar8XLTuO8UN2FQbRTed0U+Qk8RbTunLmi4LMhxdpz6BhzjhEiqeLSEPN+CiVi62EdYlnd+b1Gq2eyhKxeDPuk6sBTAIQfvnZZvRMKHm2GkE/NykeWDGW+URIQm9/ZH9/+8/cEtaa/+pCyZ0d52kUaWxnua6Tqxw0oXxZVAO8TrozvlvFvUBDqMoS8PzS517FWtJrTgfR9+re8UXORGB31GTr+DB4bwV9GbFRM8lWlmczKauileeAM5Tk4YWFc4VLIyP8X7gHv9pSyW4aIdixTy7SEtx96Yym+yQCin7yosJ/sK9Q/Aoh/RNgYu6jOp1FdVf3aoB/Y5t/6b5anDN6dkJE8weSX62EH2axd92PBglMEMD6KgWGbdh0pIF7GeZ2whmA7JMJtEFObaxChkTWX3+V1PfwdRdQaVieTodTspseYach4jiseS5yFrLy9kj7wjxgLiAQr6hQ7HyjyTnwTwG7xeNQifOOEV0RvYUiDye1cOJSBEVV9rAvofcOhY4PQ1PoL3A6ZzdgVnTP74jQEioGuZqktH6ce3J8cUtEMlBXFnb5TRXTs23gPb+GUL24hF9F72pIHddVILZXbUUUwDIFrxYL15ChYsc+wsGEQTXdaO0zsHhyif+N8Do7KopjKCsjJCCKWz3ujKZ5qROxVyFHx4PsSDG7Erk/6RkUxOUINF+ZduabeHnqQ5B1+LdZMayDYaoLEpJ5TgiDBD6BN8VKYpOPIX6M44jWEASEXEeUslQc5Dk9+LjEhQI9r75QDGahKw+eAorMz2LmQx4y+IGWe++o06YsFjc9zJS3yT9QtiP0hk4Ye8R0t0QToD1frfgstC5R3mSiHzYG55UPCWiUj8GTMERBiRg4Opr7LKV+eHM887uiUOndyvfB/Bnz1ar2TIw8a56OS97jCcNmPgKXaf+tgDLsdp/jPzfjEaphuICNJV+KRQYsaetAjbynRy88RAF5jMg0BJix4YB0+qUzyoxXS3DkrElQqnneau9M05bgsaucVx1RLLa490C3XAD/BDsMmfE3Tu3tdKYWpp7lPfIO2YKUgkvSA7ZRipwpx++N98RIow+Dyd1PBTy00zO82kPDywYYTaBOcqhNpM3ABaOrLiK9q5R3LaMe6aIcpVxMxfmPGBGDYxmV8V9HAQcQFvYsWKSEL8xWL7uOjy4tGPx3ztZ+yvSryOsgNhsSnLkkd05blufwVeJbF3E9ccb2f4UlY0p7hiOv1naegwfYNkZLZJWBCXbXnB0M7ZbkxgGBoRqvQH6wSW3sw2KO3xN2EM0lbIztaNp/iYOsA3BTxCzPfW80WurVdBDCrOi/RHlLsJo8CvCELaxRsXRmsnJxOI/+Y/kRspWLeLtqjkE3nAVF9VcwTrFCJhd77ClvSprMqnRedwBRALss/6JozwdD4cn/hotIvTLgjXpZ2n37Vx1HfrBOoE6+2PIW3tGfEWVp/B1lscDfvOZLDWgKWYBiVTTHIrGhQqgXu/5J/j2Xjf817RJenWLfGhkSe3nyV8Y38cWE1JFIDbuQDmbOs/aVcki0HTyfuF57HjYEOOvDnATz2xO0G2JHtWYVRItNfWP6dRnDBmQ13/mR6CyHAKLUFEVjR+qAaBY42kf3/jVo4j9AF68V9gIOtBw4ki67TPIiv97Yh+2MuWLe9cwd5fFj/2vQE0EwXGej52JkhoJOaYxC+/3az0+sC3spGPMxzuJjYyRTA4nInXcK7/sveN+1+MbYW4pezxPkAZ61rajJciJxdiLdrL4ojGc9BSSd6gCL0Yb9yWnNpb6V5M1Km44IwIy7VtRSUB50gafzsxc6kdtUi/AEwFVdQipX/x7b4A/7CETh5/q34kP6L3sKayFkZmuDhLC7bMMV3xRp66ii0nvSy+Ua8Y4VVyAWQLP1d1Tgu1wT3uZWyFTDQzilI67Ncmtpw2wlrcaSU2tKvVGMW+fPmupujAHpO1Ns+T3p/NtwsPsGc0etEd8kPhC3GD6lPUGtJwfCvJuiR26aaw4q1Zf7euB0N7e4k2/xOjPfx3Gxasq8I7WxS+ROPPHU+KJoo+OFrb3Nocq/Mfl/B8RnvwRpgig/s04Jje1dQx+JZcLsqXpeQ7qSXinMgUaNHepZkIQnKA7s492SLnlgoLBp32tJXWItmCqniZji6b3THMKs3TnZjhtlV4ibXYdtIgTS8i0501EReH7jM1SBvO47yJTHNVNkvSfgIF4aHoEJwmLuCtHdqrXw+uplTghbm++yALs2wBVS6vmeFQSIovnx5BFEb9iIfLhcA/tIxU6vjyKLANURLwwcUSrI+LIJIq2Y9/PcwN+6S6S6tckyrJRI16CRgrF4QC93UWPSzMNuWtCPvFyJqPgzHifCEDKgFgbQRYvny7U59yFgR4fBrjpZpo9pzLNXHaIGcTZNaL07Qjwuj2IpcYevf/WXv6wRyYD1StLTS9xI9Q7GMxar4To42TuZl39JEPbueN6y7kgTtZuy0bRUgc+PQhZjYrLOhOMbuHpvyShPglIOH5Lfgg9LQPzMDaUZD1VVYElR+zkIwlVgsqMqUn4fpTEi/qXI1UVM0oS/7gUcZm4RsHFQo7Pz1TbQq/UJChZb7Uqni+uvyR9MHyQdbmBGKNL/5OwBEV4Ebqm4e/uBok65z2+nV0SqztnDXruWAlCAsKm5x/F0WNdySbO5kz5M+tXsNyxSVH55UQ7n9UI1J2p6kmMzVIUrgWIb2FgjHmDm3KAlu2eOblrJirCTR/z40LvDTPNMljjvm8drahsG2BJIpTfUEynBXdKXFLhsRI0lFAQBsfzDiDztA73nQZ0YPZOiaytwvJX6Hl9uIrpQcSSQ/gcfF+1cICezVGeLRbyql2LrWOIbzgokX7QspFp8ZVFVAO73wDMGYlp+2idPm3J9R5kHfU1jU4vK+CkY9ipNk4H9wlsR0+2cnn2mBB+Vbv6E+3nSJYs08TspcemJTUi3z+WTZQKf39l8ZxC2ytAE9v9WoN91uP4nvJjzk0dYEKgrBXIPr1+K0eeVU0bMSHyXZExCMACvWQ5IHM71FsuHbU2aIkEYZDTFgHkeW86Vn0dikMmddHIh/C8nW1sSnWpe4G8mxZb0cnhaAPUOKtro5TBEe8XE4WiUZKGjeE2kuMxcybADkwBKq6B8RZcBsqP43rzEzYfPRCFACN9CE9O4/GgPdxUdCMVCGr6vihNxQ+r6pOQi+PTDJ14i+UMgqjOoibGSXT47DDC1XOZQpe3LBa9Squa155fjYNEE0JSaZgYgGVszvYHxvuXKDeXnXFJ02NkpwdqPlF64c83tjlWFv82Bv/fkvpAQq1MPoDw/z9nlFTd78agkfnAQSR67hdu78DlSMhk59Kvc4hSZq1ThVMFvoAbOgeYHbGTVO+SScXoImzHhOHHAlTDQM5s9C/GoV00mFb6Mqf5bFSSYhkTVWTRAzP8OX6LQNm0zelYZe0VDftvjEU/QnP8b93J/MJoCPSTQzuvz0lce+7EnJ/K6Ls1nOHtl2GxaOF3WePtbC6gJWif/zjMlq6dQZTBBJC7y7Hh84Pu3SWPY9NPg6DVytwKIQJdhbF7Jsa4fr6+JG0HtAJUU8BqKIXQJhjuAG+qDLfnV0LJbr7WJXvMFhMKxc7LWIK/00lcfKahcMtVPOzc/y4jILXyyc1Yg7Unn/P1zoYaDKSDTipYxlKjOxwJ5he9szNJnNJ1zIXAXZCX6O+bn4cUzBnX+EW1c/IA0rNPguB6NQe4WHAdR7dZqr0eqU4ESVtyRBJtfBfMsGgS22A3G7SlCEfJQymGpiOrcjE/fjC18KBOlA1wlK3IFlI14KrpHuClRm9PuZga6J/l72B6fS0Q9OHthcip68bA3t2kpM9rVFExwyDxLzcZDo5blAxw7YrorDAcT/u2683NHW4KVCnYZ5G3Rzh4OuQaquz8WdLCP5MS3a/feLPQF4ru2b2nA8XQ3FkFxygvEQM6jpYhndoZSjkoEl91EtSLGEQyFW2WP8h6Ty+zZ6HB6V+z4ZFtPm4PZfOSjA//Q5USPcZ0N8dICORAkkZ+82i4X53PRfkkMaCVkddSPvEh6AhxHILKqB2qjHS6ey+080Pgs3fKwOv6baZPj4IV7Tz89PP4TkXrcNqGPntKSEf+zjw+Ck/IWPpXwOhXLaQ/EVxntvpVVIZSWIXWtP5TZpvtIxYFx3V+Gg9By2c2A+bpvYUQPZqOrpAuBuYFTnjzsABCB9qPKOKvD8LMLHMG05o6KR+Dw6Nxll5sWomnXV/lHanptCeUZfP5D7IbGbT1gOMv5BMgg60PzXH8j/EcK8pbWmRg99boQVOW5LhyHTsdkiYscks1gf6iMAf5P82f00VcCqP1le+F5ziAKklqgpYLrNIXycTelSNGMUZ+mKLP2/m540weujIqjU6fjmLOLPKHTl8dysVnAUg86fRsGTv55t37vPPhNsfJsPZBLsIDCVGckgssCogFI8jBgAkCC0PkDuHyB1i8UDQ2uo+/EPw0LotDtVjfKSk6IoZTbegfqx8vIKXNwKjT/h8QZE0As7LrCVd56WVUPnLt1n1h4/hRc8jS5W7bHS/jMeCtAICo68MkPa0afBO2azaB0mbg8ZzrfVebyNcjNoeEgsbixngJmHHFR5DLlzKl1BQkW8qOYFXEg2Vi37YwIUmqUi7UWaHTT0d0kc3fVSimv3lRumisS0Zdba5MQn4PK5fQX34FkjHmhtZyHqpM3sxYgqeVgEyj1/xIldBpLcjNQl9IUGJT9meb2rhiW3UerqBrwNk3UoUQ2OjXEnA/rQ7g/4kH45bBMq41yJ0xAMF8l2u3gSReEwNWbwIS5LvDWAjwmLTsvZV91diNBm930FpsUQl/J2PHxxs/PAsWBT4wir9VtwUCp+6IgqeU0uCfo89wyFOO7jevYg3l4k4Cqe8W2PLi5KhkFgrR4MXGaYj3q24aPZP49RvnEVWqIp3wWGhxV+K2Dg0mFOMDxP7nTdJXQbRv+kc9WrJu7SlbV6pfL/7o/rpODmfs1ylWlDAhkkWW4lEkB/btaFMIwjexbJu+pwTnf1Tv8MZvn766Wzn/0X7keJO1BuQLIoiacA7Y+XNEEoINvuhIzMeiQiXfXCqo91oTyXeAXxXzJinZc4A25BEOywIr4D5xZLRFSeLGmKEjGOe7QKjDVVLQ5IHt0oWAj3LBdPJxHXyU+KXQLZZQG8wBmuHaG+mJhGDbUHnf9DoXcVtSKG17EWdzpawZBFpQPoQHdr6taRde71UoEIOSvpjf8XOdy/TNXR2oV85J5S5t/zfoTFsJfLag3volfNT8IF9MNJNfPSE4egBcodUj5fiQIVLo/soEpIJQvND1D8ekUJkNF8JVD4PBlrPssIZHUDwWYm6v1+XIOAdT2d76vEEZZKVKfO4zyX4dKFbycXDkmn8VPBvkd7CfWT8rQn0aoSJ+pP/BjyHbcALD9mNy9E2N4/K7ICbg5Fry03WT1wdHwL6H7J/RG9487UWIERUJQSY5ktARIedoVDcyxUrc0iY0wrByr+vjKGsycfCO5K9h6Yvv6qD7YM5EtMDVCpQGmowGu7bSClrsGyDCX1o+/iQZSS60TKskMgL8rOYcxPjv+cF6zN5FnZsV7rhgrD7zD+2XLdvSIOOzBDTbbmAcoGE4IQ+J69EeC56pq9POBvCQuWQzpjAirTTbUvb6I6NKo1Lr6hMlaxiITSBL1+bP7WA9MVi1WVpZIvrV+T6EHZ45VUNBCsNtP9LSY07ipKqLy/wtHCuwzYewNCEbb75qA/x5ubF219ChJw5UPMO2FnhOz8eGmkTtwGC1BMzKO8SQIPE4ohtEtQzhK1Y8nXefEkMFdYOqvFyfDxQIKqHMm0yfPiPrC6Sp37YrfJjTe70pY2k3RTPQ6PJAJfJC/J0ji0mlPfwmYjQtqZzbDU/I/cEtPAq1lR8WPpR/OrhiMeVFL0h8+bFvAFy5O6J6Bih0I/q+AeruSPNdT5xe1LUVKK7XAWXt23aWq1Xx55n2Qnt5u+LVu+V3npL+KN11kIr4an9Ivow2t6tw3el/myNJKtGAXHT67vNU011yvcppt+DndjVQh+tiFds0K5b2aAr/RftBsWX2M3lc93XO2juM1f7wGCOMm+gr3cUudvVJBU6ozpXHUQqr/styPTADzfvBDwR/iMkUUC87sSS2jBtUQg7kk+9rViRdEJ3RNCysUBsNmbXX1KTFC82lxFlf1z0XfaUCsYiIuEDHzgXCLMPHy2CFcjKZP7Bk0wxafr6dRfiblg+9/6ZVF8cVk20qNqfSzFdL+Iz4u1E3oHr+M1LG2c0fWZSBbbWShwlCSAjrYhLbCwEgPBmNG+bb6r7NMfKrn2kDHvWIB6kQv/ATSL8AZSnRBs9h0C1QxceRhxHkoirvT6olMat1qtZwyTpbmJY3xQtMr0TSYJnL6bVbSqkA+ZUvGX0JaL3AcFDwbwV2pMmmGEHuho+69hrwlmCF6haKDK0ojnT0HPulvM9Oyz6W6p67lO8G9I+/QI01DMEvf0beNdg27DXYEdzA0tvxpLtvKR0DUuBh15LUozawAOXOuN+fZySdVYjtEy+FNF3INVJGYGl0/nsoJmjYyxOCuTLIQyglqkYO2MOOIxRhXIZmyyluNYngQM5nW035lXRdS+7Lh9W9Yl+PUMspcL0N3jaejiaGiW3C0x14HfNvvjn0/jPqihQMvbpFQTcV/lQXoVTwitxXI0K+wEmWazSpIfSLMFaQ0C9UAKBWkQkuEZRh4wqcOF5p95NyJXaZ6cVCaHe5fe8LeKa7XE9HUbnw5lvuvXv2ntOO1qe83Bh7BLMYk2++OuLEOE5mp617sm35WGiNO/COzHHk0jEOO9fWBS8Fe1FhXTx5DQTJCCbTpwoZpUymGIVr5TfxW0+1d/UkuRWTyHlVWy1U+JGjXMNI7FZ3WCIWwYb/7M9EUip4jGL7DAxZGt6QkNbYDlW8+iDPEIXkedXgUcZGd+f0TcXVL8lwfHQwDsOhUkPjk3D/1AfGioJbNOAuedaDDA1CulQsdLEb2xhBi3vrwv7NMzPoQ7tBa7IM4a3t0sI/f0BYR5/tYg0Mgr5oU1aq0RAFsXkzjHs4dTJYhkF0WYjN3HFoUXtIMA24fAMAxvXqBm2xzyYchXT81Ohy81EXBftHjyrOtJW/M579LJkt41hc5X8KUuAtjyy8xlBA72ab/Zr3TqG6s9dxYK7jrPQxdYzUfCaR3Y+vFaFTMvPRzfJdFn5mxfRf1yOcTqUTSTC1UuPOwGQKTxhoaKg8Nuv+NOMaYCwTdLE4EeD6TDAi2gcQOCifva739a7vfDXuen1EN+ON7pgupi2TwfZLIqztHrnplsbZuDTlQurSK4024r/8ePE/WtYgN9yUSkFO+i+//ydTctKLWRQtqhMD/4t3f6mBDTQY5uj+gPcEYN/VD6IebPnpFR+Kdbht96VDT7M1J0+4746tMwJSuAhh0iigB+WP0o/AStQ/I9c+v2kjMahbY3ySdty/Jnt9vl9owpmmIM92M7D2VbqcCMQ4EdgWgiF88Q1nSKfNXSUcgAcnn+a3HjA3AYvX7LIeSyrlQ+GLpPl/oKtgpeOAVayHwb9bIoQcdDg+UDuSO3+lO6BpxSBMQ/D20fuV2kOsrgg0VdVVV7MZyEpqgwE5FXkxO9rb7IMF53ZNCEKxzKY0q3nYRFX/uUF+TlWBy52HZCOhEkQ5upiyIGgMoYRw0xIDe1VqfJPzUxpn0W2BbripITCQ0o/Wa9bPPwxKKD4mrETkGGqEsElgCO/0ZXFYj9ThpxYtlG8fbjfhAWZKms+8M7qpGYLn43rh0g+0b4PafqJ08hiCsF87hy0huzWqa847PiVj4HDjPnFaKm2lnZ3N8Cy8co6hppNzPkQSxB9/zZqkXgzFaIn1eo2bPyRZYOYkm9sCZRixDhS38Z7iQExtmQHCnx2/2Jq88HwdvQrpdemC7VZaFHqIN05kXCMt5Ixkls62cpUSBA94WcnG3pUcuOeKWZwCNaCzKVWsd6ZN6gTJh2HysucUZdD8/rGCiE1c+ZkCAYYu6DVMD+e/0NrsDeyqYiMjqdrYONEKDhselQv5NULAMG4XjEndbzssJ9sy2vc+kS2DtOwwnXAKU1B+MY8/spN/OLc0ktYxQbXVRljaPGzGGprEk6aIT4gXReTWcMZkZ0aPUOTFyqpU+DujcEpNx9PTMy4nfHNKvz9wvGSnavUxJHZ2LgOMpwxIkXIAEb4U6YOAqLmx2OMO1HLMZ7rLgQnfo9IUpIUtRiJViMTSvRUQhByrmHUUJz1GTTjWxS9zf/QLnPCdSCd172qnYPa4OeQpmK1i80q+kd66H55YtgJq+sW/Sdbng0BYXmxBwpfMeg7iPwUDkSvM13WW2lwyBd2x5Qpqo+HvdyKLrVMEQUPOGbeLRXr8qCzoV9ldeFhOZfLeICiAcW5TorkhI1SunxxkBgaGXuf/ziM3APqP6kBFDi184wn0scKfer9v9IOc8eYkWRI0awQlk8PqyUS4hsnPEK6LZ45Uubd9OjZtZHKYRPLXOyW+0GNTgJrpVoQnU4Qyf/9YQeas1aO2xYCz3MauVHfjCYs5OO9SyxJ5seoD/6Xdfz33MijvSc/7R3wummoMmw4Zt02UoC75s0RvTyvyF0SawtTvpuB9/AhkOxstPS+94OHiLEI4WX16bs0p9c35pwdSiTxrZo/GwZ4ImjTh0+RhsfH3z8m4UQYyfMNHQa2pLrQP5VrOKMgGN5pWbughIKY6RJqITPqxsPlGNlv7Nk/fxI0ROn4ln4ynNaJtZdocwrmg87Sh5N3t+60B6VvC9XnbvO9N+tTKVm6x+IZQlpTNBTVt3E6P+Ey5QZAR+uismHprrcuFlnvqEVWIIyA3spRNYAR+BLUjrDAMjHgs3BT7s30uUDWeHaif8Jg0d34xvWzcc4ulsLVgWlTeUtDyzq2oqoW7KnZZQlIU9t3WKdQjm47Y9hMVaClRVLcDopUMqByiNgc7Vqn6lM0689nvPEe7nMSGLQJGWcj7oyXTpnPb59ThvhUdbXaG4tGyGhvgj8jSALC8i50pBqYCbfBl+l/ZQ1ykJhde8E2eD4NCevUWSHBKRgw2qLfc+GpXbBIdln800BWUx9Uzu0AVzKRtcFPbrOZAYBEuznvUEg89Hvm5UxeQGTlQTLKrrbBvOzUmq0bgUV5GXR+x7eFp7cwJ6ewv4WYT/R6SuSWKorMUe/3PkcXSYDunjGRHpJMO9s2k08oXpwiHn5dmTh1sTxu22T+BPutHWWvsajHkaRWizjC9RYycM5Go65Uiz7KMiq+odfRLEOogguc2xb3IBNchGHpveTvlmzuAbX8jxeAXbWtNECNpAuwAZ1f4ehEWvQpa+H7HjFG7dfOXJPQ0qapEC2Yc01tQWnaj00bhBziy9x7zKoVJeThq6Dex4WHW6jauRxYwB5IdvFSvltLZQxFjEQ7B5tu8oCO5saGNRXE8kJUcQ5/g3lvDivFExOOLrjGbW7nVL5lJNcIFb47JVkriVX5n+FFl3muTwNlBTHE0oqD70pkvwqXlSPaswjTMT5Sof8mfyTOqENAQfdULvbsJOiHE3hHh8BVJQR5X4KFRUKYK5UdEqWuL8a4ceJ95Hb7G22PYp8G1NJ8/+/m3Q1urahw8PJrYAhIAYp1Acda7wdSrMAsPd0jTAKBca/tGQURyfcGcyMyb98Dpd4NvKfdPKErYKMguLNAEiZw7nEX3tXl9kKZRt4u/ugLKSSRxrgRfI8DdEe71ilvWrJj+itbgWhB4KNUX0PeVp0/3aJ89t+NVRmHnZmDIISt9hQhwnsNEeSk0AsQ0SW9p3vvluSmFPN99NXYec0DiCFFsh8w9OID3A6j8mHGcC6eqhF9IKY+UgzcVM5lqfo31/lkOPbKeDAenymgToW9EwrK07Fj6iYwinmDovm1XmSnEpt7uRRb82zniRbNew+yssaQLIjYW2Qs+cRoIlEQ28XE6/Q1XtEumA4xNHy9SLCQVdGyMVgpIXjGOjq5mzT0ny1+7ct6Jxuwcb9oFLrJo07AWE8Q15A2OdOPtQ8gxUlQ1EyYJzWjpYBE0cap1dIML+hh0uYaP3t7TCbkWyWWOltPnm+23kbJs/F2R1nPgJalo+adYOCI0VdA9Na2g2ViUbQIhQTamFI/eBrysUtiqfqo0pX/F8WI3plDpmfM6NSFijg2tp1cg6FGXvyD00qWZrm81wEnCd5AWncsJe54vdhHr06aYAaVSOFCe5FgDk5PbpCXL3V3z/WRe7qQ3qO605Z/DpuiPQvJhuTbveaPM3tmTpxPnQeGeTPIm693eGfhfHXEETGcetrTLZfohfceVS1DN9sptHIjYFy5ixHlcqUX3UEDS9HLoxIRfaNol8pjrOH1I0/AfDnYh+dwgUJfKap07jRdhF99zmkGxsqTWkhPYSUHqh4r0VubeBNWHOdgd5szBJM0945lw2RoZVRo13NZglRwOXjLcpTtYIETNJheDkMfUZF42LEThtfLsfH6YeNXgOIOGCZmLAYaa92uAT6aES3BWYKUq6iuQzgiKN/c1ic2Ztg8RAQ0ZCZK+Nkx7V/NId71mwJNsy8EC9KWgVelg794rcXDIbDYc7QB9Ma007sZcL8GLFtAjMzQuypm5OrAKmKhs7MIm5HmYs/AQQAkmijxG9JOsQ3yxcE3y1DhixhTiVQkWVpyckHidNG0Qgr0kNt83PiyssgrRgAFvaRi+IDZj6VqAGJPB76YF6xUk7rGJiityjISrBlJLpQoIvDf7EyPXE8I7Vx60Wnmn3gDsw9BkPmytGoDvzCCMZfgQRRnLt2i1Kg/6BIhmZoBD1dK65jm2dMSjJPHwxcLVuMCFIcR7fUTg3fjL+IuZwTDmEPtU+i+2BElXOLUIZogZEMMuio1W6OJju5eu+nx7TqxZuOlz6EaUBbQBcPUTj99809jooO7j6PyRRxqxfoP9TOAFBhLfPoErT3R6yjVOYq5HaBGq1krLOQNDT+rvocV/L8LHFmuIczfy45jrMgAQ9v8MvsUKLXN7PfxWGxtp/WDRioOp/UPsPWvmOAEyRK62Ur/SE5f+yZg7sy3ggjIsEL/UR2STFZB6oHWPGWUvEvDEFCd2ujKggMCXAiij0fH1pZCTVimKvUdhf921Y02ZipHBxCRETTzrBNPnZ2dEsrcYMsM380jYRMKkjTnupW//LDnTmUTa8UKmM6TzI7OHk+d9TzNNwfveiUDUlpxRUfY6pUgskuK/xeLTtlXTRj4XEbiXdKSxyyzf3Wjdh+wYDf5YPLckWHbDu/EDYOIAWbGxQRNm5hZIdkGdJHi5/B6a1Pz7azJ9kGUSeQCYXnv4RLJzeyRosigWsaffZaY+yu/9vJSQkQRu99WAPMERghyZsQPX+ERh/6LFwX/GAo9EgEIDRhLhzz9YPojAD6nmEpidKopcK1FhNmOz4cENbDODKeFLSrHPhSQ/WyFIDppg/dPpMkHAtA7cKOKVP0NFvGS2w+M3cb5uaR4YKLr8KVYkjA7EBfOoyzGm2cZ07KfEn+nhtn+hySCS5ThOeSJhGw40sHnIDmBjQhDWEmIBMdeGkJ7jop9VOht5Ty4WlnVKlodZKNa/+p5uA6TXzQaHkx4Q6DN4z/ktWq83hINwt2q1E4hkTbRBRBTuxoCKLNl5cj8i0Vx87gopH5ic3GwkXQhBLcpKzxfg4qWcjPnUE0teBjfv8iu+nyMR6ooak+0YtC4vMW3kc6AhPwJoTpM5nAjUvcbIvnkySBDkeU6HnoqxneF7MF3VtKlAZvXQUJtAgXA64m8BFm8KGvjwZJS3NVMHIibP/TpuU9VBzaRxPNkJGut6zdFuph8nE5JnTFDSDf73O4n0yPMT4br+dhkQmZqh336ZAwA3qca6d3QFar3TVHsx0+LhwEl2lMz4Y3MJZRE8gtefdT/svdYXGv43Nfkn3UyT5UQrOg+4ocKSS3yERJEBmuhYF5hLpHpch6pCs9YjaCWs4pESNrNZL5bsNbRa4ukOBXCunLpboZfSJcdB7lPrmANQW00fFtmTta3kR7JG1uP/hn1QC7k0nT08TZT7IVdB20VfeLGBNhwnn0SczFTh+TTVTJldUhN72Kx2pe8zG2rKPwa6vgbGsZMlwCPaUzJJFrswJL5YOSvvsZ1dMfQER/LR8gHH0r4S4W1UXUja15iZGh4g4LdP2kqp0e8mv3E4u+OfsCyRFORjeU0t16vjdN3/Uy9fQGyD5h9415P5XWHW/+zKfL+BXFx1wUP9bhI0vP899qNAfLToPDxx2KUehB+JC85CeySb4bzQio8nzmHbhpLYOmU26kIgmOYaUaP8NreuH2hwrkjPCC/v2EPMreOZZ0xJh/0LDtsLmbvI+BlcjdHHJ1bxBVX69UFYObn4VlAz6FPHAOv/UNK95AHz1TyvJI58o85bCYzmoKmf6d/T+VrVeP23L6uw2fC8oaEzQaDOWC7a4h1fN+0YKDCM++V8uxP1r3wY0ubkwHviE9vlwKD4sOFGwFFTdprfFNwHX47lCFIpeUZLTanOqLuLEKZf5uDeUwrqTj5KFD18ooLwxjx065eWPvglOjzlCJm1LnkReDSOuYqeGRwWzz7xkWIodoYR0+RuJ5xPj228p5fge10eEBzZl/BOtaZfY/4ycPLxOwc/Kt/Vefkr8cOAWYJGa7OBcI1SjXmgjhbF4JuOcMk0YEgfQukoRu5ubeiejLNA/ocPyBf9yD/oG2DW0boZMB2DOmfrhjHF3zfrcnqfcVOl1yXrLj0Yynr9hZZrtORL9PLxcwMItvxuZoDcqX5kx0jw83esHr6mp09Wcyu0L4Qt7q0FC2m0l2xRuw3edsgfR8f803JGmFpvBLuHOCNlLAoVLLvYRVQc0Q9mhqBYHi6RKaKn9B7WPXHrCiPntRsrlFgfB9uJCM5Ou5s78PTsRXEVL7kVL1jt3rN+T+vkQuCt/AjJi1G2WFKBjU/8L8f5I6oIkm8TVA6AdpZ/WeApwmRdKIzApKSn9XbIzXE18IMfe0yMKLur34rKRzSJuckSBF6g9C8BiWW00/tHlmJrYIBXlmhSuniyRAoPtG+M36JzaGM4rjPktw5PEotMq2bpFVaVXdPJs1KF9b8FdHgzU29vvkLpe7rmJ/BOPHUWdpmveITtBwM57thoA+uXLb1CREC5X7T/iTQPcqLTnSn9BSU0/CFY9JlZk0Ri3SpMMQuafWm2KZ+o9OdsNdgwfZZlnCfKs9k+QUmIsgOZbReAAW/Zi9joh2HpqLBp3yhyQCmr1m6Kgd5TVd+153szz6MiqP66TVE93Tjn9ApL5SM1Qlc2rWR4S0fZN39FAJeHZRr5yXGRPosWM7zfoU8EZzDKC95UHeo6PJe1XdT9hGgMPOGMbFM59clSlzlys7tCuCzwtL2LLJ0uIjBhSPBYkA6CHmFXI0UvSZRDiu6rLpS+858NZRS54jt04tPiDizFr2u/lXQXbFebtWuJCqGb/9NQ6MxYTatfm4WHvp48t8ZCLgnv504Mk90oS0sw7V2INki4aVxxUfBfohPe6WjFS3qgRQQBqMwcti8zexWYa//tgCzZiRmUt8fcxDoSsaq0pjYXSINM7YA0doH1++HbuhmvzAAkTLnsfg7hWQVGBDSTfEImaizKIgF1TNI1+iOlUn0FyI94Gs+p9dvDi+MGc8rdcLdlVIupB8aB67Fy+TMvAn3PEAzkxZyvt4p5uDzAHHhtNU1Vig4ooY8ZhPwi1zfbOUOD1gfLc+LM8yzuytRV3L60IVdWhjQwXI8+bmFzOLK7ammYCXLA6KNFWRW2anu4Gd99vbZ5wgkJ9lYOmhWQQG1d1ySGLub5cl5kr/SrbYddBXQnz97tCIg6z0JST+7iZDzG07ZCwvTB26nn72vdVplKX8Li67ezUoVVG5L5DC0a35IK5t0sJ/CLAMJVByP5w9dbXOjHWj/2dIWMo6yN1+ev1+PRvzHh6wyVlkaVHBUMiWMM2+87l5GkRgbvvIaAlcAQraZbQqTXNN2AO9Yc87dMNn/5aBpsKikB6hDmMj0YEEOAJJXJ4blSJ/MJM4yQpABIlOdoe4v8fhR6radH/Bo9CdXHPO238SmadwKwD/kgyV+S3FuTbToyg6ZoqZFDQwOs+7GNIHN2Bctp3c1m++CfU/Tt9e0MslU58tJcStGrgfJKKrm5VInz6UIpqet1b3AgmIq5Cy9ubwOAWAXo8Knj/NDnNnOoMHBrs6HmzORAe+211pRskI8yL7tcIQqpXJT8cqepq2NWOKV7YWZO6UGPrPW69mLgiS+hyIwgkdZ5dhYXLH0cjICq3D7cwwWgDTPX2GC++0VsjLPiwU5+X4fwmou+DbTllldRjoocrQKNiGsH5aLkh6GLLi/oj42IcTpQcPxR8yCjKdOhsTNF0qA1QjHdGBl8oJnkVph9lSasiJje9MHJBWWL7APT7r5lcJqB0RDUo7rdrfOuB2YyQGMH4Ac7/ADC/dmVMlSVsIQYQKfAtSKpzBujgxhgYzXOaQUF+bp8VjWBxYDgt5aUa5/tHh7whhZd4HrEoUBf0hhhk7oInyYEYJ5Mrc7oeGMuEIXMVW80CynybnGuwBI3CYmIK1NrlRC7vYPt9HtXfXJIy2l4p3z/TTTUbumzBHhG5VZ5zr9dpe56ieIo/qEemsyI07cPT64xMUsahmfhHWTX/9pdP2jQcFYaXtwO1d+tuLviGV9SBHtrs3uRaI5t33GHFoaRVXwBF/6AYnU8EwhK03EQeX2RB6qEPTOTSFG+Kep2/3PUlxPy/1dNGcAzGzSUVfzvkdBNUJ/gl+Y4UfPIolKn7jFlG6aD6KB9Rqb9LXiPx9IEO3GDna75w82gPVP/lfzaLR7DGbQB1axuxunPXDEITRPIB2jSQyTOMJUu7L9R7MxhOq+yjQLpUS1ijNjIVm48CukawmkX5ChQyBm7QCXbCjbCmhgJresy7SZNWWnUABoyOyDadRU5ok0CONF0D5VNlwaVWx1Id7rakZWiDf+hdrBEGpD/mrgUBUL19/Wbri1I7U6cUM/bEhvL9bkk0+kptQRwTmHQCdNlbVzWOID9tmCfqhi8y95Bv6ZrORm8M08FryZAQ8InMYSov4RcqcIWGZkqWh+uwab6JnP9BweyH+I6zs1X6fUJA1Ld5DsHB59fX1RPeNfiItZZBNqf2ICHXeWNWgKV+Iqahls5nNGTtDKxRNnBA3kMAMjQXqVC3cw5Sfug2ICREuWCRzU+W0YEAcpM+wdTwxLxZRtAyDQlLt1aTaPG+qFyzdaTgucr8c6BTtxYegF5ehhTi9XPBoAIh2YdvhfTS+NO+DpDgY7gwcmLKlXVhzRYaOtghIoOFOLaTD96/15NBc+ACkdgQuIb1Q4K9WU8ZcY2iB3DgTOMcFOattjVSf5a9OKi8044waimAweBWBhcQuf0b73CY38oyrBoNwVJYhHMCyWxyU7BHR6hObIT9aV8kfdCPhl8HYLPEGyTds7nUaaLBvEv+z7HguJuJRlPflF9e5KS/IMfHsrt+QyXlacIR193w+dZpTJU88ytcR7KXofnUrm48kDJwNwoVI28l2tDeX6gA4RAsHOrZ644rB2CenPXdbNBYywTjfnvX7rXVMte3Z10yHNFzlmAB9n9spoeNg8DznY2z+9zjabpinfZjTM8tXMJ6VqSGEOHP/MdEP6Mtt4/NPQ7BgiB6Qfnznr2fOyJA8TaZ0evGDTIBkvCs8dj3cFvAHmNTRTW4q9Dw5Sj6U3z51yvixcntm+bMNNjQqLlD2ke009LqsaVuWBM3XgBTqn0Mw9elCw+tPKdCLvg6gH+zDJFpRWkiFd1zY0zhd8qSHUzu6EKDDyl3s2NzU6vCv0RJejyPzg1FaCu0iElxUxJl9d6vV5T0G0jl2SA+nezLwtcRX5Row5QmR7FXLOPjNr769YIsZU4CVBTP+GihJK8D4o8aCxooTD7eTHUSx8+TliG2yYDn4wU+tK82tw/K7Q9Fw35vGI4sPrm5fioyuZGM9pr3dqSLjcOZpX3yXP+GcicvWo86c7+8nG/7YEUeA7786yrcztsQXNmDwAvAFn/+1a+VhQ+X+EeY86MCUyRs7vtkDwsD1j++dw/Pll0UiAXLVxz23ja/wmD0riCTTzg1gLaFg4WPqxIMqbulIr7QUrzkyBNJEg1fYqIEfKpk+Tk38W4ezi89ts1WC6A+hFzbC5ZO8935dTTVpt5+IpL6R3yJo5QbBl7frJcMMPoylrwqdqS7VQwr6lURP6IqoMvMqtUvLbM5eh9Hghd90D62DCmFnXQoS3NrtKCMuwJHMXcDgMcuwnjXP7lAOXstE1FEz6CSrmFJLKGASB4KQdYVaH0pPqz/NQCkd367IgFaxme4LvGKMbMTS9aZ4ZE1elZ0aTLVDCNO8x7sZ/Az7M4QwluMah5TQMMTkGQ1AgyI5JgrP6YOX64R8GJ9DmoEoa+h5UVgARgfhWEwI3FlP9bPuZbqf4CLHCxi7AaeOcFGv7Abmyqjm/6alIdwNqx09R5ZmkOvUYAcQGAU2vwO31h9b9sbilpYAHTBxU3myRjmAd4DagAljN7eqBDJrPH2PS0trr/A+I0q3UuF68mnjjey2HdmhVq/AYe2DcRiBvA6cUx4u+LbbC9F3V5tBXn7oW3hG3Qx+hVkt8b7chB1HLslVxRe+BrzGT9Hr/JFrhkwrP1VYtzOuUexycbMUsT98+VrZ5oUPwjAuNG6e6/+WqyJl9wGAAYCdgHlz0DCMA603f0iavx9q2iEqxAJxISz0pQyqeCyAHD8XFgJe4GEAMZH+GM7m+t51qM3+f9jkyVYM8iJFqd1fBOZHn3MuKCbRiqELmSCbW1YsZbIsQIadEBheXYwtS55pVuLQxwtHfrQTH4nisyY6AiISis0IFgpF/QOggcySZIZ1SPnA7i7o8ijEAjJJZtMBpBbCo+hpstJHkKAD3IRBqQBwJgY0mTouMFHrN7tcHghSijZHZaxmeSXTw/GXYhIDSi8iBySezUKVHBjKQjQyI/mxf2RUGTutg4ymzvrAJKnoHwM0lxWgy0bSvGDj1x+5I5H9gQRBbjZT/7yiq0jzALZtynMMLExzJb+q5FWe1mMEvknlb2+8i8KNouVVsFqbBO9kSLXMWiV4lZqbmtw/9MOyjyFywMzP3/CI5CfJFr8HiNn5OG2gcIvyPUUAWWHE3yAPcNvYa3ZqieGdVhf0CeHdQS7t32f0LV/+8Qtnei7S8iou+1uAmxUn+c0WWzCDSYzQiqq/4E5T+H+0yiVyXXo2yuO8ZzQ6LWx3TMXz42SrW77m+1AF9hK1K0Ut0qZuGAKfHBVV0bSId+XHYUiAwmeq24Z9ku9LTcknlHtOLgCsDBhl9C5/qq+16nCs2gBxObFwpnEcFlN/no7mUEOD3HbPT5jIqTkZK/3UpPqRP/uGUokPnWmW6rRb9TKX7csofBAoatVI1HF3oVQIse2J2xL8ILU9BlnfZGIo8nTRImySiTbd7TdQGhvi3PVdohm+eqJ+5u4WeOjYbZT3Gi1DNHb96XpumU845CB11UyYU5hUDCHGGlGxdkBQzVsCYpdkNF9mI2UhsFNWqxPIT6UGfxQvKa5I39eVgNiS50d0KNHG7D9ghxNe37+ydv6BJ/TCdmQO6731GuQVVVT0y+tEv7nmpKJi0jCayg95uazGQEAP0EwSWykNQIZDsxn69xuwoDkRZ08XaHy4keRSSOpE7ubU0MJcs1yPg9yOuwWwyNtheU69bJveOnHA8AyCMdBtWssyczUrVJC0yYUFbajBs8aH9n/7pri1m61gpgSHutssy+ltkAsUKV/F/GUunB9hcUxis3udKBR6IXyN8qYBOKYAF/Mqdl50fwqGbw4HNz/CC6N3vy/3taC+LT1c0OyqrW+NSHz3jPv3MLUkcllhqDgISXjVCKySs76P7IQcDrAbFvqs0sLmxzjuOV6eqEnhfy1jJaXgs291aI8BMIYjascZU/XXo2JImLEyQshwJGl2MY47AZHl+P6p9hriMhIuXi1J5ptvWgbUWTjYtzFW5TxFoUKvdC1+AMDY/oXf/eDI8GvEgWuIO2zlBMuF2eu6VWNOfVm2ltocuCCWcQWC1bjDth6rl6zWT6tRY3jvK1VXwWO1jGIJbSZndlS4nAIqsfDvItV8MM5X8bWC5ktB+NoNKf2BPFO9Er7d+JDLihPLrDkMZTbwIpLEDgdfvdK48B2PHVIC8mhhmWPCbsuMLyc7btsxnmIXz9qSVpmAtyr36wXtm98eGUkoO43VfKd+wP1zTIAuMGJuy9jQPU2Xk4uwENwJ5lWcRIwC8krPzXh6ZaU0cXjOXSPrRohBCEbHKMnnCuBNAW3jZhMo6Zwm7Iy41MKhc/JmN+nEiBAvKhTMqD1lzMB6HmKe4uLPrDx/OTKuAJtp5xRv7rw1R08aItQnE8P4bkWwVCce3HKfqBFh8lsj14mpmAqkFwhnAbIlKfpxNzoHcNPfC+5M28byrJ7vWCWO0bNbfI3SHpHS4+2xVgZPsM4O4v+aHl1N5UecWQFLQcfDV3IOIqBhTV6uJp+Hn+JX2jaEtACWxrZQYKPtMXw6Zx9N6nQlvn2+yzRidpTLnEavw3Duf6i4TLVJpVJYIA+O+6upHG7rB11oiOpJgGUq0UNwK4bYA4t12Y/v1DSXrdxI/E5A88cHziDbhLo8EyjueoOGV9dB+1oSku8gPNN/AE2GZlrabjrDsNCo06O/mbyP0yHNPDvYhKWz57O5k82/eNZeW3VuA9udkdZ7jftpLHwTKbH6rDIIUayGcRPEZEy0hIbEWbT9RhGpNuNjh4g/qpMlTSozvdSvk9YCQn/maebKbH6l1veFEVyR3NKHN1I8uxdqEPGE5mMF9jsWwnOOCGay00FNW3x/8I2K6Hb7/e395UlIrRRpyBP2kBel2KFQ1aPdF0HNGfnWqE1Fyv2w/mTT6tcuoruzP1F5nB37aRL/QHnI6GNePl0Y8WNrVhee9M644m5T6loAgONypcMj9b7IIL4a7B+UGjc/y6mwMvSj6pBfeunUKIrIRcxQ6/oAE5AHVejDFaGFmGvDIHSpKhqYASs6OjM6kc9MnvCbYEDBXxpZ6JvVDOZu6a9f32sC3SjFRn1aQnmqdifRX65K4RV0fyzZD5VSb5tBb81togC0EV02tgDwNBQyn6QxbLb3B6zF+Dj1w65sTXFW4mO6wJOfmvEq/wwFMzWTmM8idrfcTGyPI9jVLzfCY+XkQ5JixEGEVfW4a9ly9a7r++B6pC47tlCa56eDOAFUA9IyZOdEhzqpvehwezylQNOctUU7IBSbSi0mbiQ3k024lIHiDgGs8eR20LPQxB96RtfZvwCzQndisB8EtB1KS+u3YMgxVqQ0uF11aDY2wmjWrW7x4styTVvgoDsNqFarcK6vKTfbKDI84HG3tmBvMammHpLDBic0AWb31WXc4o1mib/zG7A+4unnukTxUXpqwZ/epEXKDe0gFxs5g4COhXbXHGuacd1Vq0/HeHgf9sQmXNAhtl5MEoGG/47NS8XF9X2hMAXnWocnCXNsKSAzs7lZUg7Z4zQrZQ/waUKxp+62+LHsvz+Vq+E7LK9gBC79EplicNV0R0DUkAN66aBUjjQsh2y4cZyI7Vda3vbSqYu4n2PEpshYKIqrmbTxYZEu6gj9KaivaLNIdwRnQwZlTSNg6kowe9UP3QKiFxxKCobmonGzkwbMOtkBIV+H8ywnFlVmxk7FLpmqrhHpbyIpk7KfHyhWOivwzg1oHTk/pFk6LsycyC174AperUX3wqX8eZmxDvJE/sOyPU6ASYNq87YeMexneDt5E38egKZrhcxRncpzVkN14FeF/paHfMsyIkShAE8NpEBskPQPYgOQPrMqWXEu0mDcEWIjUK8v8ezTlwqXFy+QHH80WNWXcdCAwe49zQhRSzG4FBu5noLRhyIsiVEijbVhI4gWHfAloXNPzKPGQElYniaEhLqiDQdrwBfFmUYndyGtxiM/0gXnXuM786Ipb5I4F0/Gr/Dq6U/QsSv1uTjaKpVOHQgNODur0LWR+/uoghGIuvDr0ZywlCDotFWLKgyGGUEp2FTL/QF4PDIZEFHdIvuaIIvCH+i9lWx6o2kCwachNjSwkuvxyVE+jwgER63F9QKcC0LU5ZN13ixyHRhbWXwd2WJR/+E4+6i4MNC3zSGyrgVVX2Nny99ttQfm0GVZZ7kEJPYMNVCfVR/4OpyCaHK+eWHmCwuCC+1jVC/8YBk8P5GqjWDiEc1+FJA6TXXJ9HT1WM0JKB3BGKJ2/yxQhMKlqkLgDX4n75E6vdotawBQh7q465CJCLaAzOXKgQOZY5315/HBmlt4VLu6ew1Mle0m/iQgej1vH/s3lz3RBJO1hnkl5S0nH9GHDTXTnvthP5jBO5gzsQB3aW1EuSL+eoDr9uB/kj+AGl3Qh5zXGlerUpdt7ikcFm4FqTaF5pt8fuXzx0eKxvbpRG7/UHhy7FK3y/gbyVLdwdNmqEFSGL8iTrTYoiJfHU+yQFCFmLWMB8sOU5pqrMfOJi+YLFrGHy/ydmMHpEEGcpOnZWMhGItU9GUA7AQD67bQLAV4ePzoGDSBpH9kd/8fj8PBUY0WI07V3Um3eJwREcWfRZF/RDg+/uhs+NcBoomSIifvPXE544AAQ+7Yt9Yt+hR//TLSv3L/uzKQwbLUZnwlfYsGGca8TM2HLhVG0Ou35Bxy3wCsDznxQRkq9jkjh+OPRM2fYYyC8XzUO30DYvelnGJ4M7imZo/6bIacwBN5ynKMnmfnEyRMs33WpdRMWJN5/orF081QlJVVtjjOhND53TJkyIAEe654C7GIM06dJhCPSIy7TSUyGURhw9mMvE0j3ywzwiZN7Nv25xnKMbH1uyLqQTitze+mx53wL5dQ9gWhvfvperb8+9GvUou0vjdWIAq2QUBkxBzxGa2QLbMdn4fpIGNe5SWihN7VFCgFEub4s3hkrVCHq1PBaIhEomjrbXtf5r/5YyDMYyAXH6qNF7MGqTcI1lpruvrog+tg8BTQKzkID+c/GyfvUStRQmJ2/xkgzLYujgZp3aIa4L/4+cCmH3pqPChOZ0JxiPZMSzIYgfzVXeBWWdQhr6YNFvfqCWKsgUaILufU0BBXhlHIsB05se7OqA7MCRMjUBKX6xwkO1HENKrTcytRu/1RaUypUH3mA6+GUgSv4e7vgn2Pm59afz8D9mCImDZFjg3zHzKgtY/SZiov6OR9YGeRbuBnVcvnhKzOX76c8WFRFRBW3g91oQHlgVuYxH70ecGzcg18HQz5bgPdgWy9uBn3e/Rp+kFDCFZLEHBrxh7ODv5TCF6Q54XxMykITbeSRhmFK9msscCmIvwsJ2mtnUh/4d8SkQz2jz6hDQmc2F2UkvGy/xFQTd7Zoj5Sh228uXQ2LVjFOWNIKLJIkVgA1Vmy206am2qka7me/3LJ0Soeqxfh9R0Sy50AUJujR+95epRpGIYwBPNfz9G3R1STsC0HcJbgS/O7oT6j9liUKEUJyIT7UnGrMqeelbSod5Yp8rypH7uM2PVZXcBbH5geLNlaT6a5lw+l7OXA6xFxI2bGwwURzcuVyhjDcNgUrnJYiQkFl7GNV7MtZMVpL2ONI7LEbak44F/G+f1dPEnwa0e6BN9Su//mGp6TOIXuhDVcChuIGDJeF7P1TBaI/wR5cpOUcX43F1ShWVQPdlDo5DeTkA0qIkZRHYP/ZdV0e7Rji1MQN1sLWYXMEolA75mR0M9MW0kLIOVB3MQyIm1YKX8UAtE4rzk52a89XT4JidNmSayXIEN5Iwtb5WT5iFrqnmZDPGyZ+th7g0TDg/M9zfeRHkv/bPIE0RFwqch4PhJF3q3F4IShY0m3+KaoEhJe3TBDAIgEBJ8vvBJIU3ITNLs6T/iDmPoouaQ1G/0XvoVdSikQb7uUDx3MGt9vvKQnYDF9iQRPza8u3F7OZTv4DouCHcSqfoG1+jbm/6LjsYSStcUEvTx2WmhrBbADJIanHq+B6fEVQUJZbxpOv3oIywPjIQxmbtAjdNW20qy1E48/5AD7Q+kEZ6/q6GYZBiESovDlUq3uLrx+ymCylO7cXDMs+/LZPJG5b6ZZfimBzBs+eBBZKMoX+0XhSQm/rYPUlpCbblSwHDkYGfVexaN7rrDIT+5dmVxWMCduuKLG6waje5RVTc6KG83TxkviO2GjI+zHdqGVJiQVa8z2f6e07UesbniJoVsqA1TMF0m1nsnQ8+tyNGw+/KQVlUMUo/ZnlcPMyBwYh1maxVI5aPrOFUzeH6cPJoQxre5bbc2kDCiM4Lhe3bnr+SF7UPHdc2XlJAOZtQpI9qebuf6wZnOSDYhnnkghfiFZDC1yvdM9ogdXU/ljT+6bF0fnmfKyCvxOYgi2qKzK4tGttFz4+cPFjSbycUg3DiIGztqTOv2K4jE6t26ifho9pJ/VzTcqN6pTmc3ujpasqlzfgKYUUHnLr1PuK7KEaMPKk9DKzcAbni5T+61WbHhK6hTAd3G6YqtVRJX3y8bCXJ9ohfTi3hBLsXuUe/52INwPS5vwhC4bLBWmEVJM8wVF1Erq2TKTOwC5gHr6EyxjCfBxYTnB45vY0VxwvVM6p6O2ZjGkkSDAFQDbCM9PCqMCo66YqppPy9keMc6OrRP9yaf4uxVJidHBqxPKITZL+o4l3xYr47o+x7gC3lAU8FMNUj0uqXTFjLUOCcaiKz6pnd+lWNdnQ1m4gVvEwmVARKQSH8CMc0tCZqUqMHptv6K/1ps8SR3l2D5U57FJZoG+FB9tGz9BYMucxPzIRpune4Ypn+0qGTUMtEbc/Oh7AmGmbDCFZHQWuS4cjyOlhTFH5J/BBiO1+5841N5zFWcrxJaOsqe1GIBhDzWCbJJfBU5+rAC8Fs7YJ2RGZzwQj1dHwGTrimmGPfJxTWgQPaR+wOxFkiHyI7pLR5HRwyHGYf9nUToSkJGKifozJw/SR5XnW2kEbeTCg9xqY80Cjbd2PMhfUp1v7bCm1RVTqDUpIbBuwQQuJ+MqKCcFMuqthqPvr4zJ0yu1/Ed67COPp7cJY1YJtjawMoMIC0+fTg34UPOmhOtqKGd25+p3ooeE2W4CO0Ns+MHKXDlzxpFCwH3bjfPLji+b5jpknNEod64yXDCNzqOzYSKVS6+GlSiYLKVCUWqXrQTSwuNNTCvFCF0rrGw0d9pMZBTb1vThzh55cvlU5KGbXC8JEvHKq1lgE6lPVec0iQIrarXiaZLd/NW4fskvbSHXFdmqcwwqdV6nKIAa+qvr47DTHqqjWEm8Gcc3i4UJbWMPcr6tQHRM2A6XNKYSfFpyluAWaYz1D6w9rywctEi6RJ+62TiHxEQIt1OKo5IrEWAS1v3Uq78c29wDWQW1A05uJZf2LcLu3p9oZKhoQc9dQLQ3B6F6jZkCdcQpqZPcN8TcE9srzGTdofwKiAtXtW28GonEmMxCUp/Y5VzJnKauFSdM3sWy7R5w499yw393Yk2G9Kr62OnxvIzGI+1QO8qw99C2pODZWJBO2TEoI0D3bLz6GuGx8HPQaQCx4JFrseBN/sFwz7inX00kx15kz8fOQDZdJZNDVECOHLNiKdiv6IomG+tD/s0vbjYIz975I6B7FRgLhS1KydLyuqyaWKZN9JsxZpDGPVOpJEaRVhR57jZ/o0Po7F8W5V+CCbQ6QeYH94gg0k00ssQYeRFLUhS9IY58wzBduGwMCqgvCgJyLI4/StZC1h8UrBbKLIoRMcpejUjd1zHKVZbBbj9isvS0Ri6IDatVirhmxtk44wku5nh0w7uI6eJYRtOG85539SwH3XshjuoepFzw0Yns5M1/5P4ZvTIg0Qc2gjjcWDoOm+jtyY7dM1GkvsG6TWtsU41gBXKOLrwI/wbjppAwptCr6gGyKVhexmnM4vFyZGA7Xt2NNWb6eZfRri+0GcQvF7GZMVXYkmlmqb/DmmkANVBtqtdq3X2xOd1coJnrcOXCkKYjhd+QKYb/6dOF+acKlTmLEaSNrQvwHpKKaARCuLWMFtH6ci+NEoyh+vvl2GAELadhccloRri1XIoiAo5mxEA4D5g2skPPiCQHplFAGdbW2oXh820NmXxqhFhBWqAqjCFnjzvSWVWwK3kgrtwo+cPfsam4ku41UHPxc7N74fa6EXPAFYd+lH89R2yoJYkA+U7lBwnLWHGHjqFNMkMGEaIHZmFwOfkyxKAUIGMUW91y7U/eUrH+lUETZFEPUg86PNk06QIsDaUCD7VNoMzcuWFSLyRnHIrQqXx7ByVBKYP2gc/nfygQSrO5WbbYCXLIR2fIqVOjJqZFq8bBfmKhW/Y8/D0tQLJj96wXtGU+xxlSN7fZ/ZsM3Bp68izBR/PUnlcyJMyp0fiQT/Tly/1+3uPjfQewhd98RTWGFnzT0nnLJbinXSykrv6dTIk9Oy+Qh2+vLMKC0c5TiQgBBlFboAISatKwNE2SdIfLCRe24NVMJvvR/46/f6qCrCMTohC+kR3CoIKW5e1BUOeePEwCzohtvn8eb9IXgCd+ePT9zOu6Ortcr+JpAMqEvVMsSeXp2rpjczUujpnabwAf050zpZldJCrYYJE1j/fHSnGNZ2+aSyqmCN0W4dUaRec+F86D23gkSE2hM5A3G8DpjbjOJzhUhO8Q4xOwEnqLpzmNqny58+m2k95gAqjn5T5kRA2hzkhPe0mmnyFgLDsNwIYy9YcaOhZu+4ueptl01QfcxUwg09Yt2m7FM/WFRUouzMm0Jg/vvV2H4dkDXTdB9jyC3mc3/k7HuK0pN8C58R6OzQRG1RAIZxI4vU7qOd+1DUjroNQzTFB7b47mWDqKiVKeQc4YK8uTeDjIR198HS0edT9Kh4C5wo6JchC5d3dywuR2UCpGy9km+coRgoaW8f8C2FW4OUTAclv8ANZSaDudLmwxfVTPNrYwOOouJjIbryyiQrPH4Dhl5myEwp3gy1fNwf+Ez1xPeTr4wwd8YxQe8elHD0g06mghf8CVoj73uyMAayWQNdUERqn8vlNjqyg7GzvJGeIWYcHl+2gVkdGIggFBZ8m0zLH9vlpvg3lrsFbu/FJW3ri6vM8ezAUgMWaJMgQZp8E9OwvvkLljX+foOWEe6rKsWwPP62WlHxuhW6f5V1oZRgmK4Nfr/tLBUJBjFIptoIKvIMBP5qNBPCCx1PSEByE3lHSAkkw2ib8GXDmKtPUMrjb+E5VSOgKbP1YyUw3I2sSc1Uxdxhnoul4vIsbzDvrR81QltSQGBcrPnPUjM2Maj+79GI90q27uTZBwfGvhSCBUthc13fGQPbrMxRWnpxYbHSO3sEFVyl3xAt9c11LM+d+673APbYYBKsWuhgZ8BzGJX+GzF4NLBS7QRCCch8BEm2q/qM2PtdcvT1+aNZFqfiCiS1N/ajORKq4MlSKkte/p9Optg5KZKWKWaoZPYSEiYaF182zUMfzoNFMA1wzOI7yykI932DyAtBcgLX6NTdnIWwdWyKCTDlgL7QdQi/DhdfJKyOs/+8hbCjH2nro/yzBMiY8xh8eGm7se/qe8RScpkyKlPC49jDqj3IYFy9I25ZRjJSLNEIqkkE6yfMsKoS0iABMHdpsegtgfQJy9g6heNDEWfTTQlzQjKmencywzkPaahJOORAXdpL3Iv32Li2UsAIEu7WXenPaSJl/WGvOLA5VRul5s0cX2dHbChG/Im6xvJoYYoHEI7yZXPFG5Cuc4TVqkMNn32mJQxTdL57ZkojPC7ySnl0/Q2ujeG976m4D43sY4qfjTAgPWKRRIL+0YZhwgcLpWnr0Hezblml1hM/0A0xldVoSdZev0oPlJ9ho7+q1LasKOb37oGxoOrE0aq/L5P8syqxQWuAzd1cNxSuCbBljQeTarxmciwGUBclLwcYx6t4pkIfgXgEISuKsRvKCawZMZouUGeLhEn3qgXruyNL5lCfJkrUz/Q80zKsVvyRmghsbV6BgZPYay/S+R1SOd096gmNVLxYMxCt2zW6lCLBHA2RAIlPnNocV02Y/3c8nUBLFUyrudMKCMeKxB4MHc3yJcL4+ve+pceiJkYVP19SDnu6LNnihbECA8svkOU3IMSVol9gSjmFzLEcs1xhA8dDnT2/AZ/vUlVz7Ajx2U1Hh/8UWL2ZDqeH2xSwOgbWkhlP4wVJojakF4I895WppkYm+yIKtEtshypjYIw9pKAImZ/eHTX0XG808Adq6uLuaFN1VoySaEPpuS7Vf4CbQ7ZGcXTMty+Dv8/htICyNTq/ZY+w9JHyqcBIV+w2hQp4/QhjyFmxsr3EBCFHjdYFBtTT5sxQCFjheWUVxZIYol3YBveNx6YuLeX+B86o/EfLc0qS77U/YXScuMtfc5NbLtLfejb5+VpJafjRQCcnoez1/2/aQs2DhSdeixusVHAPOCHTvB9N0EkAyIgDCzGnuD4S+eQU5Ik55RFfApTR2jQ274Nc6j3IDFtbcDU0crnF/F83utJmNT1pxDiU+gOzOn5L5tClqZf/xJAZh6GNxXuYFCAOb1ZWkftyIPxuRzzBEpnF/s2EQZBR9j2u+k4DdHTDtUHQnlaXidQHdMRYqjNwhZMN7C7lZnXLRQSuz/iKSf19UxqiNvuH3vaX+oqq7yfTxEMbBaZOTdqpYvZKWDSAe61rToQiHBhWbTvX3SmDYn6ONcQ/BGDETr4AeISPEPO88HT7Im9flxj3YD4+6CBkD3qSY7GRqyvnF/I+Hajf09DZVgM2BEZH1QusX6fk/TQow4qBZkTHzMnrNjNhWPjYIpjYaTylzllwY77AmsuZH+iBgGHbseUtknXiScNgRCsEJhUNd+vfwuJVZfpXZYTVKD4Ya1QQglnzcG7EM62wWr5sMc5E7Ws4OiMKe+wSwTyLTBAS7wlBpDId4+1kQy0SHE05/KH2yN7fpchNTyAPeyiQN/gfvim5EqjmgTHYwpHxGGrYksOkmQXbwLa8jZD/8TtyDprcqa6fHkLxwOFoqnEsUgCajH63Cy9od3mBRGAJS6FKuT0n432uUPxMGh+xZdujWoaaUQD3aTB37uEuJKxE8EhsIx3dPrI+p1PGcHM1tmUyegGzSUQuCxtkl39SQPK5Q+D369gu8L+nYUa6Q6qxE3IobLrmY0qDafAqq74UWixUcrHXJ9r12nVVNGKVlfNjdi+mTsCZL7LaeB0OsHHuJtM+UA3+NzkbqJOm/yVMcJxW2y8Xlx/JfzOXe6XRFSKCTbrmcwy/aZFLmnWts06TtGp97aGfiHmovQZ3Yurc9bnbhTllT3SGmifkehDWtjEs/Yc/dMrRtnfPWIdoJQDQ75u+X2PS/plEk3fSUogiqRtjKiQqzQRTR4z6CY26JmBebXXDcHGPZTkaoFYfkTpcj+u5E3M0SyvJ0I9zz+Kzg+Vm20zD1YoyPKjeOGvbzUQU+qF9O61WrekuFg3Z+8WMyk2u4rqvOGWu7A3TLbmcXwSeRLoXGdla7KE3nCh/OQ5MoNDtLgFgBNI9gBVipmNT+1qCbo0zkIWRBagd4Lc20DRjBoK/oymy9UVeuxf3U+/Hn9VuzFhgRMtDm7Br97M8p76ChgIXRdDD2AVlKbIXXgrYpjvC5y7NwP4oKDz1ybNZ1tlU+Wequ9tmYv4TvYmab2Vra5Qop0ak2tvFLzs6bLcB21cmd+pRzsinIAOufnwTy+fTN/W8S3wQNW0ONHCPK7HF0NNsfVVhl8Wcb4Bq00dexx9/0EGlUMtJixQfR5aZwtUnIZuyOn0lj5mbc1zCO98za2vKJCfQoaIgnvcHy/jhvbbzbJB8/Fh7R6Rxac38Tq5ukkHklCxgvpBa5YkKISNGuvvr/OkGUx7GyNqFrQk9ccpRIdHLWz8xT/s6nY2aGD/WhiIPlvfrRQkkh7yJj+5ULQFgeT3cm/EMl4zi5MRE8Tv3J6+ifeEWTIiHL9zsAHEijLeSCq3jb5qROKShmaXG1McIR+Lr9XhBG9THr+Ckf8b1sukSOkAEM7Wp0Hth9pku+XnRndeOwcylsixTyMsaILlMLg2Y/bSD/4Ck3EhIAQ+jdC6DxPpBzLT8O5p2bylFLpxITfrzSqUHdljun7EIwC5GhFh7J6ML0Doj1OS6f9o7yLubELIj2NCK4ecb6BsnQO09pTlqVqXZ1Og6pmLKi7jdBN4Ii9JPq7N7tz8r3J7WDD8sw7/sLIlbrup5hIZdaw4cSKBAjoVQLvaauzB4fzRSVtdnMAU1siuocbiKIvfTp1BNk2s1d39YaqJKGSj+2M0LjtXscnIf4G1w23WsHsKKyr0PKP3HzrrSyyF1enn1KgxCeWpR9TRYAnw9dU/bBOyHLDQvLG37xa1L4C6taW0R+8HDKhfeGemmbWDjOtdjo1J/YKnOojpwV+ttC+W7xx0dMAE5Rp9bph9QlUzz2kCarXx23dsUk4DkSEPgcWh/EBmPVx9WkIpMyYMoFPnolfIBnuRxgIACTwwdCyl/6ZMBESTsMquXeLVycJ8RvH8SyjuqvTIzA2bnEcPjMG0fwBRAdRk8D8zpsFAAk19eYnQQ8YKhosl9L+vQqiMAq2dOSKuk1lhs6a2kJP7AZw1sSAZ2PAQbd1cha/shWmDTcpNGUoQyVdInt8/TvSJ5sE5SlWauIZn7EGXxocgw4rZ+SxadQfXcj7a9UaQjUwsXCGxrrVdNeugrBe12XHdGh5xgbpnEwnIwWbtRi4bNHfbt1qASQlU8Jjc8E8x+04U9iJvejOKVyLD8c0ru/PoHU2VvuAdQq8YYeaa++KkKpuW0U6Qbrch5GubomOMcQnnjduLuoAH5YixdJUhcWLJi0857p2JiiM2dNA8N4WNV2ZWFI7q4+w7LVdEI3mtxLfQaUjl3eustZnVlRwczBSXFsX/lDl2MpPZRMHXc9ECXZUYUGvupB1MoEoqH/KcGS1bc67BR9leYY4CIR/D/OfLgR2hGN34UeU0v+geQvSkERJCSjb6r+V536MN32Uobv6XSE3rcr7yodOIE8tSqhpAw6ZLXh3nw2m4lUNRGKuHBoKD+QgyQJ2kgkvTl9kX/2KUEKVLqISq14I4azGrZFYM1rLM/kiwH/xGEBZ79+lp/ogRRtHM+8d/Zz7GkHRiUWCn6P6TbQXVglMfv4ppmVg44HoQ7Jb9Qwn2qtx3FPeRqvtfHpj+2Qhm5YlS/FFZucrbLwvMbqNub7aIaEGayxr0vtc72pEiFNrrp2gnBtxjTm5ivpVWTRkcpwSfClSe2YGCxc8TLmK+CRXf/ROmo/RCo7vtStps9Od4PnVvjxPdY5BNAlb8ou0YAD3VHQNiRX7iI3TzxvGIdAzSvhWaeT2F+DiSDsUkbZsMVRMg4g5Yzyq4g5mYUJhM6hD4XALwmw5EECrC62u2uNq7vndwSIhw1YeFjRScN0PbWHqXFpGa6Eu11dOUejoUbE+u5LGy8e4LTaHityGe4ZLzH2VVu+/i8BTlvZG1E/H3dhM/NlAQJa0aARyOrjlS+2SmGhZ//7FEL1Uzbkrhsf/ZrQv4V7//fdpPfW5mCGHM0wZ//OGkOvhAjCeeYnNLbsUEpa8A3oU/9T8X6Qw/otmWvCRh2sGZrihihy6Q9Hj6WiJt42L/kmgvgOb49SGiAunErQSbkVzONPG5HbBAfsX/ImSe+41wEEmgcl1pMcfk/FwYxq7E46PCnJnpUYmQyMT1k3ay+bVA8iQ4G5jqelBD6W9SLzHgTJ6r4UaQtJ6xOuBmTmGDYoPKZEzzY3ccFSchZuJf6k8q9KAdEuLF7a6idXUoSL0/lrzJY5wA/5QOlIdbLdRNDbE8TB4Q1lLXNFiH/dPgDyYUiWrxG+TjdCDK7cx7dkBoy1/75pTb392h7cJzj5/W3/NEztsAKAXuczhTsOdPD7BbK8gtEPnVBUFpL1kKXBmfmKEVEC4aThU5XCMcsV8qksbHLNV84ba6itBb4KZ8eJAjSTUTTuDNfN/DmNl2s12MWD4ycKVbeJeHosX/ky0v8ykdi8po2tVHofeSelA23DjHyLHG9LS/En+1R3boGl7Lk4kQGa2jgpUrBCCE1CcxijIK+wHvFXLBti2VnuJmutJ5dFvswd5a4HeTgL6EkBAY3lwrLnY2EuARAWLtyJus445g9jkS+L3kobZVaHbGOyBLSZSzE6BsA5d3NxPfpBtPixL/JKBIJLdMuP6NtGSDhgRD260Z2kpeElmLSjmIwVz7OoxbK5sC7GKIJxUo8zgknASj/Tn3OLAAwwf+hUl907uCqBx+JUrucLnb2C1HqfiYMoIXDCcO3evphycbLw9o/sSDcwky0jGBh4BRkkXfmnlYKvFQHL0Ok6GbwQbbWVe5Wj8lbcoyoxf9VwK/+JK0n7kigEdsstZY4ONZd+47hI21TEKHdc0vgMW6X0yOuBndM7/UuxKoHwl+diclqQM13oCXKWN9qxtjdmbV9g60JP1+pEHKyK+Gr4Xt7KkmVs/lzW3nLJxf7TCCYaZENwrPlvw5XurjeI6Km8Okns4tUqetc7fHykYMfQZW3TVoQzGPBjFFsRR6yoN1Lj+/JwyZXJ2ZEyWPKIDPbh8VV+qywt4PxHexMjrK5WPwZ5oQUb6eX6RliVQnUZQ2popHC4+15zwfD2APsTx5rgp04andJhjEahrQsy9VpWj/LJuE23vPrWt4pl+nM7q0zvipLy9dyfwLYF7yprNjYniYVFKmQV5OBfoYxRx4NUNyynVu+IL8Eoo5bvQ2mXEdc1EuZEKeGYOUEg599SmLURXr/44gbFhyLLbb8TmiPOEUqiJhIrYlF6u6ci7XdAATQ/q44trzzI7pvCbYamQvBAmykzzfZeLGHoaP2DyjbfMHl2roEBeP23ZHzReu9VyCFz3G5F6k4tfgj1gwwheVuzY5k8q9QzypYXvhPVnCTiVfkonJ7dkhNQP5XCPnsZOgRX+oFymmnCAplm/eg2cbR3atvfMXYwDgHJHAcIfAbG6LAA6HbW/b05a0b22gaOHRGv9ZeUXr/ps2pN4V/rkhOz/v37NLctp75GjXD5JFh7p3y0hRmpq6RYqjqJLVDt1Qqk4wUVb79H4cXtjGpWrDMQtXuj5XdhkKHikLEFX47w5vKcGplzVjkEAKfev5lFV4UBHN134ABilNwourxyk5QTObsAaYn2DPYpBPo1lOhjQYhMo4oxFf2ujMBG74qOSieIAtya4RuEQAyKwEtXFofmgZPO/zLkqN7ZNQQbzvdx/Uu2rb9yQT4401HZNnPTptA8VKDvUyx9/6Kb6C/UFenS3NcoQVLjvz7hNDIbJbLqZMxN4vNVN7B4HMPT+VmYVOvAFxMvooTMt7FYef2aIgicbI4YK7JEH1GHvyTvWWkt4UkcIljOlgBhyhDNJbFSTktc1C/BhKjqLHDBe8mtU7wiWgThF6633nq5rqpYgfrYUfSH1GgZjo4cmgpNuKxVK9r8uIyQEC+FfGXw6paFGdXmKqC4JTajSqse0dtcYsTM99LekBUqRuLKiMH2l8oS0r8knHyfeaTJSyLlhUcWzzYLQHYrAFM4fPsXEMlP4IcIZh1v3/yXIunLTBqWD9lnysVmFqcBqn2Vi5nGwPEMBKLSZPz6dwD/XTSkWYv35if+MZftkgk1/ZQHpXupPg8HwQR/o85JqZ9Pxz1+QM8hxWy5ht+e3YQwscZruYuaA+ZWOQ2qWHEllZBUpajeV8T1wc7PR5kLrqlj2GXRqC5IofoI43FKx3VN7FTpRUQGgZs+qiE9vq7eDYbM2vSX83eQ5z1phRR5pYgGusbfGKmIdELnhkC2rvAmWd91ZE/vt9wK+P+e+l//7t0iw/XjVjm4lDteqksEm90qyWOyN7EjD3ixqb+Ed6w13pRgr3tsilXPQif6Pnib6FW8RtrQp0GtPLk39M+gg5OHh4GtOmDMRCsU7r3Y94QNZ52szRypSGTbwzK0iHEdd3yfL4bW5iay1mi3vNmw03GVD2XXRAdRG8DMRzneq2mvGuZ0vmmP2GzUgxDXeNBekRMQCCqhqGHRBlU0aaqMc/EToOOLiCn2K6loiLQ9lwP+Feta5oZpBaLBMXufGJtd9daxboxmQbTgYNDuwVN1n/1bkoyqy/Q5p6Hh7Q//6yrJFkxEDpvMPo1HnG3oAiU0Ay6KYUg7FSaNGroqNyY7goSdxo8pPrKmA21AmL9Hjx+F9r9K4LycDdRmEjxILVKyW45AH09sLvg3buPIzeuajfU0jz78Ak/5OW8UdbduMGucgw8uFQZijFRqt20wzCjN8iQgu1BzNNqIzii6rBxxwY8RxnHbAgqV0LAX1w+sPOhxR685vE8W5yNkYjmd5/l61eUp/Y0FJi5zjHS/xYH17Az7RuQqPB4eAqi7x6F9pKO9uCaiPfnihNGuJfawSqACMTKU0Dfw4FdAt/uSjArsmRgLUITzJVr43Kcqm9BBRCecyzRTwrJUCSg1HiaKqGt1CJXghGaBP4YP4otD4IlorXD1o00/Eb0OOl+As6p+jb7nEOlEfqfsP5YENt3Ukv7Og1Hgejkib3uhAwFtkUSVye/PwPDNGxDjPQGrf30KgyzCejRMG4pfTognFoucBZ+wqsCqhOC0wOLdrhn8FkDohGVI3m87uOGaF4i+4Fd5Iiqou+4wCNBz1cRhsc+7ky50Qz2XT118tetXPFJjU3JtM0AtP/aCB3SalkIhJVhIs+UuMpeqsOKdEqg3Rtd8AKkkcnvs4veSlBd/hIaX5R4hTGCEDhq90O6ag6oBdrC2hALad34B/Qp0dQQmkLpwIjskoycQ+K+6/lks+zd7LBUClZXDv7OD+5L0UJelMmFj/s1gcjYzNQ5Nv6NFW5Hc1R386sPmILftodI7mJgDNFoaAJk9GkuiDE6cTqNNGzg/+dp3ArHO3gOJR7Kry66xHBrIr1766EOc6pcS5SWsAIY2vxjO2ewizpPoWI8a+kJQAjuykGZiFkM2qfznz96y2BIRUkFD77ulTaiKgeomWQYB622uKESge37BlvZ9ifXSNTTysipgjrGmJSueLNenDj8Q7ofTVI4Np5shrjCOm6dawavQzhyrgnyKBtKoLUUc9By72UpyY7aAVzv4IUEMbNwRIRDiXS4FG9b0+nwNQ7cxGB7fTIy0XjRxziNIuyX4ukxj9t+NEneT8K4s+no1I8dvBa1UBOl55NTJLCCEkPrjNiQDtgwfOz6A0t8GCgy65HticMs4w0Hp6kPqc5qKorCfcKTix6yZ2xWBYgaBQFYMa9nwRO9zacF+nmiIRbz6zXwIWpfNyfI6Shx1MnD9+M8GoIajYck56h1QsSJ1NOUOCyd5Lc/z4XDIHnWGYvjt23rZqiKYx86S2KbFs2dGbYNafNDY6XNV3gyScS0JzDxQiSQmj5KVPtYWHzbJqA5MLrglQIfykZEUK0kBR5XxLj1diW3aoX1yQug/nSxXuvZmD3oJ4ols3SVOQU10IrZADgUjfz9uQEtCOtE7kJ+k/XPo4dwUlWE1JRFbBLGsLLXZhldYu/DH4bbOhAtMeYDYXbp98m8Hp2dR0hzAojGC50DyCd9nsBCj4iGlcIFft38CNNXyLgeTlmdnydZog6WYwc+arCB09cGiOid6+BXIVRi9J15fhqDiH658oLOKEayl0zlB1J1QZtuKj2NtsZEniyL2w6JDz44CPFhHgta7R7p07+2KxR+15mNsTr9xt/ipnzTQQL5js/CpchguAuaHgjzt+r93HSv+Xc9ETNSH1OerbaHYsUt11UHeGzu6DvKwLEZr0jpEc76JezfTazvMcUcdXiNrVEp0dFDbtkoIHypVr7kJxMMc7uaWHUVK6lJCTbnAu2PyWbB54yAT33iv1x6QxTlPYEjiDoBsp+I+n03xtOcq9mlbGgVra7lftJMcp5FrXkbv85T38YgEgRT3WFIb0THtpfNevgJaTVuxQSkta6SIsAWwTuOlkZS/o5kXWFmdVMvVoXTJlbPmHEJsMlTao1N7xbx6m4pnEzU4xNE26g9agOM66ctmFkVSQQkCPv5bhq15WwF4slsgm5qO2uET5loWLPDa8ah6jAI87irNq2/6AiduDs89lNaee0CPhdhbpsJvkmtVWrmJ+b8X/atzVd2L/eSL0FfYN4Ix8AgqecrNdN7kf9W/+Cv//oMN/lDJX9+758Tbut3z4m2Zeqxw2b9pu5I7te38iK67hoP2+YJ0IiBNt4mY/DWd1caooLIovQOT0c1O0gbD5/eNicSFCEv1DSLY2krSZ1ykc4KKX8pEXO/ghQQxXgivK94yC7yUrMGnUPPG85YB4KF7rnTChC2WgnKV+DbaXfnKTgR3j5auXT2piMZCQh8vBDYe3077yrGZOwhzlBPtANUa0lUWx1S0n6bP2tqHrVEVtdgswuNDZEQZtsA0j6atIK/OoHaBqESvBcWTMKzphNuBRF3ehzcukAWn7MXGVqXgblVVZLDLa62gm6P+1hjDKIFrG1F0FyqsAMhmnq0aPlOX1H9e2bgUsuza9o5rrGtZe0OVmJcSO+PD699nh0JXoM272egPWgpVRD3SAYMmWH+radQKFLsfvs3ZBAlA8GTqIGaHiW4Ch7JwYM4Jve9e56k/A7YRxrQ9tv5mN5rdVNa5fybKu+ELCoGGXC0TCgZ+UxbLvEx/AWSeY7Cje42+erp8HjOyu4oHhPQbg9SAWZtEwNVQUhZU24SsJ/wY2eJxpOhR725SYxQPdZ9tRpOo9Yto5hTDkeNNTBOdENcXgwIVLreJ6V8VyZuIf9kuRdDUhEwmw2zbfkQcqC0C6QKQXcblhMwwt2gRpvpzCR6YIqkv06N+awINlnFjLYXBX8zOcYUUb+QphDCpMWcoyVvlOMRTyWYVc3wXlpo/NqTYyv3qgazIWE1DTVXQN+H1qUIXHAUPdSDUb6NpoSVLACoIKhlZQjONkO/ZYcbeTmGT5ZnVJe/LFb8IoRci2+6dCFHHuzBw+9tu2GUUqmtaGDw/ax7JSVhJn7caWmt0SpKcZN+k3a0uv0MVb3H00o9V/fzO4WAk7epf8hff6cLCeOqhvrRg9icim8K3CwbJEViZt4urVGAxGuqfi/Uora40oAjDYjgQGR4MyhNP6eedRS+avmNITJ598BAduavTiWTQEFhOoXEhisI6W4F3y9GRpfbHKMeO/Ec0kOuqXTytcBL/ABdU2MZd9iQfrbWiF456lER1qcxry2pidEhtc3+CeyN83PMhoKMK/HKKFW1rYc6hLDh4pkY6KEtpkMkpr+sxH7ICELVnajPFIAW6JGUlKCQ7uQznhaJCQP+tRkQmjtLyFiYQNUXgnlijIWg7UiC9ACkJ7J7YatuqGFWCbwRmObEDa8TE5w+60Erz4Lt19Cer9xKULcJCnXMaE5XgJ5f8ndL30wiydJy2NcWMRCcAVJfOyTksBr/eXAYTxg2kq3ZPmotFepdR0/QPlNGTbCGFyJ43/LPWznS3twpHb/BODgKMj5fatSR7wHxlVP9bo4lWajdwpnkv+ETYx9Tb9DPDlCmmBbWDJrsUvcufE4yrZSeEjfYkm02xdrFvhMYOPcBtRoJElNfT7Cdce2sqVyozg+M2XmxS/tOpWthyeT+Imp6oCZq5jl1a6oYkm0anhY6CEE01hRJVk4vUMAwuCxMvg+G6pn5cNEvJToP3GFvLSLZ4Vcjn0+9aqCh9vCY9wYSUpvaVTs4iCqOV8NxfI6TskOIDJgNaqbmU3eO/I7mjfD5UaXFGBfca2E7uXqE3Zx1YFiAGdjJtEcYSG3kG8iOxQxaAhpdChP2txnZn1UCMuGFlaqy8BcELtQssVreEmDU8fZy2Q8Ipcy6koCf5vH0UBNGBYLgPHxnOj9C52S/m/qz/a933517zAKi5uB1yd+sAY3aaCvdeQbm9HD33D2VZSeFZaP+OHtpsykSqlvFdLgHgjEhTuUo1kv65FQEl1JD3seaNh/VXVh2NfG7bFvGf1eZuzrbmnJWI1mOFrCVFIMi4LlcsTMEQJUw2ePuFxhLtfnTUs4FB1sjwU05A2Ah+Z5BIY8HKpiPN5VaAE/BkdbTnR2yBrAyOeW+KC1I+4JjVxPlz8FScYZ6ZBVeb6TZhYohNYFxOHp6piXXfv3PZtAVJJ2oxbLOZXRBPR3zkYCD4BVojF1aZquf2XvF2dm/zL8ySod72ps50MZ43arOHqGqMI1pDCVryp24C7WerL1aqLYZweiqdfQFx4+cFd0kOnBha8FAkq2r0mY3wqeREzm5gUh8w4+DLNMj7AoVWp23snW2eZzqB4LA/QE/+rES092c5Ey5QDJMfahzgJpLr/133q4frXTFbqv3xC0xVXkw3jeqUtRxRV8Cd17k98I5fncUqEP4RJdtibVsAcz/Agwfz8dafvCAap3pJVtazNFlcaAxmkwMP0BkEL64wI9MQKiyMMGEpqgL8lS8ctphGTEDMJvgio7aM20zN8VfRXCA7C0WtKDHcs2LdSAZidT5iUN9b9KQAwBkekWX4tj0e93rNsjdZnZHPGlJLDQMZb8rdisX/9Z9CKWQ/3MscdsJw7Hkvu6KO8mvjsMtNBQsWgDdZ8jB3DUIUO7SZuDilMwjkDD9afEvYplkyOQis/N79Ihj2KJ86Nqs/4LxQ+zAT3sQQB9AuJpaWunaEWKsA/a+1Tbdore/p7iEpKhmoaIZc0IdHuUvJ0hCkJNmugNr+ztPDhtw6qGZh06alkqpE06GpLb0N5S9/vyUD+a0BGzU0auy7hze1iUG9AJxMNb2WOG0CfVFbPtEr6jndnA6N4/qI+qjshyCBP63Fsmw7kVFZ6jFLEYGM6JOERsjxyA/YkLig8ghWBOFlya/OmRyMz+QhcZYo2Q6gmG9FEYmYmYl8Jnab2N8uTqbeu+lMOzzeJSezDzcvT3q3p2mKK3rMMyYrb9WSafQsq5EbvpPs/CZp6ACupmo4pgyrIbnASubTq0/bYAy7MAsY37z/pIpGlUDAn09ALgU6bXzPk+rcmUQ6Gw/A3HYmQwlOwaFwnWFcqU48BbC/lYy17E8xHLH1UndY+Bq3Ym3NWc3tj0sqjBbI5HWCGHdhOq896Ftx3905mSiRk60vKz/fPkk/KXa3i1q8s9WXQgJixSNx8clcb0B731I5EI9RLTeyr6tUP9uA5pJ7t3mPOVSMPv3BO5HyrOp6xZ7uGg+Z+5VbqIOXhUzZhDXKo6V/Jm5G8Ff9yH7HTxTZDg3nKmJdd6IHpXGMIjk4dFotIxAVNwTk0xx2oIX7VmQM32a9NMxs6ATfS/bNO00N4aVRq0dmeZ9tl4kVonmzMRvI8+/HjwVFkcuWA0JOtnnd2QTdDEzzPAiI69tm2UJi0hQhlFZc0yzD7/8RgcnaxP3m0pot5sVSarvGFDPyLcQSZnbBudzw/kIME4NkXetGTr/x2AUjam4oJ5kdzeeV/IZnq6h0OVQq3VUgKkxex0Z0UZDcNEU89Iul3nrSiA5Oh+l7EGWVWi10u1tvYCStjNCPeTck2GCvCTX8KmM6HKmsmUlunr/ABRoD3X3f807riZPsbc5Tx/eVl8SmFtqMm9sIfE1670UEDlEC+2JqGJXBMMpzOra5fNM5rBdvQMJeND+t0uP5pVi9kq9/+E4OUlsqwc3EFK3Sy/oPUuf1UqKUOUoA+ffODRXn7H9FOH2LQkTMtPXlcBzWrJHj8Hb/fruf4dIplajZ8tT6RPKO4b/bUKydQQ3vVKckq4GOWvPbCgGy0dspf9JlEAmJM1QF/Ho0aJVwLIHZzZDmiKBXeq4qRo3AQNsSCcF+BEAuhsV/IaPSGJM/IW0Xo/3kKARt+JdjOL+f66XabHPZfhX71UNmrVzQF5RkOw2Tcdo2pkuXSeJUKb0JPiKXUIK/roRTaOTcyqEpDgocwfDIN0+tHdIodcsJ3vgdyETwDHi2XUaUqJR+IeulZAuqBDi71l41gkZ5hswMOcLdZmHqpNhwWvc1h6hDbHV5sQCZzVvCSFKuGfvc5O6k8qMIt246dERAT6mz1ilo4RFNPxznuX0gAUZMquHIcJqdZc16HFC2is/0yiK665jRmfARPV4sWNnjjePK7k1zxzZACylW1SYmMpFIaoo+eTv89HiBJJ4pFb0COLpp2/YckPyx5fU785V0oZIs2kSCQNnnRByrHfIr7f3ocNRNMBQnKJeF6EaPbLfX+QZ5pUeaFKuIdLUUcGNDdCGMU4A20iBJ6EyWi3RPTKi+2p/Inckkkd785ES/yveeDIXGkH6KhfXlhXefpGVfb+tvzbXqi76dyhaCyraS/CGot9U4YupWOudo1e9gqiQ3s6vSV9m7nJY0XjQ0Lfm5phw9nKIUKJotNLyLumrELetdkI+ZZeMzro4QJt/G3kUuiIA20Z2OMWZMBHp4MHLDgCL3ECWdM/bW7NYoURH9bfpLOoWGi0XzIN/LDixhwmju9vFmLIW/JgajnQRpiF+9ZphH9KchsB++fZNDeLkk7b44I7IWgP37jLo/8GtRiMl3mLZf9stQfup1wRQNJwWv2nD9xiw26jZw/TV1XR0h/GeAPeta/VyBhyAjK9Vf+tsgUK1d+XOryQyRSHkXIei4tpq11f0IpW4tPXZrTSCrwwQpTU/thbOeWaItJiJoLhF8Bj2dzSxegkTMM1GRKUDYaUruUYMTF5/NFkW1vrrRQQRHL+kw/nzRWa5PyySifm18Dj60z3XGRN1CQK6mqvCV8Ni4s3mxFr35CUctjmxXCWsFj3LpRiZUAMuKa0tzTUhmwj9R1bxrEQFI7LueWncfMjZjbXTsNe233CnYvewbikSAK+ZINGAAZFZMCaACdETJXdBQ6H3K1JGBUZzUBoQsOQCkHyJCCN/lxFi3OeWkCaJp9o9Lk8GTO4cwK8MqzyRBQcdYNlt2Iu1y9nhqGqwHUXeqtLRZeQWlGzO4zW50Bf5+i1+X6B+Q8P7REcag5XTssIW229/Tow6AbVvRtD47LqN8F/PtJak6sOBd4OlHsciCSEA1rAxfOkVfPbMsW/cLj1bLJMVg9LFW1xqNdpmUjyGT2K8MkQfgsbqgwJ6/UIbhWbCOAeA56xN4puM7ibGS1p+Vx7/JOy8ZURPLlt7kipx4usumtpBfFN5Ja6vKOPTGJAY/MH2sd5Ykk2UST8BZ6gq+kcbOEkA9cKAmaVxx2alXKd/BnVZll+hXtmbWLpr3lAUfT0xnZQOqy2TOPaSUHRPMmlBvyrvyTv3DTBjg+HhdIwgT3kiqnBwDaSgkzynhT0PIa5ZapidgCK7WJQILoXtmW5W/j5iBgrrrjiorQ/zeTpJ3/5C8+0KsWZpwCNJW5XbYmJwNyPKuW5f6D/zlCUE8ik+EN+jn0J6Pyo79F0BocBkJ7HfIeXYx0N9cC+stqeqh2N285zS8hKocM5m59cjLdDI5UdZoFNcHQ3wjMHfIfiHAjEqzL7RYmTLaPOli9gI+H/pmetoutI6hQyjaTzMn/krT0dp0UvLXC2g4cdQXvSvggW0O+AFFi2OtPY9BB0Z6FJmRG1+96jeEqfovNLdoleLEMpizUkCPU27ZY0AqFJCfEslmneCOmW2/RI92ZK6nSk0S598rFJrNCTY8abTJ4ioSu1qwXHTXdVGBLz4wi5C79jL8u7r3yVOC45+sixcSaQtc9lgySLqCknjedlZBQ/UV3ya5pRPoB3c9rvbSPI6K47j3EmHWDC5hUlqUFehjdJs9fLUJK2NTTzt6JisNssAoJsL/5zI0ATaHc4+xqM8NCdD+bo2MPiluYTP+dCxfa2hYONN8ShIlcu3nlh0HkRy3m5dVeVDlS6DTOCJl5MV+lYZrwrRuJ5dtGUoWfRrKiI3w+oRW66XeL+NWzvBpIOUvSFm3dgxk994paYn5rNGHoM3zfFKpDjp2EjPYdiR32PLaCEBGNCrAAYmVRlVlDf/zk56xIJAjFtvdWZ0B9OWdbWJbrfHoeNuOYjKaswLYURBF1hgwGxFeYPvXK4ibP6+sMnvqIoM/BKy5+v+RWv8rbjbnHvjnsTCugZmZJ4Ma/PZadtus6r2NbipodyPF5PlI1rtVqo9ub1eLVk5xJb5/Sy4VrNyFQfRmG3TaV4mrBbhrVdx49agUgaqnecIjSBYlxsyQXPjwwzrRLth6KYa4+jIwd2C2gY8mLv/D58kENEiOJNg773K4Y1m9nMiVwMcmdeZ+dXafn2AjhdjQVUH9G5DJThR7HEXRvnMztX1WlhLVTf/YCZhjv3Lpg+Hs3KHnnPniUDfbRBcvMaEr1k+ae2Q7K5jKO7sqbVFGrIdffpol4TBP+uIev/8SaEq+mmFTfRvg+g9lMO1QpgJLBzkuGcJFD2H970gunSjKiLuDUoFbx8Sq7q6OK6NRgtmH8eVAMuQfbSJ9SZqNiETGIia0T1D9To39BD4VVab8g5ujua2Z46WsDcF96B9YNP2Q5b9M55WXpGwpfBodWs5LctLrL64KMkLeSHornKfnmyEXosozL+MitVs0euDwNAP6FwNzkhhOsbsNCKxaDxmaQ9WgcItJnRpAElK92mAas8sh018IDvf9/TWWj42GJgi5vFGMNGcT/DXbb8vc4lW4VUyrNavHdq7wL7i6ArgeeNNZqyNV+gC0h7KByoY+gMFX7lR0kpZkrKAxckWCeYstwpMADWPiOZbG9q7q2QqjjV9MBx2vJt3eDYA4m6M+h0E3HtAs88kqdbJAnHvxRGAxWEMREVq7K3K2tebxPlfQvQqHdTC2/cSju0ijE0ix4ZuxbkF/AU8c2Aje5PtyXW0VYB9sDBkiRusGQlCdUSdIt44oaZ/NP1s/26cyq90lzaeRhEJ4vne7X3Mwi5hwzm9lQKQAqStPj4vSqL1NFH/sVQ78knWokPobmHOVn4U0Yh6tIG5G25YAol/I2ZKSUdHGQ1bw6NAA+cvmaUgKyo9jV8wCfRgc+sGvooOTQndCulxUTQd7qM6XBpFu/mzqlbB0jMfZtJxfSnRzrPngWCReN4HFmli1Fb4jwT59r+yxTkk/6YQ+FW0onvFvgtbdVAgA4Z9VAWXHgGNxHf5yY8xmE9z7TnVdI92FQ2CLPMAo8ALgKS/3RMCTco/aQNGFoguhKTN4Vof8Xlm6Lai4f5tmeybescNgmeiQsrOCM6OKzkyMec2jzSLAK5C7sEw368k+atYBMbmvVznmoFJFmIJGKtfBQIWImPiJRehKfzlZ1YsPEtIq0j/jjY6RVZASc8hNKQwJEIlQL1P1IMOdCwnba6aLOfWVAF8jQ0rtvkwNZQy37ylsHcLm/yV3dShBp3MP+3zGEyNf528WKMmx5JX/Yh3/+FC7R5Qby6HI1SgKdGSMSeJp8VUngJLfy8Ao4KRYN0LWquPDqYFSDgKXE7OevDcz/T/E+DPQkN5UiNwmDKMFbpghx9tL7NcgxyBX3bdS//gVxUfxNL9xiuk20ZeaRf1DWtaIbxb4Mkif7S52/0/xPj/PNDQDKfCO39SWgGTUKMWT9pUOcN80adNdNSF9t3Xy9B3yM3GvV9+TPOehSiP2Sx7fnSiLbmWWOPYEW90bT6GKSwyebRWMsn2dI/KYmwMIVLkN1idhIasgnYLm+Bt/C0IhOxAAWpnCABRWk/n5hXKD354gVZuara+lWBCXw0iNy01yOCNL9vWw417onEIPvXQxdABjJ/LcwfykX3VryeK9xGjlze3W8PEHcDXl2TprF4C58Y4vEsyHzyMTG0Yf2Df+AMYoK0DGlQBvleXy0sOJ8Dn8oPSd2M1Hw0ESpBv3bgAlkhUThrnejyXSBKiIXDnkvvqm42Ba3gu3pfxuFe6kqLRYiKLVDzXZFkBSUg5olW7fPDGt3r/nRw0qwww4dtYhx3QjUFmJM/f+GESTsxLFJhfZahBGqsMwVMJC+0cvhNldT/8bx9JPmz8cgvRrbGhSJktJS2+5SW5Y7TPuSrvIwwypfLxjxjDKxdhUVAsHzHw+PuKyPgJzsWsfUjS+33bhNR+wGoIvnBZBKMZob+md2n5VJ3TOHGhN1+dCCOdQhXJ4BEC1rNabMZXESy1Z6Z8E35kUZilRc6tMTWYW6HjI4f6nSl4ZbcPwSMw+A+3MoKaMLRD8kJSB1DE5ERv6ydQJEnQtlDULdQiG9XUJs3+zRZfmG9SyixaexllzoVc4PxWMk9uZ6sqjVe7ftFRDyIwpqxpIrF5qPsv6Oz5uDeR4mAf7QuUEkz4nVyBjUoYVEk5aOxF4IBNGqryQ3h6TOGTCz532Zr03byuOHbD7jewEOuHe/UDGRtn65weWBLM7DCbLxUHJYB4ZQSRGq58v4+I6py3yMTx/ctcWy88cqr3KBXhaQH6m0sScF0gnvXmzHCXUjJIgJxnNFJMOxyKJPdBwDa07DsNqTSuyohjYufyAqTsqTuwrrqA+xaJ9zWXoi1AX1v6qY3GFB50QySxnrUbzHFmGSIcIhsyul+T8+NY/aTHqjpCXFB4qn1mNPYFDs4CIGUEwKroMbJVOQOKcDQIEsBOYwdTWd0AToioPdqbosZWrxHOR6ro5qCPc0GgSygxOZmjx22NquAfJbWSo8j+oEj0rd7yrfYoAMlWMXFhrvD+fIRbWbXYdOMm2P1CuD1u/MBRCBq5QBjIY/C2F8XjU37WBRXoA0GLKN8vgRVUjZl5oiLAAAK5h25ptxxZfSstmuPrYlqlMahxMHAQB0FOc5G/5lPAIoKgniM/ug2y7BVwGOSV33tGhqb6RtRK8ZJlc9nvN4GuGhIRnSXvcCZZqfRWh8zp2LabrNU9XdvLRQgq+oL9danB+ge8sjE1oeITQVePve2XPghxstul7moMJorF/gYISeBamrDpoQl/ZeTu1IkNbgjzGnTJeKYPz+P2IDIiocjBzQebOp8NNBGyJDpWFkJ2N2QZsxJXxKVyS6h462re2EsDfXYo3vbtq/WaGHQ283oX3teEXiPosmSxdVcC+W9xtL/lwk/o56NnnmvlTUtO84TreLBlI+k44s4l6oeisuz9UGhyDD8yTA3nkcyysoNX5jNSKbbfuFRPgHkjK7pXBQaMa7NczMq34kzJwGz7ANDHvaWyZW/FxOBuUdCWD7Uo21Q3EDdcXTYy7fNZ9wDoXdK22rCinL7yCZnyprymwIChBXz9cq7sYFuCUbVzWbhYhn8Bt1zfbqIFBOPtkkOB5t0olUOarFeOMQDGy8i9xP6bFS4E9xdYbra8IcGDq4Dyu2OMHi/3UfyHRlyjKIyGGFaubKPi3W5kRE7nraa4Wfm0pg7xle1cxBdvHy43KvB0LgGGYFeX4s0Jn+YKWSF17jZsttem8vpHViyX7Y35IWfte7reXsBfhYwRP/zqMBlfw8RRdNa41B9ayk3ntyJp+/Eoe1E3UgVpGMjxxvbsHSPhTCN+OauzO14Mt3bTENkYiW+079uKtiTP8h+ZDYJwRWEfBCnbLv1OJnrwdc7/ROodWD45GStF//wJs1kXjEoXEusrNP3OsZCcf9mD2Jm1ZCk3O7dMx0IIQsnLWjs6PfMojJvZKFKxWSNsZIr2fdqobR1Ejw8ti/fI4Eaw/4PgFn2Jb/gsb+pwzfDYstkMY4H/MQxNMLb9fJn43brCiF7azlRjX4J5K0I8ofbtayqVE1zZEFqYRxCz7kK1uYy1bYTSVFtP1PdhLeEeOqfKhNI59F8y2oZpFpd6+RoYRpQzNabKo0YWYNyso6/7GMIc58urCTXgfNZ5I5OvUtb3+Q9kcwelIklpUMZSWfMt7E9YZ7wKClRSSlWzViGfOVt5+Vj+EEC2IP9mF6VhdyYqwnaRZzpXcyUrwVKJmaKIl/KVi7vi9Wk6T42WsD6N4XVu1tSxD68wxmbIQrDV+K4HlWy+VZJRHwuYEhxKr6bfsrPx3tD/sNjyyKNXWQ3O49wJvPS8X4Dw2l5C4Yakek1Wg/Oww0zUz55Hh35M8LiagGKfdTvaf+IHyCXpVxz7P1jK6X4DQAxj0VLho14iFsjuPf4PHX3NMhg2YwlOUiTc6+7xMo/7v+X/9Mg/mMv+NI96M76Ke4a/RaWJ0caxZWjduTh4Dta3VZ9/AlbvrncE5GJW7leUmnQTZ/31SZH0jnkfq9/vTQsgLO5f23zYndD4SBmNY0Ed4YbXYoWCJf27UKrCabwaZ72BEjsOZ1pAJNdTWyYZrNDsiBZ8bQlPVOnDYPADUsHY69WpZVhoq4kyAj3bcyQ8fDw2cQ2RlZb5+eeY+zvEqIKEoZns7zjTJLc6fvgQ+o5+mS1O423RKN9z0Ba/frdN4jnE0NvH3voxrGomu3urqUhOz6KvGYaDBkdXYI/rZ/4gkHbmHUYUwG/0yvkG+GBhk2oTyb+yVoxwYDeLmUxbpHUGfR4O+CCNln0toYgpY+CbiioJg+tTQOsNk+afH0YaEhjwEOrCmDucCwqEe6sGZ90NSdACdCjAKjz55ZqeGBrUamrn91Elxfydtt5w9+hNpcbMD1D77JYVr0xmJ3XVHqH3vcTuEhTJdAlzAtrShXCayf3uoOcbpWjS38PSJASIlXxTc9en4Uos+I4L8DQya/x1c+fApIXl0VM8pWqC1D+4SvZPv4dkqkz4kYS6Nfb+fx3Piuhc7fDQr0vyfUPTiA37a2lYyvnHRDegNgWTXhkyIPCpxKWu8/Lt0QSdeDGgWWbbHFjVfbJXY6VhJjfPf2rodC62Z6fqpg+cYdTymTEjOWDHdMgdZ0XxsQrYreIEBfcluGiDaRO57jLvLvj1sTHZMe/pCEaSUtF9piWHE458C9zFKUDoUxk6aWeJe+dnGN8iqyJXx3voWOdzlviTEE+MCQB0FzvZKzlVrd1mvEMNJbxrXo+1qUeEv4yfTxwKGp4NZ+dPt4pZsYnHx1qhQZMoBOyNkF18NYIhWOr4HjI+Sxrr8SGamwA8zkSo0Vy6HMIvQLnUWny9+I7m1C3Qx+qcoyguf0VYgq80LkD/izqbXMPJlRoiKswlJ7yl2XRHxXpFGb7G6D3pbhO9bkLNFn9wPVcZMFx414bxgjkFue/zavgJn58ZZ5QaUk84uZpNWAnIiCOJzV7TA+Z+y5y/wpSn9G7Fnn1ZQJYuESOP4SAnoM3OajIEFpNEBGLU58p/6kV8mkRa2/bzWaFY+o+yJ8o9gBgqfbhb7Lcwm9sqcsBJMWNgntRVAK7luloDJRzDkodFiC3jt7T6IVjKOqUdt25zS7N/6gx5EBIWPm5P5hNHf8+P2m2j6ZCdJr0FYG0NezlIaEVLkx1ESznIR9X8KfurxNAaSXEqtWEgmTiOExTucponhd7c80EJZFyoNFOVwxB1Dk5PBNyAPONgRl3M1OtPcc/tV68UqVkNgotg/kgolg31t5MsHhDrvvPKd2NJ705Eh3G69wjWwPVvnJYETwnGnTacIJujpdWUpDpaJKIQRNTpUG37fSI46urPfN6hy1cHGDnAatDlc3le6NBC3C8XWTW37KoILB9S7ux5TvShoAOy8yhYAXPQxUECqbuA4Y5Ifi1kNmOIS56CK19cPraDkTqtmc5bRY0l0UQRX44b6wq8vb2QUH/E0tmQdDYwHGMMLfsNtm6CnWZ4BhXU5DlzDbB0mf6lzYg4S1uoFeuwvTNaOIRGPO58CtthR0JN4D7wHsGq/vRxFmmKTw7TvQhECSEJ8rukVgV0lh9wtiAkxSGeWQ+t9WAQPha+F64ozfJiqDWoV9Z7zF/bkscX/QUR//u0n4oxcWl/1ukMMR0vqsPUxaNWnU/BgMgeYNkDUO1c+/umc4EcRmrN291JnuTddJii7llc1Z1DmYfZ9bI+UkAJMHdaRfh385pc82S1fqD/oquB0/Nml7JSYiUY+He/1X9Y1+L9u8+7xPCZ2CCATm0hhjwP+8khyplRc+HQX4WYuIP30/A0r3pv9JsXg4RVpPHBUksTkBFbECZ9C1kGAbPw4wC73v4X8Is7pFUhz96O3XL2CY7qbHVMDi7/9r32Hemlw7uuE4sWyfibSGCIR311DlEIHJ1e/WyjhpXkdcaZBMEpL9OcoQ7GvaBObSV8HJWJ3CJBOFzhGY2doBcmjx+Iz7S7jS/BJ8vqK68xWoR1gt12QBRkJXM1xgsGR3uGwBlGzkBDKztp2520lNTY0nVzw751KUKgI/Hrtc2RBWSSG852T+5/Y9QhvRMJRpYQy4ot+lXNoae1a4+J/ZmTrhHXzh4JVu0/ode7keNkQsvGHXlZbTBpVLTId+/D7qWwgUpENKINs1L364d5Ipl+jcgv8hJCu8fXh/5GScprUVtC3QlGaDS7LYuR3KvL8tSTwwFO+6rlMMCz3TOCrhgSBUva2SHhzZ3HD8CPX+x+zgzK8vQZlBaP8dMSOwzbaJiZ5+81wdDF0PcTgTUMfdOcnozf0XCSxcRYCXZGKN41zah3764paePT9lYT1CN8o9yU9BcWtnEfGx2+NiVZvy09EIiosoJl+mJgf3+KqB5Nv3RIcikKr35oSG2dRnRipeoB2HNkZM3BLIuMVoUjJ85BsWNJwhXmMGB/Hxoiq669kxbgwLr8nqXNT2iFyXOO9dYXAdDugMtxiN6IJshCyOymUpFXlq5zkKdAeQhSWo++1/yITH1c0dWk8rUtp0k1wwu/2yY1pGZoJ9dpDw7og2UxUL6vMS29IW8Mb0eCCpXHP+ae01o6cVwzdzQazzTawvWf76HRgVH6seRH56nF78vyJU0BFchASdv0gl4yDocGV1hKt19W2cfkF/VKawE3FbR9Z7FJvfYMLBvpXcovg5YtjJf0Jherc8zxiiyZnfHWcE3iohj+kblHvnKo9Y05O4MP6Q8Vo9EwjsorN+PW26xVhtY2/fuXsAm3CooworxdhBSKn0SR0jfoAAPLnO3l0g8gAK3pzV49A7ihZLOrhrm7iEgBoyFjWWi8EpaDgA63T8eQwWkn9Uu8uZr2E2XAz8nUdGm54SSZsaDB/Us/slZHLr+KWGcBKEiYTFYGs+PXqzVGdUeqnU9gfzXbTNZ0Gt65bsp/TY6OnY4R66ZuHkmqhYDTbI3WTR+4Fy67F96C/4yNn9Lnea6+Q0Ki1GaJRyAZHKK+g0nNExDt03VopPnYsOdEFcOD0q+rDabcyxmXyucERuq5grmwxNHvT8WbMIn31pxBXFY52BmjSEp526VSqr/FBHh40le2ULUc5951A9mWLQ5J9R1EtqK84esoFUIS9Ok0SRLJQeLen+St/YrwijlGSktEDaJaTXm2xNR6Cze5ezwE4ohgVH8GGCP+OZGZq5yO7aUAavAehDtkxWOMBikNmo0xreYK7rimEYNP0CeOh7EORInmIfrdJOLqCBLFSilT2jtHxV+wBssQ21ifUAqRJVxcwlRd1QU2ewzbo+41xpBSdGMb//NDSqDob3XRCxOalKi/UJM9MPtXUtwU4N5xK77X6LSGvtIlqzuNLJ7bTECXE50nChrvtMh+R34J66fNdMAfJdKzD4Ah98AqO5De2ajE5juieX+iSdkYQ8lwrTxUdlNyG3939XbnHq09XVUH5sjjqc8iqRt4Xb9XQotNx23bJTCDjBNLMbCiE8a6MruEjygP4YQwL9Tmjk2HVOIuVan0Shdd9dw7mlWWLLnHwS1g3RwiQHkBrGcNbtfiBc4ZCjM5FfDOLfNiTRBRgz1OSBX3AEO1OMhUYgAO9uki0kyTSWe6k5Bbhc+LzLlavtFYuu8nApYgL67fyVDDVOfaId7DexLiUs3YdSKY8Ine8tU/IIXUM6C8NDKPaEs/OVT9fAHDs6uAC837oHkCPCZWNg5rHU/l2qEXfBCAT0yz/5+Gb9ADNi5Lyw2odpDFrqznhl9H47dMe93y59H9RYd4fVSipnNaO/Xd83xcKevtscb0rXpHeuV1G/Kzg5HKsm3dWCps3dKRerKxD6c9Kk+MNRs01b9EzmMMpjiaWV5tyKkqxbJeTS+560ALZ1lIePVveVZ5/0plYJFt4GCvbap2stj8w6et+n6vovndwY4fW4qiP+g7/++mqUQbkJzIOL01MNQU3GtVAdnxbokePLHdK+vwrAdc9r08UIScmGx+qPSn8QgQrHcxjqs5p/6Slcb92qdNuEgmmqncZFBr0bVcbeLrGwWKcGt7IiI9/48XkovRS37O30rPDSrreicoO+RlM/stihuP/hpy7DT82HdRE/Jgoip0JkwljBZ28k50gXvSCJIZyY3bqgpstMk7Ky6VDizKiYC5x7g5+y3WcWXp8tUxkn+SrbF07HOvCtQbHCT/juidzBpymSd1W+7ZeV4WORJuDa8hTv28GSv1zITf/s4tDoRKuCDtuKPNYf+920KgRVdzA/YwCXpZ1YCV0LZVPISNqePz+VqpcVsGoZGvQSpNoTV+/Ge4FoaqeN5TYpfJWE4q+MYHQHtLkHlasJuwUzPemPx7MQdV9f2U15mtJasjT8hOCdGDu3UNOaRMw+Jvlw4DFVlL7TU3TQs8FiX9marHORZ44vmnxg/QZWNLJzW933i7Sm9xqwEEdiDXd1uHSzTp6ojH7UQKnYW6ZAKrE0JBV6G5vNzoFFxL+oLL/tluFNrhcDIAw+MEb4bHH7ucbXk5e0zrULQ7KFOQLJ24MdxvTCxNL/OH4Zy8+f4ogjPBX7Oc+ja24uJOVlNucqsABVJ6pC8BJGVj6nOeSzGJxEc8eZPIRCvT0APyFMcKGpbYbLEl6dEmrKp31dTxIG9weaKCb9gLPbd8ohnqdX85L7Qe5QQlEwVBE6qPxXo8Q9eTRZFYk5ne7ktsX43wJfneOZAIDLA4b6BQivuGTetg+rXJ+0KkGbeXgHdaF0vWDmlu4XTjAhM77Q7q6QUE/6Hk6RFaOSKKKCBKLOgmjdpmXY7vlqCmQy+IW0f8C4eeDWs5u2FD86hGFc2YrvfUoJ1dvpofzv4EWwNEO7DhpZ968Lvyc2fHS8go+dRqlDomwZg4Yq+muNLSrcv0RcoobCzrG9XDrOVLHDash1sh1aa4bUpOdvUO+DxPZHV6j4VJFi/2bT6CwqaGf3JkWUAM1ulUut8Wol6YXUv2wvlni6zP/uCokNTjNf8gGV35idKJ4AF5ZXuSX74TY7K7UD2v3D74mlf62QwKuvB0+QPmfraCQbY6rpq2t85Tp4QPzwXoVe6iIBCarkWk9GAHpNbve765KvAH4tcSUGl13nZx9nf0KH3OFwQJtGjBVoTtzLZIumxDbwWxo3ktYBSl90sWDlkZuavPjUDQr+5kMvs5RwP59YD/ABx4/Kp6FXd3F5s5muOoF5fSLLEo49wUVEZLuIdtWAZval1AdE7/b/+g+JiU+7Xf6rT6/JXWd84ANwXONPbzRF6qAtNMsJ7l+t6jUxl2aqZTM2Vf2e4NVkGTbtomUZvHPuO6Ws1PphxSZyqQ3wwHR0iF5n99gSn5JGZv0trAHeE7x9/jb4GR0A6xfs1O2v48hNt3RDv3SBpGRa0bpPqkHC/+1L2LIa+gDAlfRYd3Z9Iy0TagXA0GAFZb4My5KEvyJkW1q9cZq39aPlgvAuk6A0VydMkMgFYsBURuVVFUfObpAhr5KR94zd4svbn3nO7xhvqsk6yN7PxYjNFtH4e5Ud0/e5jVTXlSmkpmN9dUXWQ6IMX7+iPc45PCzEZX/+E4uG9Jx360dWSszU9Wwzsn5CwqA01UYu8Pw6SNQyU4OMN/IWldMEXzEbifng/VXAU4SgvbtkIhCnAT51sGgDnFomFrzSICeQPH8Z4KuI7/hE0ofdL6ggQCP/9gSwZrcJgk/MvOgbwJnmtB41fLHTJKs0XBmkgE6Y7D5gZcJmfFZm79pyGAyd1iea6vsslWbywVVLXNa2aUXPrLOS/8UZ1b5TpWGMI/QnJcGM6hsJsB3OYTd+3lxuBZFxqjuYWZ5TopIfPPWMrmypavgh+CKof3vj5ys0dFfvUDnRF4h37yhQ9zp8NJN9syfA4ygTRV/TkIO8DG2Wa2X0LvrjoQgTXJrWFkJ59YKJl1D6/Aa+W0NihziQ6w5I0IV/v6xpsUiDCot25OYluUJFvO1XvQreZqE8JmqGBkzM+gR62fVFM6OpO174cwKpAbW8EtoPNrzw4XHoeTxTHVSncvblhnqeGRzONwZY0dT8LDvxNcxf4rOInTrGcI/SinbZCTvfbHbYeqLKSqNJ8kV+oVpnUwsyx4ClY9Il3pxQzXvIfKkhQbQQ0oL1YVbVzASX41Sm61J/Fd4Bs/YZCgPDsSrd/TceCSwqvpkGCJ+69Me3s7XdBWwaQW7xNgzVTD8RDmJBar9VeZwKjz7SNMqGJAPSwO43hZ3OsV6uTe0GTBy0hZ0a0rbED2jHNHGe2Zk66Xi2reEM28BkVz39/OkXjuw2PjOq6xNb+zrfVcnpK6JPfT9f5zwHys0cqFDzdBtXp4AreUa3P9RRaFrNukaR1CZKAF4StXG6HnQissnOMzz96AGeVslt2kKK2qTbjHMuslcKP/mE/ZSpvLJSZhRFd7V9lw/CF7a1Ns/cYsx6lyKPuKu3GOs16nOUJFQry98Fh76K//J0MWVT/E1GKXsBt1X4jEhMkZhVmhpAjtZNbOG3RUjgjCyHpb2SWV4BtrxD21EheefVymjRmx5VhR4g0eoQL4EfgY72ZjnLUbpj8QrpTfzU93h+ZOI85vdEUm6QANrIecCVzShVtjmh0RqmvobZEw75m5dezqiG5CdxUC8ijWZK63vjbqAhX0Lu7ILRljZDyzMTC/Eg3nCovo4jh5yERdsCh8HMw/0cvkrU0X3wB6obPLkx6wP4HeuxVX30jcBWhc4Lj/DLpq8vqSq2CK7uGn2RJeMTIsrXXV9gR40iaGyQ7XT2KruGlOeqs1F/frBEEeeSuRoN1evrkIzCu6VLsJnptvFbF7j1gNv00Ue9NNv4Po8+UiDIIHmrdpAc8YYSGqeu19aBwPk4VDOCJwXQbjRx9uk3xth3/k65+zBNOaoLvHnRYULs9fP4k5kMmffQCnJTZtAZi1Lva30TAHc5vLpOjR7yG+LMKbAlOqq/2xQ2Mf69I3fnOA/OP3YXuTOyGAc/4Sk3qYBS8RpvesjvVTr2ldFpwFlwdd6+WwNdLPGBWouvtpj/FoEZSEa1YM3zrUo5tfJaCwidP/WN3rXdqJm14a3pLaZcBtKO2OLYgzPFkJCtsdTeikpYq1mK48kibh1PiKegEhAVU3z4GVhbmR8DQ8LXBWoJVKuea9jOZyrhNyZat6KrNIku7EH9qjbk5t4g6OZjW+WuPBqfMmGoSNDs4Vi3E53vQC35+wNiDgdvqfPtgft8rVZajCQkz5dQStjukovm41jV624kn8y7QTjrvIoSkDWOTOm4V92JU57C/EWQRF842nD5eTLE+/Qppg3cNAYfxgGjhOvfA+Zc9o6O5vFgqt0ameO64b6jEkKi3s/H+Dz1eLdakyJREZesP5LGm7oW+XdhMwv+l2AVLpbLSkOtAKeDVhhd+YAI8fBNR7gSE99BT3yTgm541qaAj5tGvRO3r/DPxsyEy8kFXSsmKZWbzJnmbVOonbboNkWBQurlIMvhvqYdZRLrzl8ic08u2M0P7GIWrmSec2aoCCURtBs8id17EPicdv08eYLM8ZMv9UZFKW6AZqECIJCVvWU+xA7HzXiRM7gV0n6/Rz0AP0MfRJ3Sg6dBozqx4m1ljxSuv8NJzOmwdVAZ8DXz10bMbvlRCaPnquUWZBli4sH09PYj8v4Uhr7arcvll+nc0cLRyutNAV7bkAvFpNXmvP9On4QdnlP0sD3Lrb+DTigwUkXxdFMGWWhonKgPYbLHekdzxpX5jiQrhwUulGDpoDEcwmnSLUfaAh/X7PiECRXTlXsBQ+Q0ZhnIOOuisZlwAkjyINoEYYXRM8Pful4Tn3j3Aqjbv4aQ6I4FD8R4VtaRf6lFVur9yHGfDsDV+j0F1sSL5TKJM6ha7HFz/F4FQln2y7y8muf++n5Qu0OGDmTuNPGN4EutuARm5D8Nxm/m/fgku+WoxgWI8YzESd/jt4jgHjeA62CBtWPzMvjO/oQR7/czwluHyWFAnGJxC1pLsO9TnSy/C9wElZVjYutzZVgP2sJ8pUzKD58hhxnhimpcutWGt9VcC2jpX0Yvrt27O7B8MSagUfBT1rr2Zl+UJPudZryqqiVKZ0nQM/QQDKXXCgf2IxblmHOYFs4D821A3XJEhg/4AVJaBJP0FcqOyIOzxt08gf4LlEVJQ+VOvZATaNDFLpiwWy52rpRmwn0wHE3c0eSgUi+i8PZZHf8CnDEZrUigbUIulB4sJwFIzvR71cMzJGClheAABxBwIFl8nChaPgLv0XINejvReCAAgjOwIpJDRN54YmIAAATXE+F/YkuD7qF8t4D2LGyLeX7paIqSAoFpo2QCZoG81uhE3smGyGJch2DkW4zZZEf5sdR85hq695/LwTI6m1SJtFjSYmHWhmNMoNivLo92IKQOFQW+u3ylyOp+X2QgNR/up0/vPBKSMfhRsALknMOMk0ImwEADZW8PMrAAAAAl422hoPdVJRE9EyJZe7V+ynsEJ0tHJOtPKowstb0+RYTpNdziwFCuTsK2bgTo2qnA1959Ru183DTei8Z3NkRpiNAAAAK1RirbHzTSn/aFJXh2xHvMvRWrT4I2X+UA0pHIeKh7/KjNQJt/stDJwYndJDBCQvTTlCqZIg01vfkEi2u6xnBjGVVujp0d/ccV/cbOonVQmuQx2A+HWwCdZKZkIBO66qCcjBXUmXbu0maW2Metrw/BVpv3pRvrzGTn6JjjexnVWB+Najfog8vXDd5vyk5NA0uQpvoEqPTWj9j+6OvGudKb7xBAmWqE3bPaVggi9MwGopF2QMmBsWoYCIIxFELV7Fmth+KX/hWtPiMhKQZLv9kqO9mqgnE5KOBh0Ol2fetEyMMZjJwu7vPgn4AoThFIBK0jx3hbZiAuZkFxirrpfmdKlIZ32Diy1hKng6J4tDViOWhhLA2VWEqWALKTloiQI0Rg8jDSWs5kF7YNgzoGMo8eAxIRnRJFbet52HWqYVi2cjNuXILoi08rSBwCru3IG8kX49IBJPta8pa4ZaQwB72UrSTuwtDuN4UernfAqURHEifQFMnNlFgFpcESaufbem5oEWQ7swX1id7F3PjUHMA+b99lwVNCd3I5m0YaS/x5aGepDT+Y6EM6JXUhLaa4oW4K8drl3u9swgW9sFqZbt9TAE8HoVC+BB40gWgqbAheGqy8dFk0oBQNiWoFT/nUy+h7u7NmzrXygnZS7wdAcM5QGbck57e3eA4OJVnVQofDeOI3RvYV8zrh54JmDGqA3ME76ffbvWom9t5DZB6YF8o00Zgukuv28tL4DVneFaXdaBAs6e4zGiAZ+LDjXQmpg8dAsqT+Ou9uGBOdDz54nWnJ9H5Sxgna1ir1kux4J5koLSx9yb3DOj4Xwej5XLgMPObYqsmKfT6Q6qIa+ZhZG+EIAVjTT1809BU3+QOgFypU6zY1ofU5LA2o1ADdwMVHe4sKIkRr/Dr9EbsBJ+dSeQGuJkrQHKkaK/98Fm1nn2zCphUhE4smMT+qv+ShqbrInup5j1es3uhRd1hKMN+UKigOMyo5wS9QUCJ0xU60+t8f092yX5K1/MGwd1BeYYJXVhAsFYAnhfu03XNAdr8IQGArAoV4xVCUGexbFaIr812uRPye2ME3dMarFaji820PszsTKjRuWFUr1vQwxTwlByXANg2MN+DtQJgH0zZqLuGxNJOKdtTdA12v4mQUPBISbAS7GB5H9wbACswvcd5CiWxrw1ebL2M4MRa290U++zlX12DxToDWZEN7IN/IUCmjZJycrAhBR+EvX2yJnFqmUSzZs/UxOpocgIRLlc65pUN29r0zDiDvyzLqcUcECbu8/B7abCijaZKRqFBasxCu1GOlI4x1IXcUuC2CoeOreS2wpnhjtKnuDqgcNn8upkQRoWMX7SbWfdz/qsODzF0E5eWZTcSXgmGufPr05J8eylOWlnlMAGHWVi2II+iH/mnKlETjEvlLXvDPaB4d5VjpWXDgbnnG72zvp3REXdUaQUJKl7H0FRMyUdcHiuNsl8+PGkxoytz/jWD1Dqp9mngiErrha1aBWdCzV7tEla4SWlPBJB35Jf3k7R4D78k62AWA3ir6VYmGByyk1uOHFZ09Kdi7WEXIqaCHQIQVVuyLakDUNuUrXaGE45bncVgMrr9hAQpAZWPScs75dad9kCRR8RNEcWr2d2qZ/89BZlniWY6D+z0FxGzawt2kXrTRQpJmt+yVeiXhukK6Y/U3CfnhnKmgALsbv9DJyZ/L7/1Ua8/O0KXRzJw9beNFqNXrB8ybTzDsUF70sfxr3N5yP1If9PwBqTKSur+coqLbvVRifG/30xmWnz6LY5kmU+5MKV9M8TE1x0irf6waAS4lD+Hzu953KgkeZa1Je2wegbo+WdXH6GDSYqRZS+g2LvwlKx94hnf8H0+3o6ARb3fY6+G1DzlAaHUI6bk4dwXzQa7F7oJDX9iwN7yrJU0TshbJH5/EatRQAUVb2OZOx00UGzeGcZLf0C4Oz44Fm7Qa7n052l12MHdRZ9N7bWEcu4JKB10jPVn3gezytMYvSNkBvy7VuwxMFljl0u6QMlXbUe/RXg/mnRDUy5W9rqCCt7lenb5qUOUmiDgr+N+cZWLoY3fgcya/JeTTM83GXnGMY+csonU8xR2fO9ViyYX2WOwjNWCrJ+0uqNoUHYGocU+QU6eCjRBVRrtu9Qpl00n8au886GgUxIOnS9wevUtkICx5vVCNZy69Fg5Rd28bFkGrk0HhhwLpsx8dS1RR2iuvRlv6LwrZe0c+lRRfr6bChUYURsApk5LrWn/4sOAr/dl7Ti8AcBrncEOgprsTJRVm6wNbTNvGFSTJSrztvKCBmhegySJcK3dGday+/QkZQfB8XMYdRtLtEaMMQ70odr2MhAEj4Rq7wao2Vw3bAjvfVZndnUil5rQpKlN2eex6qcAEvDSf0R4FG1DFbw5p7eBfnHzB7hRTVoNHLbu+fEO1dlazNU6wvfH+8ycujAsbH+sAcao1QJI2lExbfDNHIF0e0M/i/Fp2aT9bK74/yYHvmD6LOG8zfCcnn7Rovir54m8zwuXh2wFdxFzsSlP4xqRenye2csVPbMxa0FBmOSV7Li5Hq7jpnoA1oUzdQkL0jFl/D4utLCL2nz6dS7uugxIU9xQKOdUN8JvAL+TdX7bFxVIIzKPBcEv9rQ0wFjcj6v8IpqE2r5r8/dd4GJQpTRsv1YyHW+cdqvns02eAoUFAk7cvTgjg1ZFTkEe6v8P+eo7jyTfJotKkfQiqjjTC+DKBFZyGOXVKu6DQZbtpHGYz/2z+TwXrRTGDLqfExj7/5Ety3p0MgnwAUIjv8QETaEoEyET2veTdhMxUshQ9dReJ80mqHajvOcOOkpapRBYJKro8bhlSjW1moFShQE9KQ/efAq8cb37GxQ5Ch8Z8FE+aV86no58PH31SHKvTCfiEioVa0Sc3o4xkQ1SN/NoTcBAaDEsBt+jK+ErVpAoYtdSrjgXRxsQLCbGAwUbl3XwWwT0A1I1rlcD9XGwcM127FbmuYJVi5S7s7fjuYCuIw2vo7+Fuz76HTjpGAScJ5MSMUSJczH5rkVS+EABRvpcgMnOZ33zUEoyUu8NlDqBWX1PRAtHlBEIa4CxtrXQeq/8gNmrbrmijBrplUBOeVIP/mmRUsguwxKdadoCkSkrWvodNTVb4weiDjqwq403uMUzgsGZbd6DwGuxSBdAU2lig6zQIPP7sR8CvyNomhRzd3w9OE10eGrFNXl9Pl9U7arCykfxd9k3uh80KPZXzVnFufV06aghgXQ9tg1OQVWWz59AIVBYtjREsVVqlSQlsoCHFWVafCfLg5KPNXZN3xBx/8unGBGTKrTyLzJrWzrKonGuDKy68HVV6lx9o4DjcZegmpSUcUy/0bQ+nruSIG6bU3+BP54rYBCSKmkZ14mnoChCzPGaMiYzItQTuZtzWevw7yIeDKx8JBrXw5Rnzw4mIu7sNod87eX5Fuq/ynexVxUuWHqho/E+yP542CNCe50IIIpsYXXyyo5mM8R/BRlrWFUdg7bwNdcDFG98wlxU7CmmTY7aeDgBi/Rm4i2UgYwpZhEQZIzOAhxfvxkAeF+xRPgZnQ5K+di72xhibuz0ICHHxz89LyCkSZ6jAQr00sjB/evGaaJGm3g+JZaGU6ihP4JTal9+1kCkXZ7W4m/DIGw3K8zPNJ9JY9U6AhIKVEiMd+bDMzucU8whJIwc4HlKH5jUdYL9g/ofdsMmQQx0A+tLXl/6QyhWPZeaH4A6KQPNIqs90y34qKi/pvAnB9CQC28Q7FpFsYPQ9Zn+xOVbDIdWHv5lGQxfDpnrqibiwFC5JN4ElBUMZpXj3GWTPXwYvLBod7UV4oBdCD7S2T2fkTeWvr9O0DunkXSJLcjnnur5vO+mr4EgFaNKHpQhHBN8Zra6HDLhpKfSBHiI3X6CetYnbe2eHBxdaK9HbxdCMxUWyJm19rss2aY5ozjiWsMbX1zg2lQVhirUDvNP7+qDUDYc71U4uBASY3zqU4Xq005hW6SnluC/U0/tzkTjcTgRB7Y5HoCnHBCV1/PXDOuHbl0Enje1SuTfzfPWWg17Rla+MrnnI+UYOxfRUbWPutuIDPKAZgraCkKRtP0fNaj+9X5L8lW9ztX7vkhNeHOh7CTE7lttRqUun4GUqGr58bK5hPXKiHii4U4b8Fjl+1LSYzj3sxLDme6BP3YugkOnY6JGOlRODwIKYfA1W22LhusUoJIamErgwTqUmwlSDZJ44wLpQpHzFkfWCAlxHNtmoCnASCJFHsorLZnXbr+Uom+CZ9RO/41wqLv7aL+QDCz7bXjb/JKa/4QAPTsvuyFXIM1UbcwCjVOIOQr44OsisCf7zXfWqniyfAubcaRi/1EQ2PjGXzliAwYZBOfuoCqg1umEbv27YoDI9/Ayaq2ffSubDbldyu/6rZd7zH2Jk80e1gbW6nHAztZtC1HrLjCTQkVlXLUUGXjgpT5KEHhpQnbY7eK6DtwZk2/U6g3JH6eRe9Vu9TE1ETml0Kws7ZAx2Zcz8MFYbtdJeKheS0XvXeHu6CvumD+EUEJRQICWNlpBoDXt3ojFqHwrGE2vwMQQ66Bkh9FYa1LRlYJznusCWLHyFIePIzVKvGHKO2dAiPRlYaCybSYPyQ1MQEjAY1Qystnqq80UzF7yvFL4ETnHRgHxEIjc++Zu/oi9rPB2OMNI+7kJPANJDcBZaA50TqYNXmTeEZMu7zcdwGtDWJIGMQ2+smWzgpYG5GAXrWX/rB+kIeiSAwkPJDFd8Xb9unnr66M8UhIWgdsQYDxB54P0bUotuH0QsF+JAAqGhPHlsd762YNOuZmcESQbGdHY0Cr/TBRtC7WQebVHPYZT6wZTgUOJmXtIBO73LKQJQHm67kwqS7b2FTRHITiEXbU0krphoEMJqRMnKPzOGgoYdgAshht4xFWtPh0NqaB5Z3QklUXoAsmxLVxcrx4TZHzY5/TTBVSjkXbz8FLV6lrCXAodn1eURK6oqa/km6VI5WBrjE4iKPvHWfbKRA7il2SsfxVcnMlu2of+UElH9oCNvSDzekslXWB94TQT0Wg3zARXcmbWog3IvKpPoGQmuBx/SOx4YWKpQW7lIWc4Z7tWdH7Bb3SJdB8p8lK3BmshnwkLmooCcdTeHy3jAUKfAXt5aVfJz9Bv1/3wc8ZvX79FyoMyFYFboq3aw978SGMLM2dEGl0/BIFW2RHycsvM6quDTDQf2jTzRfPieTSdXBYiGwrtERAOkNrPRn666i5F80PQLT2bDdRxb+BmPoxiG6HKNTb/5JQQ8cSpbVzQKnrawCe4TDXZZijY762mFVXcR6RgYQnfFrhwKKgXmMU4AGJJTdByjHwq4TSrGcWs30zXDhzC2MM6FYutkxQ0K47lzkByCwjt6Bq+ucqPlKkZGLn4SmKo4zt9YeUf5xGWYvBdYFiiTv4tou/lm0u7TT6lEHHomYpzZers9W4bfkXlxDk4e4qtrc5ozQjrG9wghoNTfh0AL9Fv1gMNg99B6pvX+5EXffnK+mQV902g5exmqGsYwEythme1jNCXiz4qY/HpMyBqOaooSt1P8WN20yBd0Rkc7uCb/M09Z4q38XZHQALF1NLlsnYgW4iU0quv3Z0GCaBOvNdDWKPFhFJWHKmrnBMXfBbb6CqNwQj1GURrzV3Hf2HSyj4YYq4bHd4g2YDz4lVVPGt+Sya92OzT0nQWwi57MCv1+baDZAfgmKkt1WDZDpnhEKuyCauuj14/QDOqT+QTA5lNXhEPhmwyzGM78+JDLe7ScVxtTpLCkxITp7C3XgJVcYibh/S2XsUQRo8AnnfSpz70lehvbVu13GBbqcuh6itLyFQOWOyI6r0NUsItUDJB+7eSIa2ScPQ/VdbLkunk/e8FVE7IlsS+8XJN+uk2/sQtKGlqI6VPfcp+DIM6ZP2PDn9wzVsL8TZMsdXqUKMWi4HdKxSoEUG3RGVyilseJGFosYsOENfhm0bIs4A+iDu2hQVPWP9BYy1rB3xrfiBL/sohuVefyMARz0UBJtXju1d4GC+LqdIXKd34K91DzJdolqpWgk73GLqV7XjbDrDV/4iHdC9+4mJxkaBj/sbi6eMH4xbKF1wEsxULq4FlkVJaFGI+bwUakV70wTXjfd7L3m6j3kmn6L3ARzO6pOUVEGM1GfnUgoy5C5/iV55NY8Ceco5vYE8K5cak/dfSTBHGsgtONf8D492FpSlThZ+SM01zOuiQYl/5tq1McuoUN687zhopDM+2sYxxWnjVjYNYkKJvmRKl+7h1b1C356iwwz99fY3n88bA5vcokwSpNkm07OFbK+I0qy3bqv/aC6QOXtWNEmgw8OlgGr4N2VI3q6gZ0IK7+omabxxCIZF5/TaXccyGOUcqoiUg7VhZSkikjSgIa0AGEfXatJ3NjuRLVxKKsn4wKEloU2BOLpvvzYm1B5JJ0agFQnq5kU7ehmWoBsC7KD4NR46dxwgkfGWyvu4zn5hDQeLuVTImckaMAgKJFVNuyjCU+5LcK5n9chdP8/P5abHHjdZ2QhZA6/Obu0Gjt3t05vO1iU1Go6FK/CNMwLLW8KAQ0TZTNRe5UHZJWKBFG2ZqBW3dK2aKjIXTHQMUAkndLPleboJECuxMb9SxKtF0omWYcLmHgewQZzkjR+OHAe4TdyIHDLPaTZbFqEtZazQ0C6laeSb6deR51rsGJevAb0KYRNKzhrcpkNHrMLFLyWM42+QYSgExgiruG0bKYYWScFvF0VSbYTaixLUq3jQK5/ayzttwfM9HBa1GzXZAsTqc7n3c2r1m3WTBYNQTrMb00v86zfEtrdE+NbrkVKFnPXkNLzyQoZ23IUtZ2O0PJsEDxgEfnDor6/3Re1WMaIhSNPVQ/CNhlKiAdSQdqW94p3nKVpGnL9s54nyd/FMJVpuh9eEzQj8xOLPYQCc+t2xan3cF71ZGhaGwE1pMV46ZVJ+8KuDvSTN6bkmXdk8HuiEzJxtMph86BEvfIpLaa4IIIJW9I+OSMf8bS0tStATyyWlL24wu5QlLyaSyEyR5fBh/YLN+yPT9kL5mWfZo5amAx1ZjJn+yTM9em6I8dPOUiRL5IUIw6TOiipfCchBCykeufAgowgQbVjOTWFgvMO5dVtvhoIr5+TAnkoqCDOlGJNEpqBoWN4f7ODQUPw7jZkn+KJqFp9KLUjjWg1OqQhmO6dP5pFhGheAO7rKjpzgMEIZi1PVYHUcJaCjDtRYYXXp9gJHcfZqIoovQGKv4ns3wXXQtK3np8l+0ixc/4pbVndFR8YG/WP2vcv7/tH5fyDFXt+kDP+JDGW1dnzqB+Rr+uIcZtS4Z8IldfjmFFYURrfI4hptauus6PBd/bQmnPc7N6bRKir8pQRgvoFTsVN+WeQWp4SXlaIwjs06kfYLoy3E3u9/9T0ouC/812s+m5EHNJkPdSSWRN1B+R/Kz/C4yX9k29p7ULpgeAcSYNL4P4+8lMZoUnY41X+LkatsvCJo1j+ltTXX2AfXDJhcwC02cRStCo1siAoGycjlUfcihtHNfhpw/tBW7FRzBOCySVpgm8ePR4e0bmm6MnU8fvzV0oTf/E49nU8ck9YAOJ80PaafyL9W2RurFsWrwib81yC8GCSi90j7fghCVxiUBsnIqkhxAJMTm8R1JabLzhkApInPOrk9wYDPwXrn9ofdY5tkS0i0RmPTfbji+b2L7TDOS5qz1qANzdaAC2/M8JjkzIluhKXjTl/PHidFD6cj47l/JWXYfXgrRdH1h/TDTzXZyYMgBni8ibhkZsNjNdSl3NcJpE3Nfcz/Tt6xt3nxWiDckymz+EVoKHQ9rVXdn6qERfEhyrt46esAVds3ZaFs2ztdkmC2zH85IuahOo2BDORQfUM9tT6HZu1s1sGxFWDnFuW9AmpJQq7jVvkKM95QkOUrEEVkkzxJ4uyaU6gamiFrXxhoHIYjr7dd7BscC60TJFlAeMJygC7mSxP1OlZf4RsrmsMfE1JPfzF/K1F6FTz16Ov/70F/j+z1FZeQ1FAC5Sty3MTZqK9ERiXcu7fyzGZT+V6errUtNdqB6axwo0NvKkTQFFkFy3iBa1zA8o08M7hdbXPhVWQ/Zeln+QVUSaGc06hvFgLtErsQFPXAk+agZwxBKC5n4Enq2rCqH4qHqpU40QMT/8WaOYuQgFn8yPPNtt6LXTuXLG+Y6EQAwIk+Rrzp8XUJfqH0bKm0zDZxi53hATERfe7xXkHh+Q+MDqmte/3uvnFPA9KMpiVvtxaHxZFPYczQ1IeL0+gQSjvF3do8kPAPz7p2B38Pp3BfRJFQdH1S0e1laQLVnD4Jb95Pi2ut9/EN4/LPqAa1f613342ypOr4wMWm/8tIeGimfBF3+tE580NQrBTmvV+4dJwY3QW9PnrZRLmzCykrbaqqNiMONc/vUFHQ37knitwqChM0csHYlrx4L5PcY1uFXjQP7S9O9LEAkwbYlseDRFpuX/6odmoqjyWAANvx2iyqKAqhQrMUNDMW9si1UfOrM65LXsEKJ3jiTvrfMgeij4/r9qLPY6m0tWj1zFfOzWKgXNSxUMjCVF1JfPlpkeAQghazgI8rRFVotmUV0tHYCt9jWb675clbOwX9xrWcF2vB/AWiJvQrUJp1oC3hxuw6/DVM8syfUMy3qg9+LeutGgVkTSLqETqCumWBtDexA0du4GJsJ24S9kh67W4eOeNGY+AYt5acN+4ZQ6/AIIwwPuLxN651qz8wOd0BLyFiDHKeZWf7Apfir/TbEtX/9SaHUU+Ys9Uzf+yWTllYhzcHQ0a3Idt6sIE2UK4d4EQPoz2tHASZYMmRvuVZe+oi6YuGvBtFBWem20tN4obdb6sJ6x+MkirwRDqHKaH3r2w1UqlSIRRl3vNq4Xpplw/z1HiYR/faLA825BjyJJoUinG7T16E5fhvHSrTNVpSLkPFKC+hI03R7wgAOnYoIWiBKyOBdW+pCm4gj7FkTyUonJVr4oVEsswUX4cDWbM2wCU/aegwMR5EyMaoFudZtuxPwSAKUsdSeIpXP0osibSlOPwtoKtZ9Y5ZhasuOMclDWy+smMtM1+OphHQIUj8faqXCa11gReuMGpiI9UpcLPy59hDbbr7V7J5vCnCaC42gGeyoDNGV6S3WKRL0heSngQAAn+Vhe4yO6oPjmSWlVlHCrptstc38WBJWFs918Qk7iJu8U9UiwAAPgGqfj3Z97AAEuwy1o3jSoTu7UO3tRKnJp3B1hYNDuPaXuYGAAAAAZSmsGCAS5bI0n6bVIyfBDk07hM5KXdjkjbfi5gAKC+wAABq8Nghm4d9ccU7a6ik25C3nqYu9VLBV7U4CepnVLBt3M3pE9UTRiwEIhIJ6g3tF6AQt8h0L6tex4JZOEmpTII5EaO2dfeHco+h/VdYLeA4RMCzgEDwABZfHvgDjrkdzW1f0URtmg8EK4wmARxduk5/7LXYLztkKM7brIFREBJU39Yq8ujixzactGPAAA");
    --thumb-left: 22px;  /* posición */
    --thumb-top: 18px;
    --thumb-w: clamp(240px, 24vw, 320px);  /* tamaño */
    --thumb-h: clamp(220px, 26vh, 260px);
    --thumb-radius: 16px;
    --thumb-pos-x: 15%; /* foco dentro del recuadro */
  }
  .mbox-card-head{
    position: relative;
    background: linear-gradient(180deg, #161616 0%, #101010 60%, #0b0b0b 100%);
    overflow: hidden;
  }
  /* Imagen dentro del rectángulo */
  .mbox-card-head::before{
    content: "";
    position: absolute;
    left: var(--thumb-left);
    top: var(--thumb-top);
    width: var(--thumb-w);
    height: var(--thumb-h);
    background-image: var(--raffle-img);
    background-size: cover;
    background-position: var(--thumb-pos-x) center;
    border-radius: var(--thumb-radius);
    /* Borde sutil + glow para que se note */
    box-shadow:
      0 0 0 1px rgba(255, 224, 0, .22),
      0 18px 32px rgba(0,0,0,.40);
    /* Más punch */
    filter: brightness(1.18) contrast(1.18) saturate(1.05);
    z-index: 1;
  }
  /* Overlay suave (menos oscuro que antes) */
  .mbox-card-head::after{
    content:""; position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0) 0%,
                                        rgba(0,0,0,.10) 50%,
                                        rgba(0,0,0,.25) 100%);
    pointer-events:none;
    z-index: 2;
  }
  /* Chip "Abierto" arriba */
  .mbox-chip{ position: relative; z-index: 3; }

  /* Responsive: en pantallas angostas, acercar y hacer un poco más chica */
  @media (max-width: 840px){
    :root{
      --thumb-left: 16px;
      --thumb-top: 14px;
      --thumb-w: clamp(200px, 48vw, 260px);
      --thumb-h: clamp(180px, 36vh, 220px);
      --thumb-pos-x: 20%;
    }
  }

  /* Safari fix */
  .lang-item{ -webkit-user-select: none; user-select: none; }
</style>

</head>
<body>
  <header class="dashboard-header">
    <div style="flex-grow:1; text-align:center;">
      <div class="logo">NUMINA</div>
    </div>
    <div class="user-menu">
      <div class="user-avatar" id="user-avatar">U</div>
    </div>
  </header>

  <div class="dashboard-container">
    <nav class="sidebar">
      <ul class="sidebar-menu">
        <li class="menu-item active" data-target="dashboard">
          <i class="fas fa-home"></i>
          <span data-i18n="sections.dashboard">Dashboard</span>
        </li>
        <li class="menu-item" data-target="compras">
          <i class="fas fa-shopping-bag"></i>
          <span data-i18n="sections.compras">Compras</span>
        </li>
        <li class="menu-item" data-target="sorteos">
          <i class="fas fa-ticket-alt"></i>
          <span data-i18n="sections.sorteos">Sorteos</span>
        </li>
        <li class="menu-item" data-target="referidos">
          <i class="fas fa-users"></i>
          <span data-i18n="sections.referidos">Referidos</span>
        </li>
        <li class="menu-item" data-target="productos">
          <i class="fas fa-box"></i>
          <span id="sidebar-productos-text-nav" data-i18n="catalog.title">Catálogo</span>
        </li>
        <li class="menu-item" data-target="configuracion">
          <i class="fas fa-cog"></i>
          <span data-i18n="sections.configuracion">Configuración</span>
        </li>
        <li class="menu-item" data-target="logout" id="logout-btn">
          <i class="fas fa-sign-out-alt"></i>
          <span data-i18n="actions.logout">Cerrar Sesión</span>
        </li>
      </ul>
    </nav>

    <main class="main-content">
      <div id="main-dashboard">
        <section class="welcome-banner" id="welcome-banner">
          <div class="welcome-text">
            <h2 id="welcome-title">Cargando…</h2>
            <p id="welcome-subtitle" style="display:none;">Por favor espera</p>
          </div>
          <div class="welcome-right">
            <div class="lang-dropdown" id="langDropdown">
              <button id="langBtn" class="lang-btn" aria-haspopup="listbox" aria-expanded="false">
                <span aria-hidden="true">🌐</span>
                <span id="langCurrentText">Español</span>
                <svg class="chevron" viewBox="0 0 10 6" aria-hidden="true"><path d="M1 1l4 4 4-4"/></svg>
              </button>
              <ul id="langMenu" class="lang-menu" role="listbox" aria-label="Language">
                <li class="lang-item" role="option" data-lang="es" aria-selected="true"><span class="lang-flag">🇪🇸</span><span>Español</span></li>
                <li class="lang-item" role="option" data-lang="en" aria-selected="false"><span class="lang-flag">🇬🇧</span><span>English</span></li>
                <li class="lang-item" role="option" data-lang="pt" aria-selected="false"><span class="lang-flag">🇧🇷</span><span>Português</span></li>
              </ul>
            </div>
            <div class="referral-code">
              <i class="fas fa-user-plus"></i>
              <span id="referral-code">---</span>
              <button class="copy-btn" id="copy-btn" data-i18n="actions.copy">Copiar</button>
            </div>
          </div>
        </section>

        <div class="stats-grid">
          <div class="stat-card">
            <h3>Tickets.vip</h3>
            <div class="value" id="balance-value">$---</div>
            <div class="change positive"><i class="fas fa-arrow-up"></i><span data-i18n="labels.loading">Cargando…</div>
          </div>
          <div class="stat-card">
            <h3 data-i18n="stats.activePurchases">Compras activas</h3>
            <div class="value" id="purchases-value">--</div>
            <div class="change positive"><i class="fas fa-arrow-up"></i><span data-i18n="labels.loading">Cargando…</div>
          </div>
          <div class="stat-card">
            <h3 data-i18n="stats.referrals">Referidos</h3>
            <div class="value" id="referrals-value">--</div>
            <div class="change positive"><i class="fas fa-arrow-up"></i><span data-i18n="labels.loading">Cargando…</div>
          </div>
          <div class="stat-card">
            <h3 data-i18n="stats.tickets">Tickets activos</h3>
            <div class="value" id="tickets-value">--</div>
            <div class="change negative"><i class="fas fa-arrow-down"></i><span data-i18n="labels.loading">Cargando…</div>
          </div>
        </div>

        <h2 class="section-title"><i class="fas fa-shopping-bag"></i><span data-i18n="sections.comprasActivas">Compras Activas</span></h2>
        <div class="table-container">
          <div class="table-filter-inline" id="purchases-filterbar">
  <input id="purchases-search" type="text" data-i18n-ph="filters.search.purchases" placeholder="Buscar compras…" aria-label="Buscar compras" />
  <button id="purchases-clear" type="button" class="action-btn" style="min-width:auto;padding:.35rem .7rem;"><span data-i18n="filters.clear">Limpiar</span></button>
</div>
            <table id="purchases-table">
            <thead>
              <tr>
                <th data-i18n="tables.product">Producto</th>
                <th data-i18n="tables.date">Fecha</th>
                <th data-i18n="tables.value">Valor</th>
                <th data-i18n="tables.status">Estado</th>
                <th data-i18n="tables.actions">Acciones</th>
              </tr>
            </thead>
            <tbody id="purchases-body"><tr><td colspan="5" style="text-align:center;"><span data-i18n="labels.loading">Cargando…</span></td></tr></tbody>
          </table>
        </div>

        <h2 class="section-title"><i class="fas fa-users"></i><span data-i18n="sections.referralsHistory">Historial de Referidos</span></h2>
        <div class="table-container">
          
          <div class="table-filter-inline" id="referrals-filterbar-hist">
            <input id="referrals-search-hist" type="text" data-i18n-ph="filters.search.referrals" placeholder="Buscar referidos…" aria-label="Buscar referidos" />
            <button id="referrals-clear-hist" type="button" class="action-btn" style="min-width:auto;padding:.35rem .7rem;"><span data-i18n="filters.clear">Limpiar</span></button>
          </div>
            <table id="referrals-table">
            <thead>
              <tr>
                <th data-i18n="tables.referral">Referido</th>
                <th style="padding:12px 16px;border-bottom:1px solid #1f1f1f;" data-i18n="tables.date">Fecha</th>
                
                <th data-i18n="tables.purchases">Compras</th>
                <th data-i18n="tables.status">Estado</th>
                <th data-i18n="tables.commission">Comisión</th>
              </tr>
            </thead>
            <tbody id="referrals-body"><tr><td colspan="5" style="text-align:center;"><span data-i18n="labels.loading">Cargando…</span></td></tr></tbody>
          </table>
        </div>

        <h2 class="section-title"><i class="fas fa-user-circle"></i><span data-i18n="account.info.title">Información de la Cuenta</span></h2>
        <div class="table-container">
          <table class="account-info-table">
            <tbody>
              <tr><td data-i18n="accountForm.labels.fullName">Nombre Completo</td><td id="full-name">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.email">Correo Electrónico</td><td id="user-email">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.phone">Teléfono</td><td id="user-phone">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.address">Dirección</td><td id="user-address">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.country">País</td><td id="user-country">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.city">Ciudad</td><td id="user-city">Cargando…</td></tr>
              <tr><td data-i18n="accountForm.labels.zip">Código postal</td><td id="user-postal">Cargando…</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <section class="section-content" id="section-configuracion">
        <h2 class="section-title"><i class="fas fa-cog"></i><span data-i18n="account.settings.title">Configuración de la Cuenta</span></h2>
        <div class="settings-card">
          <h3><i class="fas fa-id-card"></i> <span data-i18n="account.settings.personalData">Datos Personales</span></h3>
          <form id="config-datos-form">
            <div class="form-grid">
              <div class="form-row"><label for="cfg-fullname" data-i18n="accountForm.labels.fullName">Nombre completo</label><input id="cfg-fullname" type="text" data-i18n-ph="accountForm.ph.fullName" /></div>
              <div class="form-row"><label for="cfg-phone" data-i18n="accountForm.labels.phone">Teléfono</label><input id="cfg-phone" type="tel" data-i18n-ph="accountForm.ph.phone" /></div>
              <div class="form-row"><label for="cfg-address" data-i18n="accountForm.labels.address">Dirección</label><input id="cfg-address" type="text" data-i18n-ph="accountForm.ph.address" /></div>
              <div class="form-row"><label for="cfg-country" data-i18n="accountForm.labels.country">País</label><input id="cfg-country" type="text" data-i18n-ph="accountForm.ph.country" /></div>
              <div class="form-row"><label for="cfg-city" data-i18n="accountForm.labels.city">Ciudad</label><input id="cfg-city" type="text" data-i18n-ph="accountForm.ph.city" /></div>
              <div class="form-row"><label for="cfg-postal" data-i18n="accountForm.labels.zip">Código postal</label><input id="cfg-postal" type="text" data-i18n-ph="accountForm.ph.zip" /></div>
            </div>
            <div class="form-actions"><button class="btn" type="submit" data-i18n="account.settings.save">Guardar cambios</button></div>
          </form>
        </div>
        <div class="settings-card">
          <h3><i class="fas fa-shield-alt"></i> <span data-i18n="account.settings.security">Seguridad</span></h3>
          <form id="config-pass-form">
            <div class="form-grid">
              <div class="form-row"><label for="cfg-pass1" data-i18n="accountForm.labels.newPassword">Nueva contraseña</label><input id="cfg-pass1" type="password" placeholder="********" /></div>
              <div class="form-row"><label for="cfg-pass2" data-i18n="accountForm.labels.repeatPassword">Repetir contraseña</label><input id="cfg-pass2" type="password" placeholder="********" /></div>
            </div>
            <div class="form-actions"><button class="btn" type="submit" data-i18n="account.settings.updatePassword">Actualizar contraseña</button></div>
          </form>
        </div>
      </section>

      <section class="section-content" id="section-compras">
        <h2 class="section-title"><i class="fas fa-shopping-bag"></i><span data-i18n="sections.misCompras">Mis Compras</span></h2>
        <div class="table-container">
          
          <div class="table-filter-inline" id="miscompras-filterbar">
            <input id="miscompras-search" type="text" data-i18n-ph="filters.search.miscompras" placeholder="Buscar mis compras…" aria-label="Buscar mis compras" />
            <button id="miscompras-clear" type="button" class="action-btn" style="min-width:auto;padding:.35rem .7rem;"><span data-i18n="filters.clear">Limpiar</span></button>
          </div>
            <table id="miscompras-table">
            <thead>
              <tr>
                <th data-i18n="tables.product">Producto</th>
                <th data-i18n="tables.date">Fecha</th>
                <th data-i18n="tables.value">Valor</th>
                <th data-i18n="tables.status">Estado</th>
                <th data-i18n="tables.claim">Reclamo</th>
              </tr>
            </thead>
            <tbody id="miscompras-body"><tr><td colspan="5" style="text-align:center;"><span data-i18n="labels.loading">Cargando…</span></td></tr></tbody>
          </table>
        </div>
      </section>

<section class="section-content" id="section-sorteos" style="display:none;">
<h2 class="section-title"><i class="fas fa-ticket-alt"></i><span data-i18n="sections.sorteoTitle"></span></h2>
<div class="srt-stats">
<!-- Tickets activos -->
<article class="srt-card gold">
<h3><span data-i18n="raffles.activeTickets"></span></h3>
<div class="val" id="srt-tickets-activos">--</div>
</article>
<!-- Upgrade Numina con barra e hitos -->
<article class="srt-card">
<h3>Upgrade Numina</h3>
<div class="val" id="srt-upgrade-valor">0 / 10,000</div>
<div aria-valuemax="10000" aria-valuemin="0" aria-valuenow="0" class="srt-progress" role="progressbar">
<div class="srt-track" id="srt-track">
<div class="srt-fill" id="srt-fill"></div>
<!-- Hitos -->
<span class="srt-hit" id="srt-25" style="left:25%"></span>
<span class="srt-hit" id="srt-50" style="left:50%"></span>
<span class="srt-hit" id="srt-100" style="left:100%"></span>
</div>
<div class="srt-marks">
<span class="srt-mark" style="left:25%">2,500</span>
<span class="srt-mark" style="left:50%">5,000</span>
<span class="srt-mark" style="left:100%">10,000</span>
</div>
</div>
</article>
</div>
<h3 class="section-title"><i class="fas fa-history"></i><span data-i18n="sections.raffleHistory"></span></h3>
<div class="table-container">

<div class="table-filter-inline" id="sorteos-filterbar">
  <input id="sorteos-search" type="text" data-i18n-ph="filters.search.raffles" placeholder="' + (window.dI18n? dI18n.t('filters.search.raffles') : 'Buscar sorteos…') + '" aria-label="' + (window.dI18n? dI18n.t('filters.search.raffles') : 'Buscar sorteos…') + '" />
  <button id="sorteos-clear" type="button" class="action-btn" style="min-width:auto;padding:.35rem .7rem;"><span data-i18n="filters.clear">Limpiar</span></button>
</div>
  <table id="sorteos-table">
<thead>
<tr>
<th data-i18n="raffles.date"></th>
<th data-i18n="raffles.name"></th>
<th data-i18n="raffles.ticketsUsed"></th>
</tr>
</thead>
<tbody id="sorteos-tbody">
<tr><td colspan="3" style="text-align:center;"><span data-i18n="labels.loading">Cargando…</span></td></tr>
</tbody>
</table>
</div>
</section>

      
      <!-- ===================== REFERIDOS (inserción mínima, sin romper lógica existente) ===================== -->
      <section class="section-content" id="section-referidos" style="display:none;">
        <h2 class="section-title"><i class="fas fa-users"></i><span data-i18n="sections.referidos">Referidos</span></h2>

        <div class="card" style="background:#0f0f0f;border:1px solid #222;border-radius:16px;padding:16px;margin-bottom:16px;">
          <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:10px;">
            <div style="color:#cfcfcf;font-size:14px;" id="refs-count-wrap"><span id="refs-label-confirmed" data-i18n="referrals.confirmed" data-fallback-es="Referidos confirmados" data-fallback-pt="Indicações confirmadas" data-fallback-en="Confirmed referrals">Referidos confirmados</span>: <strong id="refs-count">0/0</strong></div>
            <div style="color:#facc15;font-weight:800;font-size:14px;">Tickets: <strong id="refs-tickets">0</strong></div>
          </div>
          <div style="width:100%;background:#232323;border-radius:9999px;height:12px;overflow:hidden;margin-bottom:14px;">
            <div id="refs-bar-general" style="height:12px;background:#facc15;width:0;border-radius:9999px;"></div>
          </div>

          <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;margin:10px 0 8px;">
            <div style="color:#cfcfcf;font-size:14px;"><span id="refs-label-progress" data-i18n="referrals.progress" data-fallback-es="Progreso hacia próximo ticket" data-fallback-pt="Progresso para o próximo ticket" data-fallback-en="Progress to next ticket">Progreso hacia próximo ticket</span>: <strong id="refs-progress-count">0/3</strong></div>
          </div>
          <div style="width:100%;background:#232323;border-radius:9999px;height:12px;overflow:hidden;">
            <div id="refs-bar-progress" style="height:12px;background:#10b981;width:0;border-radius:9999px;"></div>
          </div>
        </div>

        
          <div class="table-filter-inline" id="referrals-filterbar">
            <input id="refs-search" type="text" data-i18n-ph="filters.search.referrals" placeholder="Buscar referidos…" aria-label="Buscar referidos" />
            <button id="refs-clear" type="button" class="action-btn" style="padding:.45rem .9rem;border:1px solid rgba(212,175,55,.35);background:transparent;color:#facc15;border-radius:.7rem;"><span data-i18n="filters.clear">Limpiar</span></button>
          </div>
    <div class="table-container">
          <table class="table" style="width:100%;border-collapse:collapse;">
            <thead>
              <tr style="text-align:left;background:#121212;color:#facc15;text-transform:uppercase;font-size:12px;letter-spacing:.08em;">
                <th style="padding:12px 16px;border-bottom:1px solid #1f1f1f;" data-i18n="tables.referral">Referido</th>
                <th style="padding:12px 16px;border-bottom:1px solid #1f1f1f;" data-i18n="tables.date">Fecha</th>
                <th style="padding:12px 16px;border-bottom:1px solid #1f1f1f;" data-i18n="tables.status">Estado</th>
              </tr>
            </thead>
            <tbody id="refs-tbody"></tbody>
          </table>
        </div>

        <div style="margin-top:16px;display:flex;justify-content:center;">
          <button id="refs-share" class="action-btn" style="background:#facc15;color:#111;font-weight:900;padding:10px 14px;border-radius:10px;border:1px solid #d4af37" data-i18n="referrals.shareLink">
            Compartir enlace de invitación
          </button>
        </div>
      </section>
    
<section class="section-content" id="section-productos">
        <div class="products-wrap">
          <h2 class="section-title"><i class="fas fa-box"></i><span id="productos-title" data-i18n="catalog.title">Catálogo</span></h2>
          <section class="products-grid">
            <article class="product-card">
              <figure class="product-media">
                <svg role="img" aria-label="Lingote de Oro" viewBox="0 0 640 360" width="100%" height="100%" preserveAspectRatio="xMidYMid slice"><defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0%" stop-color="#4b4300"/><stop offset="100%" stop-color="#8a7a00"/></linearGradient></defs><rect width="640" height="360" fill="url(#g1)"/><text x="50%" y="52%" text-anchor="middle" fill="#fff" font-family="Montserrat, sans-serif" font-weight="700" font-size="36">Lingote de Oro</text></svg>
              </figure>
              <div class="product-body">
                <h3 class="product-title" data-i18n="catalog.goldTitle">Lingote de Oro</h3>
                <p class="product-desc" data-i18n="catalog.goldDesc">Oro 999.9 certificado. Ideal para inversión y resguardo de valor.</p>
                <span class="price">US$ 13,500</span>
                <button class="btn" data-action="more" data-sku="GOLD-100G" data-i18n="catalog.moreInfo">Más información</button>
              </div>
            </article>
            <article class="product-card">
              <figure class="product-media">
                <svg role="img" aria-label="Lingote de Platino" viewBox="0 0 640 360" width="100%" height="100%" preserveAspectRatio="xMidYMid slice"><defs><linearGradient id="g2" x1="0" x2="1"><stop offset="0%" stop-color="#2e3136"/><stop offset="100%" stop-color="#6a6f78"/></linearGradient></defs><rect width="640" height="360" fill="url(#g2)"/><text x="50%" y="52%" text-anchor="middle" fill="#fff" font-family="Montserrat, sans-serif" font-weight="700" font-size="36">Lingote de Platino</text></svg>
              </figure>
              <div class="product-body">
                <h3 class="product-title" data-i18n="catalog.platinumTitle">Lingote de Platino</h3>
                <p class="product-desc" data-i18n="catalog.platinumDesc">Platino 999.5 certificado. Inversión de alto valor y rareza.</p>
                <span class="price">US$ 6,500</span>
                <button class="btn" data-action="more" data-sku="PLAT-100G" data-i18n="catalog.moreInfo">Más información</button>
              </div>
            </article>
            <article class="product-card">
              <figure class="product-media">
                <svg role="img" aria-label="Rolex 126610L" viewBox="0 0 640 360" width="100%" height="100%" preserveAspectRatio="xMidYMid slice"><defs><linearGradient id="g3" x1="0" x2="1"><stop offset="0%" stop-color="#0d1f14"/><stop offset="100%" stop-color="#1d6c3a"/></linearGradient></defs><rect width="640" height="360" fill="url(#g3)"/><text x="50%" y="52%" text-anchor="middle" fill="#fff" font-family="Montserrat, sans-serif" font-weight="700" font-size="34">Rolex 126610L</text></svg>
              </figure>
              <div class="product-body">
                <h3 class="product-title">Rolex 126610L</h3>
                <p class="product-desc" data-i18n="catalog.rolexDesc">Submariner Date con bisel verde y caja Oystersteel. Automático.</p>
                <span class="price">US$ 19,600</span>
                <button class="btn" data-action="more" data-sku="ROLEX-126610L" data-i18n="catalog.moreInfo">Más información</button>
              </div>
            </article>
            <article class="product-card">
              <figure class="product-media">
                <svg role="img" aria-label="Pulsera Numina" viewBox="0 0 640 360" width="100%" height="100%" preserveAspectRatio="xMidYMid slice"><defs><linearGradient id="g4" x1="0" x2="1"><stop offset="0%" stop-color="#2a0d2d"/><stop offset="100%" stop-color="#6f1d75"/></linearGradient></defs><rect width="640" height="360" fill="url(#g4)"/><text x="50%" y="52%" text-anchor="middle" fill="#fff" font-family="Montserrat, sans-serif" font-weight="700" font-size="34">Pulsera Numina</text></svg>
              </figure>
              <div class="product-body">
                <h3 class="product-title" data-i18n="catalog.braceletTitle">Pulsera Numina</h3>
                <p class="product-desc" data-i18n="catalog.braceletDesc">Diseño exclusivo con materiales de alta calidad. Edición limitada.</p>
                <span class="price">US$ 35</span>
                <button class="btn" data-action="more" data-sku="NUMINA-BRACELET" data-i18n="catalog.moreInfo">Más información</button>
              </div>
            </article>
          </section>
        </div>
      </section>
    <div class="nm-overlay" hidden="" id="nmOverlay" inert="">
<div aria-labelledby="nmTitle" aria-modal="true" class="nm-modal" role="dialog">
<header>
<h3 id="nmTitle"><span data-i18n="raffles.activeTickets"></span></h3>
<button aria-label="Cerrar" class="nm-close" id="nmClose">✕</button>
</header>
<div class="nm-body">
<div class="nm-imgbox"><img alt="Producto" id="nmImg"/></div>
<div class="nm-info">
<span class="label" id="nmSku" style="display:inline-block;padding:.15rem .5rem;border-radius:999px;background:#2a2a2a;color:#d7d7d7;font-size:12px;margin-bottom:12px"></span>
<h4 id="nmName">—</h4>
<p class="nm-desc" id="nmDesc">—</p>
<div class="nm-price" id="nmPrice">—</div>
<div class="nm-pitch" id="nmPitch" style="display:none"></div>
<div class="nm-actions">
<button class="nm-buy" id="nmBuy"><span data-i18n="product.buy">Comprar</span></button>
</div>
<p class="nm-note"><span data-i18n="product.shippingNote">Envíos asegurados con seguimiento. Certificado incluido.</span></p>
</div>
</div>
</div>
</main>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2.39.0"></script>
  <script>
    (function(){
      const URL = 'https://xaeybhscsxpvtnqzpgwj.supabase.co';
      const KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhhZXliaHNjc3hwdnRucXpwZ3dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5MjQ0NzYsImV4cCI6MjA2OTUwMDQ3Nn0.o470dGkIyNKNP552A6DUB3pkJI3Lty9AZOdCmo3MQvU';
      let _client = null;
      window.getSupabase = function(){ if (_client) return _client; _client = window.supabase.createClient(URL, KEY, { auth: { persistSession: true, autoRefreshToken: true, detectSessionInUrl: true, storage: localStorage } }); return _client; }; window.__SB_BASE = URL; window.__SB_ANON = KEY;
    })();
  </script>

  <script>
    function ready(fn){ if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fn); else fn(); }
    function initLangMenu(){
      const dropdown = document.getElementById('langDropdown');
      const btn = document.getElementById('langBtn');
      const menu = document.getElementById('langMenu');
      const currentSpan = document.getElementById('langCurrentText');
      window.__updateLangLabel = function(){
        const L = (window.dI18n && dI18n.lang) || 'es';
        currentSpan.textContent = (L==='en')? 'English' : (L==='pt')? 'Português' : 'Español';
      };
      __updateLangLabel();
      const openMenu = ()=>{ dropdown.classList.add('open'); btn.setAttribute('aria-expanded','true'); };
      const closeMenu = ()=>{ dropdown.classList.remove('open'); btn.setAttribute('aria-expanded','false'); };
      btn.addEventListener('click', (e)=>{ e.stopPropagation(); dropdown.classList.contains('open')? closeMenu() : openMenu(); });
      menu.querySelectorAll('.lang-item').forEach(item=>{
        item.addEventListener('click', (e)=>{
          e.stopPropagation();
          const lang = item.dataset.lang;
          dI18n.set(lang);
          menu.querySelectorAll('.lang-item').forEach(li=> li.setAttribute('aria-selected', li.dataset.lang===lang? 'true':'false'));
          closeMenu();
        });
      });
      document.addEventListener('click', (e)=>{ if (!dropdown.contains(e.target)) closeMenu(); });
    }
    function initCopyButton(){
      const btn = document.getElementById('copy-btn');
      const codeEl = document.getElementById('referral-code');
      if (!btn || !codeEl) return;
      btn.addEventListener('click', async ()=>{
        const code = codeEl.textContent;
        try {
          if (navigator.clipboard && window.isSecureContext) { await navigator.clipboard.writeText(code); }
          else { const ta = document.createElement('textarea'); ta.value = code; ta.style.position='fixed'; ta.style.opacity=0; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); }
          btn.textContent = dI18n.t('actions.copied');
          setTimeout(()=> btn.textContent = dI18n.t('actions.copy'), 2000);
        } catch(e){ alert('No se pudo copiar el código. Intenta manualmente.'); console.error(e); }
      });
    }
    async function cargarDashboard(){
      document.getElementById('welcome-title').textContent = dI18n.t('labels.loading');
      document.getElementById('referral-code').textContent = '---';
      document.getElementById('balance-value').textContent = 'MYSTERY BOX'; // NUMINA: oculto saldo
      document.getElementById('purchases-value').textContent = '--';
      document.getElementById('referrals-value').textContent = '--';
      document.getElementById('tickets-value').textContent = '--';
      ['full-name','user-email','user-phone','user-address','user-country','user-city','user-postal'].forEach(id=> setText(id, ''));
      document.getElementById('purchases-body').innerHTML = '<tr><td colspan="5" style="text-align:center;">'+dI18n.t('labels.loading')+'</td></tr>';
      document.getElementById('referrals-body').innerHTML = '<tr><td colspan="5" style="text-align:center;">'+dI18n.t('labels.loading')+'</td></tr>';
      const supabase = getSupabase();
      const { data: { user }, error: authError } = await supabase.auth.getUser();
      if (authError || !user) { window.location.href = '/login.html'; return; }
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('*, purchases(*), referrals:referrals!referrer_id(*)')
        .eq('id', user.id)
        .maybeSingle();
      if (userError || !userData) { console.error(userError); return; }
      document.getElementById('user-avatar').textContent = (userData.full_name?.charAt(0).toUpperCase() || 'U');
      window.__lastUserName = (userData.full_name || userData.email || '').trim();
      document.getElementById('welcome-title').textContent = (dI18n.t('labels.welcome') + ', ' + (window.__lastUserName || '')).trim();
      document.getElementById('referral-code').textContent = (userData.referral_code || '---');
      document.getElementById('balance-value').textContent = 'MYSTERY BOX'; // NUMINA: oculto saldo
      /* NUMINA: compras activas = count(purchases) con status activo */
(function(){
  const el = document.getElementById('purchases-value');
  try {
    const activeSet = new Set(['paid','pending','pagado','pendiente']);
    const list = Array.isArray(userData.purchases) ? userData.purchases : [];
    let count = list.filter(p => activeSet.has(String(p?.status || '').toLowerCase())).length;
    if (count === 0) {
      // Fallback: consultar directo a la tabla por si no llegó el embed
      (async ()=>{
        try{
          const { data: prow, error: perr } = await supabase
            .from('purchases')
            .select('status')
            .eq('user_id', user.id)
            .in('status', ['paid','pending']);
          if (!perr && Array.isArray(prow)) {
            el.textContent = String(prow.length);
            return;
          }
        }catch(e){ /* noop */ }
        el.textContent = String(userData.active_purchases ?? '0');
      })();
    }
    el.textContent = String(count || userData.active_purchases || '0');
  } catch(e){
    el.textContent = String(userData.active_purchases || '0');
  }
})();

      document.getElementById('referrals-value').textContent = (typeof userData.referrals_count !== 'undefined' ? userData.referrals_count : (userData.referrals?.length || '0'));
      /* NUMINA: tickets activos = suma del ledger (positivos + negativos) */
try {
  const { data: trows, error: terr } = await supabase
    .from('tickets_ledger')
    .select('count')
    .eq('user_id', user.id);
  if (!terr && Array.isArray(trows)) {
    const sum = trows.reduce((acc, r) => acc + (Number(r?.count) || 0), 0);
    document.getElementById('tickets-value').textContent = String(sum);
  } else {
    document.getElementById('tickets-value').textContent = (userData.tickets_count || '0');
  }
} catch(e) {
  console.warn('tickets ledger sum', e);
  document.getElementById('tickets-value').textContent = (userData.tickets_count || '0');
}

      setText('full-name', userData.full_name);
      setText('user-email', userData.email);
      setText('user-phone', userData.phone);
      setText('user-address', userData.address);
      setText('user-country', userData.country);
      setText('user-city', userData.city);
      setText('user-postal', userData.postal_code);
      const purchasesBody = document.getElementById('purchases-body');
      if (userData.purchases?.length){
        purchasesBody.innerHTML = userData.purchases.map(p=>{
          const created = p.created_at ? new Date(p.created_at).toLocaleDateString() : '';
          const value = (typeof p.value === 'number') ? p.value.toFixed(2) : '0.00';
          return `<tr data-purchase-id="${p.id}"><td>${(window.i18nProductName?window.i18nProductName(p.product_name||''):(p.product_name||''))}</td>
            <td>${created}</td>
            <td>$${value}</td>
            <td>${statusBadge(p.status)}</td>
            <td><button class="action-btn" data-action="details" data-purchase-id="${p.id}" data-id="${p.id || ''}"><span data-i18n="tables.details">${dI18n.t('tables.details')}</span></button></td>
          </tr>`;
        }).join('');
      } else {
        purchasesBody.innerHTML = '<tr><td colspan=\"5\" style=\"text-align:center;\"><span data-i18n=\"purchases.none\">Sin compras</span></td></tr>';
      }
      const referralsBody = document.getElementById('referrals-body');
      if (userData.referrals?.length){
       referralsBody.innerHTML = userData.referrals.map(r=>{
  const created   = r.created_at ? new Date(r.created_at).toLocaleDateString() : '';
  const purchases = Number(r.purchases_count) || 0;
  const tickets   = Math.floor(purchases / 3);

  // Regla: si compras < 1 → PENDIENTE; si no, respeta activo/inactivo
  const effectiveStatus = (purchases >= 1)
    ? (r.is_active ? 'active' : 'inactive')
    : 'pending';

  return `<tr><td>${r.referred_email || ''}</td>
    <td>${created}</td>
    <td>${purchases}</td>
    <td>${statusBadge(effectiveStatus)}</td>
    <td>${tickets}</td>
  </tr>`;
}).join('');

      } else {
        referralsBody.innerHTML = '<tr><td colspan="5" style="text-align:center;"><span data-i18n="referrals.none">'+dI18n.t('referrals.none')+'</span></td></tr>';
      }
      ['balance-value','purchases-value','referrals-value','tickets-value'].forEach(id=>{
        const valEl = document.getElementById(id); if (!valEl) return;
        if (!/\$?---|--/.test(valEl.textContent)){
          const change = valEl.parentElement.querySelector('.change');
          if (change) change.style.display = 'none';
        }
      });
    }
    async function cargarMisCompras(){
      const tbody = document.getElementById('miscompras-body');
      if (tbody) tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;">'+dI18n.t('labels.loading')+'</td></tr>';
      const supabase = getSupabase();
      const { data: { user }, error: authError } = await supabase.auth.getUser();
      if (authError || !user){ window.location.href = '/login.html'; return; }
      const { data, error } = await supabase
        .from('purchases')
        .select('*')
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });
      if (error || !Array.isArray(data)){
        if (tbody) tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;"><span data-i18n="purchases.none">'+dI18n.t('purchases.none')+'</span></td></tr>';
        console.error(error);
        return;
      }
      if (!data.length){
        if (tbody) tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;"><span data-i18n="purchases.none">'+dI18n.t('purchases.none')+'</span></td></tr>';
        return;
      }
      tbody.innerHTML = data.map(p=>{
        const created = p.created_at ? new Date(p.created_at).toLocaleDateString() : '';
        const value = (typeof p.value === 'number') ? p.value.toFixed(2) : '0.00';
        const claimCell = '<button class="action-btn" data-action="claim" data-id="'+(p.id||'')+'">'+('<span data-i18n="tables.claim">'+(dI18n.t('tables.claim')||'Claim')+'</span>')+'</button>';
        return `<tr>
          <td>${(window.i18nProductName?window.i18nProductName(p.product_name||''):(p.product_name||''))}</td>
          <td>${created}</td>
          <td>$${value}</td>
          <td>${statusBadge(p.status)}</td>
          <td>${claimCell}</td>
        </tr>`;
      }).join('');
    }
    function initNav(){
      const menuItems = document.querySelectorAll('.menu-item[data-target]');
      const sections = document.querySelectorAll('.section-content');
      const mainDashboard = document.getElementById('main-dashboard');
      menuItems.forEach(item=>{
        item.addEventListener('click', ()=>{
          const target = item.getAttribute('data-target');
          menuItems.forEach(i=> i.classList.remove('active'));
          item.classList.add('active');
          if (target === 'dashboard'){ mainDashboard.style.display = 'block'; sections.forEach(s=> s.style.display='none'); cargarDashboard(); return; }
          if (target === 'logout'){ return; }
          mainDashboard.style.display = 'none';
          sections.forEach(s=> s.style.display = (s.id === 'section-'+target ? 'block' : 'none'));
          if (target === 'compras') { cargarMisCompras(); }
          if (target === 'sorteos') { cargarSorteos(); }
        });
      });
    }
    function initConfig(supabase){
      (async function(){
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;
        const { data } = await supabase
          .from('users')
          .select('full_name,phone,address,country,city,postal_code')
          .eq('id', user.id)
          .maybeSingle();
        if (!data) return;
        const $ = (id)=>document.getElementById(id);
        if ($('cfg-fullname')) $('cfg-fullname').value = data.full_name || '';
        if ($('cfg-phone')) $('cfg-phone').value = data.phone || '';
        if ($('cfg-address')) $('cfg-address').value = data.address || '';
        if ($('cfg-country')) $('cfg-country').value = data.country || '';
        if ($('cfg-city')) $('cfg-city').value = data.city || '';
        if ($('cfg-postal')) $('cfg-postal').value = data.postal_code || '';
      })();
      const datos = document.getElementById('config-datos-form');
      if (datos) datos.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const updates = {
          full_name: (document.getElementById('cfg-fullname').value||'').trim() || null,
          phone:     (document.getElementById('cfg-phone').value||'').trim() || null,
          address:   (document.getElementById('cfg-address').value||'').trim() || null,
          country:   (document.getElementById('cfg-country').value||'').trim() || null,
          city:      (document.getElementById('cfg-city').value||'').trim() || null,
          postal_code:(document.getElementById('cfg-postal').value||'').trim() || null,
        };
        const { data: { user } } = await supabase.auth.getUser();
        if (!user){ alert('Sesión expirada'); return; }
        const { error } = await supabase.from('users').update(updates).eq('id', user.id);
alert('Cambios guardados');
        setText('full-name', updates.full_name);
        setText('user-phone', updates.phone);
        setText('user-address', updates.address);
        setText('user-country', updates.country);
        setText('user-city', updates.city);
        setText('user-postal', updates.postal_code);
      });
      const pass = document.getElementById('config-pass-form');
      if (pass) pass.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const p1 = document.getElementById('cfg-pass1').value;
        const p2 = document.getElementById('cfg-pass2').value;
        if (!p1 || p1.length < 6){ alert('La contraseña debe tener al menos 6 caracteres'); return; }
        if (p1 !== p2){ alert('Las contraseñas no coinciden'); return; }
        const { error } = await supabase.auth.updateUser({ password: p1 });
alert('Contraseña actualizada');
        pass.reset();
      });
    }
    ready(async ()=>{
      initLangMenu();
      initCopyButton();
      initNav();
      dI18n.apply();
      const supabase = getSupabase();
      await cargarDashboard();
      initConfig(supabase);
      document.getElementById('logout-btn')?.addEventListener('click', async ()=>{ await getSupabase().auth.signOut(); window.location.href = '/login.html'; });
    });
  </script>
<script>

// NUMINA: Catálogo y modal a pantalla completa (sin aria-hidden warnings)

  function applyI18n(container){

  }
    /* i18n fallback handled inline on open */
    /* i18n fallback handled inline on open */
  

    try{
      if (window.dI18n && typeof dI18n.translateNode === 'function'){ dI18n.translateNode(container||document.body); }
      else if (window.applyTranslations){ window.applyTranslations(container||document); }
      else if (window.dI18n && typeof dI18n.refresh === 'function'){ dI18n.refresh(); }
    }catch(e){}
  

  document.addEventListener('DOMContentLoaded', function(){
  const CATALOG = {
    "GOLD-100G": { sku:"GOLD-100G", name:"Lingote 100g Oro Fino 999.9", price:13500,
      img:"https://images.unsplash.com/photo-1623301762237-5b1056f3ce2d?q=80&w=1600&auto=format&fit=crop",
      pitch:"\ud83d\udcb0 <strong>Oro: Proteg\u00e9 tu dinero, asegur\u00e1 tu futuro</strong><br>Cuando todo sube y baja, el oro se mantiene firme. Es el activo refugio elegido por inversores de todo el mundo para proteger su patrimonio frente a la inflaci\u00f3n y la inestabilidad. El oro no depende de gobiernos ni bancos centrales: su valor es global, tangible y eterno. Comprarlo hoy es asegurarte un respaldo real que pod\u00e9s tener en tus manos y vender en cualquier momento. Invert\u00ed en oro y transform\u00e1 tu dinero en un activo que nunca pasa de moda y siempre vale.",
      desc:"Lingote de 100 g de oro 999.9 con número de serie y certificado internacional. Alta liquidez y resguardo de valor." },
    "PLAT-100G": { sku:"PLAT-100G", name:"Lingote 100g Platino Fino 999.5", price:6500,
      img:"https://images.unsplash.com/photo-1617195737499-1d6bf14acaa7?q=80&w=1600&auto=format&fit=crop",
      pitch:"\ud83d\udc8e <strong>Platino: Exclusividad y potencial de crecimiento</strong><br>M\u00e1s escaso que el oro y con aplicaciones industriales cr\u00edticas (catalizadores, tecnolog\u00eda y joyer\u00eda), el platino combina lujo con oportunidad. Su rareza y demanda lo posicionan como un metal con fuerte potencial de revalorizaci\u00f3n a largo plazo. Asegur\u00e1 una parte de un recurso limitado, valioso y buscado en todo el mundo.",
      desc:"Lingote de 100 g de platino 999.5. Metal escaso, con potencial de revalorización a largo plazo." },
    "ROLEX-126610L": { sku:"ROLEX-126610L", name:"Rolex Submariner Date 126610LV", price:19600,
      img:"https://images.unsplash.com/photo-1524805444758-089113d48a6d?q=80&w=1600&auto=format&fit=crop",
      pitch:"\u231a <strong>Rolex Submariner \u201cStarbucks\u201d \u2013 S\u00faper Deportiva y Atemporal</strong><br>Con una caja Oystersteel de 41\u202fmm y bisel verde Cerachrom rotatorio unidireccional, este Submariner conserva ese dise\u00f1o ic\u00f3nico y elegante que lo define. Resistente al agua hasta 300 metros, cuenta con cristal de zafiro con lupa Cyclops y corona Triplock, combinando resistencia con claridad. Su calibre autom\u00e1tico 3235 de manufactura Rolex ofrece 70 horas de reserva de marcha, precisi\u00f3n certificada tipo cron\u00f3metro y protecci\u00f3n avanzada como resistencia a golpes y a campos magn\u00e9ticos. El brazalete Oyster con cierre Oysterlock y sistema Glidelock permite ajustes finos sin herramientas, adapt\u00e1ndose tanto a buceo como a uso diario. En conjunto, es el equilibrio perfecto entre tradici\u00f3n, ingenier\u00eda moderna y estilo deportivo de lujo.",
      desc:"Modelo 'Starbucks' con bisel cerámico verde y caja Oystersteel. Movimiento automático y hermeticidad profesional." },
    "NUMINA-BRACELET": { sku:"NUMINA-BRACELET", name:"Pulsera Numina – Edición Limitada", price:35,
      img:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?q=80&w=1600&auto=format&fit=crop",
      pitch:"\ud83d\udc8e <strong>Pulsera Numina \u2013 Estilo que te acerca a un Rolex</strong><br>Fabricada en <em>acero inoxidable premium</em>, dise\u00f1ada para durar y lucir impecable. Con cada pulsera obten\u00e9s <strong>1 ticket</strong> para participar en el <strong>sorteo de un Rolex Submariner</strong>.<br><br>\ud83c\udf9f <u>Mec\u00e1nica del sorteo</u>:<br>\u2022 Pulsera = 1 ticket<br>\u2022 Rolex = 5 tickets<br>\u2022 Oro Fino = 2 tickets<br>\u2022 Platino Fino = 2 tickets<br><br>\ud83c\udf81 <u>Premios especiales</u>:<br>\u2022 El comprador n\u00famero 2.500 recibir\u00e1 una <strong>Pulsera de Platino</strong>.<br>\u2022 El comprador n\u00famero 5.000 recibir\u00e1 una <strong>Pulsera de Oro</strong>.<br>\u2022 Si un usuario compra 2.500 pulseras en total, se le enviar\u00e1 una <strong>Pulsera de Platino</strong>.<br>\u2022 Si un usuario compra 5.000 pulseras en total, se le enviar\u00e1 una <strong>Pulsera de Oro</strong>.<br>\u2022 Si un usuario compra 10.000 pulseras en total, se le enviar\u00e1 una <strong>Pulsera de Oro Full Ice con diamantes</strong>.<br><br>Cuando llegue el momento del sorteo, <strong>asegurate de tener tu lugar</strong>.",
      desc:"Pulsera exclusiva con diseño minimalista y materiales de alta calidad. Incluye bolsita de microfibra." }
  };

  const $ = (s, c=document) => c.querySelector(s);
  const overlay = $("#nmOverlay");
  const modal    = overlay ? overlay.querySelector(".nm-modal") : null;
  const closeBtn = $("#nmClose");
  const buyBtn   = $("#nmBuy");
  const imgEl    = $("#nmImg");
  const nameEl   = $("#nmName");
  const descEl   = $("#nmDesc");
  const priceEl  = $("#nmPrice");
  const skuEl    = $("#nmSku");

  function money(v){ return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(v); }

  let currentSku = null;
  let lastTrigger = null;

  function trapFocus(e){
    if (!overlay || overlay.hasAttribute('hidden')) return;
    const focusable = overlay.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
    if (focusable.length === 0) return;
    const first = focusable[0];
    const last  = focusable[focusable.length - 1];
    if (e.key === 'Tab'){
      if (e.shiftKey && document.activeElement === first){ last.focus(); e.preventDefault(); }
      else if (!e.shiftKey && document.activeElement === last){ first.focus(); e.preventDefault(); }
    }
  }

  
function i18nKeysForSKU(sku){
  try{
    const id = String(sku || '').toUpperCase();
    if (id.includes('GOLD') || id === 'GOLD-100G') return {name:'product.lingote_100g_oro_fino', desc:'catalog.goldDesc', pitch:'catalog.goldPitch'};
    if (id.includes('PLAT') || id === 'PLAT-100G') return {name:'product.lingote_100g_platino_fino', desc:'catalog.platinumDesc', pitch:'catalog.platinumPitch'};
    if (id.includes('ROLEX') || id.includes('126610L')) return {name:'product.rolex_126610lv', desc:'catalog.rolexDesc', pitch:'catalog.rolexPitch'};
    if (id.includes('BRACELET')) return {name:'product.bracelet', desc:'catalog.braceletDesc', pitch:'catalog.braceletPitch'};
  }catch(_){}
  return null;
}

function openSKU(sku, trigger){
    const p = CATALOG[sku];
    if(!p || !overlay) return;
    currentSku = sku;
    lastTrigger = trigger || document.activeElement;

    if (skuEl)  skuEl.textContent  = p.sku;
    if(nameEl){ var k=i18nKeysForSKU(sku); if(k){ nameEl.innerHTML='<span data-i18n="'+k.name+'">'+(dI18n.t(k.name)||p.name)+'</span>'; } else { nameEl.textContent=p.name; } }
    if(descEl){ var k=i18nKeysForSKU(sku); if(k){ descEl.innerHTML='<span data-i18n="'+k.desc+'">'+(dI18n.t(k.desc)||p.desc)+'</span>'; } else { descEl.textContent=p.desc; } }
    if (priceEl)priceEl.textContent= money(p.price);
    try{ if (window.document && typeof p.price === 'number') { var __buy=document.getElementById('nmBuy'); if(__buy){ __buy.dataset.price = String(p.price); __buy.dataset.sku = p.sku || ''; } } }catch(_){ }
if (imgEl)  imgEl.src          = p.img;
    try{ if(window.dI18n) dI18n.apply(); }catch(_){ }
    try{ if(window.dI18n) dI18n.apply(); }catch(_){ }

    
    // Ensure price appears before description and pitch is placed after price
    try {
      if (descEl && priceEl && descEl.previousElementSibling !== priceEl) {
        descEl.parentNode.insertBefore(priceEl, descEl);
      }
      var pitchEl = document.getElementById('nmPitch');
      if (pitchEl) {
        if (p.pitch) { var __k=i18nKeysForSKU(sku); if(__k && __k.pitch){ pitchEl.innerHTML = '<span data-i18n="'+__k.pitch+'">'+(dI18n.t(__k.pitch)||p.pitch)+'</span>'; } else { pitchEl.innerHTML = p.pitch; }
          pitchEl.style.display = '';
          try{ if(window.dI18n) dI18n.apply(); }catch(_){ }
        // make sure pitch is right after price
          if (priceEl.nextElementSibling !== pitchEl) {
            priceEl.parentNode.insertBefore(pitchEl, descEl);
          }
        } else {
          pitchEl.style.display = 'none';
          pitchEl.innerHTML = '';
        }
      }
    } catch(e) { console.warn('Pitch render skipped:', e); }
      if (!pitchEl) {
        if (p.pitch && descEl) {
          try {
            descEl.innerHTML = p.pitch + '<br><br>' + (p.desc || '');
          } catch(_) {
            descEl.textContent = (p.desc || '');
          }
        }
      }

overlay.classList.add("show");
    overlay.removeAttribute("hidden");
    overlay.removeAttribute("inert");
    if (modal) { modal.setAttribute("tabindex","-1"); modal.focus({preventScroll:true}); }
    if (closeBtn) closeBtn.focus({preventScroll:true});
    document.addEventListener('keydown', trapFocus);
  }

  function close(){
    if (!overlay) return;
    overlay.classList.remove("show");
    overlay.setAttribute("hidden","");
    overlay.setAttribute("inert","");
    document.removeEventListener('keydown', trapFocus);
    if (lastTrigger && typeof lastTrigger.focus === 'function') {
      setTimeout(()=> lastTrigger.focus(), 0);
    }
  }

  // Delegación: abrir modal
  document.addEventListener("click", (e) => {
    const btn = e.target.closest('button[data-action=\"more\"][data-sku], button[data-product]');
    if (btn) {
      e.preventDefault();
      const sku = btn.getAttribute('data-sku') || btn.getAttribute('data-product');
      openSKU(sku, btn);
    }
  });

  // Botón comprar (crea purchase -> invoca Edge Function -> redirige)
  if (buyBtn) buyBtn.addEventListener('click', async () => {
    try {
      if (!currentSku) return;
      // 1) validar sesión
      const supabase = getSupabase();
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) {
        alert('Inicia sesión para continuar con la compra.');
        window.location.href = '/login.html';
        return;
      }
      // 2) obtener datos del producto
      const p = CATALOG[currentSku];
      if (!p) { alert('Producto desconocido'); return; }

      // 3) crear registro local de compra
      const { data: purchase, error: insertErr } = await supabase
        .from('purchases')
        .insert({
          user_id: user.id,
          product_name: p.name,
          sku: p.sku,
          value: p.price,
          currency: 'USDT',
          status: 'pending'
        })
        .select('id')
        .single();
      if (insertErr || !purchase) {
        console.error(insertErr);
        alert('No se pudo crear la compra. Intenta nuevamente.');
        return;
      }

      // 4) invocar Edge Function autenticada (maneja CORS internamente)
/* skipped: using fixed payment links */
// --- NOWPayments prebuilt link mode ---
// p.sku must be one of: 'gold_100g_9999', 'platinum_100g_9995', 'rolex_126610LV', 'bracelet_numina'
const PAYMENT_LINKS = {
  
  gold_100g_9999:    '#',  // 13,500 USDT
  platinum_100g_9995:'#',  // 6,500 USDT
  rolex_126610LV:    '#',  // 19,600 USDT
  bracelet_numina:   '#'   // 35 USDT
};

const link = PAYMENT_LINKS[p.sku];
if (!link) {
  alert('No payment link configured for product: ' + p.sku);
} else {
  // optional: attach order_id so you can reconcile later (NOWPayments ignores unknown params harmlessly)
  const orderId = `ORD-${p.sku}-${Date.now()}`;
  const url = link + (link.includes('?') ? '&' : '?') + 'order_id=' + encodeURIComponent(orderId);
  window.location.href = url;
}
} catch (e) {
      console.error(e);
      alert('Error inesperado: ' + (e?.message || e));
    }
  });

  // Cerrar modal
  if (closeBtn) closeBtn.addEventListener('click', close);
  if (overlay) overlay.addEventListener('click', (e)=>{ if(e.target===overlay) close(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });
});

</script>

<script>
// === NUMINA product modal wiring with i18n-safe content ===
(function(){
  function $(sel, ctx){ return (ctx||document).querySelector(sel); }
  function $all(sel, ctx){ return Array.from((ctx||document).querySelectorAll(sel)); }

  const OVERLAY = $('#nmOverlay');
  const BTN_CLOSE = $('#nmClose');
  const EL_SKU = $('#nmSku');
  const EL_NAME = $('#nmName');
  const EL_DESC = $('#nmDesc');
  const EL_PRICE = $('#nmPrice');
  const EL_PITCH = $('#nmPitch');
  const EL_IMG = $('#nmImg');
  const EL_TITLE = $('#nmTitle');
  const EL_BUY = $('#nmBuy');

  const MAP = {
    "GOLD-100G": {
      keyName: "product.lingote_100g_oro_fino",
      keyDesc: "catalog.goldDesc",
      keyPitch: "catalog.goldPitch",
      src: null
    },
    "PLAT-100G": {
      keyName: "product.lingote_100g_platino_fino",
      keyDesc: "catalog.platinumDesc",
      keyPitch: "catalog.platinumPitch",
      src: null
    },
    "ROLEX-126610L": {
      keyName: "product.rolex_126610lv",
      keyDesc: "catalog.rolexDesc",
      keyPitch: "catalog.rolexPitch",
      src: null
    },
    "NUMINA-BRACELET": {
      keyName: "product.bracelet",
      keyDesc: "catalog.braceletDesc",
      keyPitch: "catalog.braceletPitch",
      src: null
    }
  };

  function trapFocus(open){
    if (!open){ document.body.style.overflow=''; return; }
    document.body.style.overflow='hidden';
  }
  function openSKU(sku, srcEl){
    try{
      const conf = MAP[sku] || {};
      const card = srcEl?.closest('.product-card');
      // Trying to get a representative image (svg) snapshot as data url is overkill – just mirror the SVG via outerHTML into an <img> via Blob URL would require extra work.
      // We'll keep a simple placeholder.
      if (EL_IMG) { EL_IMG.alt = dI18n.t(conf.keyName || 'catalog.title'); EL_IMG.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='; }
      if (EL_SKU) EL_SKU.textContent = sku || '';
      if (EL_PRICE) EL_PRICE.textContent = (card ? (card.querySelector('.price')?.textContent || '—') : '—');

      // Build i18n-wrapped elements so switching language updates instantly
      if (EL_NAME) EL_NAME.innerHTML = '<span data-i18n="'+(conf.keyName||'catalog.title')+'">'+dI18n.t(conf.keyName||'catalog.title')+'</span>';
      if (EL_TITLE) EL_TITLE.innerHTML = '<span data-i18n="'+(conf.keyName||'catalog.title')+'">'+dI18n.t(conf.keyName||'catalog.title')+'</span>';
      if (EL_DESC) EL_DESC.innerHTML = '<span data-i18n="'+(conf.keyDesc||'catalog.title')+'">'+dI18n.t(conf.keyDesc||'catalog.title')+'</span>';
      if (EL_PITCH){
        EL_PITCH.style.display = 'block';
        EL_PITCH.innerHTML = '<span data-i18n="'+(conf.keyPitch||'catalog.title')+'">'+dI18n.t(conf.keyPitch||'catalog.title')+'</span>';
      }

      OVERLAY?.classList.add('show');
      OVERLAY?.removeAttribute('hidden');
      OVERLAY?.removeAttribute('inert');
      trapFocus(true);
      dI18n.apply && dI18n.apply();
    }catch(e){ console.error(e); }
  }
  window.openSKU = openSKU;

  // Wire buttons
  $all('[data-action="more"]').forEach(function(btn){
    btn.addEventListener('click', function(){
      openSKU(this.getAttribute('data-sku'), this);
    });
  });

  BTN_CLOSE?.addEventListener('click', function(){
    OVERLAY?.classList.remove('show');
    OVERLAY?.setAttribute('hidden','');
    OVERLAY?.setAttribute('inert','');
    trapFocus(false);
  });
  OVERLAY?.addEventListener('click', function(e){
    if (e.target === OVERLAY){ BTN_CLOSE?.click(); }
  });
})();
</script>


<script>
// === Ensure sidebar labels are present and translated ===
(function(){
  function qsAll(sel, ctx){ return Array.from((ctx||document).querySelectorAll(sel)); }
  function ensureLabel(anchor, key, fallback){
    if (!anchor) return;
    var label = anchor.querySelector('.nav-label');
    if (!label){
      label = document.createElement('span');
      label.className = 'nav-label';
      label.setAttribute('data-i18n', key);
      try{
        label.textContent = (window.dI18n && dI18n.t(key)) || fallback;
      }catch(_){
        label.textContent = fallback;
      }
      anchor.appendChild(label);
    }else{
      if (!label.getAttribute('data-i18n')) label.setAttribute('data-i18n', key);
    }
  }

  var MAP = [
    {selector: 'a[href="#dashboard"], a[data-nav="dashboard"], a.nav-dashboard', key:'nav.dashboard', fallback:'Dashboard'},
    {selector: 'a[href="#compras"], a[data-nav="purchases"], a.nav-purchases', key:'nav.purchases', fallback:'Compras'},
    {selector: 'a[href="#sorteos"], a[data-nav="raffles"], a.nav-raffles', key:'nav.raffles', fallback:'Sorteos'},
    {selector: 'a[href="#referidos"], a[data-nav="referrals"], a.nav-referrals', key:'nav.referrals', fallback:'Referidos'},
    {selector: 'a[href="#catalogo"], a[data-nav="catalog"], a.nav-catalog', key:'nav.catalog', fallback:'Catálogo'},
    {selector: 'a[href="#configuracion"], a[data-nav="settings"], a.nav-settings', key:'nav.settings', fallback:'Configuración'},
    {selector: 'a[href="#logout"], a[data-nav="logout"], a.nav-logout', key:'nav.logout', fallback:'Cerrar sesión'}
  ];

  function apply(){
    MAP.forEach(function(m){
      qsAll(m.selector).forEach(function(a){ ensureLabel(a, m.key, m.fallback); });
    });
    try{ if (window.dI18n && dI18n.apply) dI18n.apply(); }catch(_){}
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', apply);
  }else{
    apply();
  }
})();
</script>


<script>
// === Ensure sidebar labels are present and translated ===
(function(){
  function qsAll(sel, ctx){ return Array.from((ctx||document).querySelectorAll(sel)); }
  function ensureLabel(anchor, key, fallback){
    if (!anchor) return;
    var label = anchor.querySelector('.nav-label');
    if (!label){
      label = document.createElement('span');
      label.className = 'nav-label';
      label.setAttribute('data-i18n', key);
      try{ label.textContent = (window.dI18n && dI18n.t(key)) || fallback; }catch(_){ label.textContent = fallback; }
      anchor.appendChild(label);
    }else{
      if (!label.getAttribute('data-i18n')) label.setAttribute('data-i18n', key);
    }
  }
  var MAP = [
    {selector: '.sidebar a[href="#dashboard"], .sidebar a[data-nav="dashboard"], .sidebar a.nav-dashboard', key:'nav.dashboard', fallback:'Dashboard'},
    {selector: '.sidebar a[href="#compras"], .sidebar a[data-nav="purchases"], .sidebar a.nav-purchases', key:'nav.purchases', fallback:'Compras'},
    {selector: '.sidebar a[href="#sorteos"], .sidebar a[data-nav="raffles"], .sidebar a.nav-raffles', key:'nav.raffles', fallback:'Sorteos'},
    {selector: '.sidebar a[href="#referidos"], .sidebar a[data-nav="referrals"], .sidebar a.nav-referrals', key:'nav.referrals', fallback:'Referidos'},
    {selector: '.sidebar a[href="#catalogo"], .sidebar a[data-nav="catalog"], .sidebar a.nav-catalog', key:'nav.catalog', fallback:'Catálogo'},
    {selector: '.sidebar a[href="#configuracion"], .sidebar a[data-nav="settings"], .sidebar a.nav-settings', key:'nav.settings', fallback:'Configuración'},
    {selector: '.sidebar a[href="#logout"], .sidebar a[data-nav="logout"], .sidebar a.nav-logout', key:'nav.logout', fallback:'Cerrar sesión'}
  ];
  function apply(){
    MAP.forEach(function(m){ qsAll(m.selector).forEach(function(a){ ensureLabel(a, m.key, m.fallback); }); });
    try{ if (window.dI18n && dI18n.apply) dI18n.apply(); }catch(_){}
  }
  if (document.readyState === 'loading'){ document.addEventListener('DOMContentLoaded', apply); } else { apply(); }
})();
</script>


<script id="auto-scale-75-js">
(function(){
  function apply(mq){
    var doc = document.documentElement;
    if (mq.matches) doc.classList.add('__uiScale75');
    else doc.classList.remove('__uiScale75');
  }
  var mq = window.matchMedia('(min-width: 1200px)');
  try{
    if (mq.addEventListener) mq.addEventListener('change', function(e){ apply(e); });
    else if (mq.addListener) mq.addListener(apply);
  }catch(_){}
  apply(mq);
})();
</script>
<script>
(function () {
  // 1) Enlaces fijos de NOWPayments por SKU
  /* NOWPayments links removed by ChatGPT: using placeholders */
  var FIXED_PAY_URL = {
    'NUMINA-BRACELET': '#', // USDT 35
    'GOLD-100G':       '#', // USDT 13500
    'PLAT-100G':       '#', // USDT 6500
    'ROLEX-126610L':   '#'  // USDT 19600
  };
  window.FIXED_PAY_URL = FIXED_PAY_URL;


  // 2) Garantiza que el SKU del botón "Más información" quede en el modal
  function wireMoreInfoButtons() {
    var moreBtns = document.querySelectorAll('[data-action="more"][data-sku]');
    moreBtns.forEach(function (btn) {
      btn.addEventListener('click', function () {
        var sku = btn.getAttribute('data-sku') || '';
        var skuEl = document.getElementById('nmSku');
        if (skuEl) { skuEl.textContent = sku; }
      });
    });
  }

  // 3) Conecta el botón "Comprar" del modal a los enlaces fijos
  function wireBuyButton() {
    var buyBtn = document.getElementById('nmBuy');
    if (!buyBtn) return;
    buyBtn.addEventListener('click', function () {
      var skuEl = document.getElementById('nmSku');
      var sku = skuEl ? String(skuEl.textContent || '').trim() : '';
      var url = FIXED_PAY_URL[sku];
      if (url) {
        window.open(url, '_blank', 'noopener'); // cobra SIEMPRE el importe exacto
      } else {
        // Si algún producto nuevo todavía no tiene link fijo configurado
        alert('Payment link not available for: ' + (sku || 'unknown SKU'));
      }
    });
  }

  function init() {
    wireMoreInfoButtons();
    wireBuyButton();
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>


<script>
(function(){
  function attachPurchasesFilter(){
    var input = document.getElementById('purchases-search');
    var clearBtn = document.getElementById('purchases-clear');
    var tbody = document.getElementById('purchases-body');
    if(!input || !tbody) return;
    function apply(){
      var q = (input.value||'').toLowerCase().trim();
      Array.prototype.forEach.call(tbody.querySelectorAll('tr'), function(tr){
        var text = tr.textContent.toLowerCase();
        tr.style.display = q==='' || text.indexOf(q)!==-1 ? '' : 'none';
      });
    }
    input.addEventListener('input', apply);
    if (clearBtn){
      clearBtn.addEventListener('click', function(){
        input.value='';
        apply();
        input.focus();
      });
    }
    window.__applyPurchasesFilter = apply;
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', attachPurchasesFilter);
  else attachPurchasesFilter();
  // Re-apply whenever the tbody is re-rendered
  var tb = document.getElementById('purchases-body');
  if (window.MutationObserver && tb){
    var obs = new MutationObserver(function(){ try{ window.__applyPurchasesFilter && __applyPurchasesFilter(); }catch(e){} });
    obs.observe(tb, {childList:true});
  }
})();
</script>


<script>
(function(){
  function attachReferralsFilter(){
    var input = document.getElementById('refs-search');
    var clearBtn = document.getElementById('refs-clear');
    var tbody = document.getElementById('referrals-body');
    if(!input || !tbody) return;
    function apply(){
      var q = (input.value||'').toLowerCase().trim();
      Array.prototype.forEach.call(tbody.querySelectorAll('tr'), function(tr){
        var text = tr.textContent.toLowerCase();
        tr.style.display = q==='' || text.indexOf(q)!==-1 ? '' : 'none';
      });
    }
    input.addEventListener('input', apply);
    if (clearBtn){
      clearBtn.addEventListener('click', function(){
        input.value='';
        apply();
        input.focus();
      });
    }
    window.__applyReferralsFilter = apply;
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', attachReferralsFilter);
  else attachReferralsFilter();
  // re-apply when tbody updates
  var tb = document.getElementById('referrals-body');
  if (window.MutationObserver && tb){
    var obs = new MutationObserver(function(){ try{ window.__applyReferralsFilter && __applyReferralsFilter(); }catch(e){} });
    obs.observe(tb, {childList:true});
  }
})();
</script>


<script>
(function(){
  function attachMisComprasFilter(){
    var input = document.getElementById('miscompras-search');
    var clearBtn = document.getElementById('miscompras-clear');
    var tbody = document.getElementById('miscompras-body');
    if(!input || !tbody) return;
    function apply(){
      var q = (input.value||'').toLowerCase().trim();
      Array.prototype.forEach.call(tbody.querySelectorAll('tr'), function(tr){
        var text = tr.textContent.toLowerCase();
        tr.style.display = q==='' || text.indexOf(q)!==-1 ? '' : 'none';
      });
    }
    input.addEventListener('input', apply);
    if (clearBtn){
      clearBtn.addEventListener('click', function(){
        input.value='';
        apply();
        input.focus();
      });
    }
    window.__applyMisComprasFilter = apply;
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', attachMisComprasFilter);
  else attachMisComprasFilter();
  // re-apply when tbody updates
  var tb = document.getElementById('miscompras-body');
  if (window.MutationObserver && tb){
    var obs = new MutationObserver(function(){ try{ window.__applyMisComprasFilter && __applyMisComprasFilter(); }catch(e){} });
    obs.observe(tb, {childList:true});
  }
})();
</script>


<script>
(function(){
  function attachSorteosFilter(){
    var input = document.getElementById('sorteos-search');
    var clearBtn = document.getElementById('sorteos-clear');
    var tbody = document.getElementById('sorteos-tbody');
    if(!input || !tbody) return;
    function apply(){
      var q = (input.value||'').toLowerCase().trim();
      Array.prototype.forEach.call(tbody.querySelectorAll('tr'), function(tr){
        var text = tr.textContent.toLowerCase();
        tr.style.display = q==='' || text.indexOf(q)!==-1 ? '' : 'none';
      });
    }
    input.addEventListener('input', apply);
    if (clearBtn){
      clearBtn.addEventListener('click', function(){
        input.value='';
        apply();
        input.focus();
      });
    }
    window.__applySorteosFilter = apply;
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', attachSorteosFilter);
  else attachSorteosFilter();
  var tb = document.getElementById('sorteos-tbody');
  if (window.MutationObserver && tb){
    var obs = new MutationObserver(function(){ try{ window.__applySorteosFilter && __applySorteosFilter(); }catch(e){} });
    obs.observe(tb, {childList:true});
  }
})();
</script>




<script>
// --- Hardening patch: force-translate the modal even if other i18n mutates texts ---
(function(){
  function lang(){
    try {
      if (window.dI18n && (dI18n.lang || dI18n.current || dI18n.locale)) return (dI18n.lang||dI18n.current||dI18n.locale);
    } catch(_) {}
    return document.documentElement.getAttribute('lang') || localStorage.getItem('lang') || 'es';
  }
  function dict(){
    const L = (lang()||'es').slice(0,2);
    // Prefer PD_I18N (our local dict); fallback to global DICT if available
    const local = (window.PD_I18N && window.PD_I18N[L]) || {};
    const global = (window.DICT && window.DICT[L]) || {};
    return Object.assign({}, global, local);
  }
  function translate(root){
    const d = dict();
    (root || document).querySelectorAll('#pdOverlay [data-i18n]').forEach(el=>{
      const k = el.getAttribute('data-i18n');
      if (d[k]) el.textContent = d[k];
    });
  }
  // Apply on ready and after a tick (in case other scripts run late)
  document.addEventListener('DOMContentLoaded', ()=>{
    translate(document);
    setTimeout(()=>translate(document), 50);
    setTimeout(()=>translate(document), 200);
  });
  // Re-apply whenever Details opens (the open handler should be present)
  document.addEventListener('click', (e)=>{
    if (e.target.closest('button.action-btn[data-action="details"]')) {
      setTimeout(()=>translate(document), 0);
      setTimeout(()=>translate(document), 50);
    }
  });
  // Observe changes inside the modal and translate any new nodes
  const obs = new MutationObserver(()=>translate(document));
  const overlay = document.getElementById('pdOverlay');
  if (overlay) obs.observe(overlay, {childList:true, subtree:true, characterData:true});
})();
</script>


<!-- ===== PURCHASE DETAILS MODAL (Numina style · static · no-keys i18n) ===== -->
<style id="pd-modal-styles">
  .pd-overlay{position:fixed;inset:0;background:rgba(0,0,0,.82);display:none;z-index:1100;padding:24px}
  .pd-overlay.show{display:block}
  .pd-modal{width:min(920px,95vw);margin:auto;border-radius:16px;
    background:linear-gradient(135deg,rgba(255,215,0,.06),rgba(255,215,0,.02) 24%,#111 60%);
    border:1px solid rgba(255,215,0,.14);box-shadow:0 18px 50px rgba(0,0,0,.55);color:#fff;font-family:Montserrat,system-ui,sans-serif}
  .pd-modal header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid rgba(255,215,0,.14)}
  .pd-modal header h3{margin:0;color:var(--primary, #ffd700);font-size:1.35rem;letter-spacing:.3px}
  .pd-x{background:transparent;border:0;color:#cfcfcf;font-size:22px;font-weight:700;cursor:pointer}
  .pd-content{display:grid;grid-template-columns:260px 1fr;gap:18px;padding:20px 22px 8px}
  .pd-media{background:#1f1f1f;border:1px solid rgba(255,255,255,.08);border-radius:12px;aspect-ratio:5/6;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .pd-details h4{margin:.15rem 0 .4rem;font-size:1.25rem}
  .pd-desc{color:#d5d5d5;line-height:1.55;margin:0 0 .6rem}
  .pd-meta{display:flex;flex-wrap:wrap;gap:12px;color:#e8e8e8;margin:.2rem 0 .6rem}
  .pd-pill{display:inline-flex;align-items:center;gap:.5ch;padding:.28rem .65rem;border-radius:999px;font-weight:700;font-size:.82rem;border:1px solid rgba(255,255,255,.09);background:#161616}
  .pd-status{border:none}
  .pd-status.pending{background:rgba(255,193,7,.18);color:var(--warn,#ffc107);}
  .pd-status.active{background:rgba(40,167,69,.18);color:var(--ok,#28a745);}
  .pd-status.cancelled{background:rgba(220,53,69,.18);color:var(--danger,#dc3545);}
  .pd-status.completed{background:rgba(13,110,253,.20);color:#0d6efd;}
  .pd-hr{height:1px;background:linear-gradient(90deg,transparent,rgba(255,215,0,.25),transparent);margin:12px 0}
  .pd-actions{display:flex;flex-wrap:wrap;gap:.7rem;padding:0 22px 18px}
  .pd-btn{border-radius:12px;padding:.6rem 1rem;font-weight:800;letter-spacing:.2px;border:1px solid transparent;cursor:pointer}
  .pd-btn.gold{background:var(--primary, #ffd700);color:#111;border-color:var(--primary, #ffd700)}
  .pd-btn.warn{background:#ffc107;color:#111;border-color:#ffc107}
  .pd-btn.outline{background:transparent;color:var(--primary, #ffd700);border-color:rgba(255,215,0,.7)}
  .pd-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:0 22px 22px}
  .pd-card{background:linear-gradient(180deg,#141414,#101010);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px 14px}
  .pd-card h5{margin:0 0 .4rem;color:var(--primary, #ffd700);font-size:.95rem}
  .pd-kv{display:grid;grid-template-columns:150px 1fr;gap:.4rem .8rem;color:#eaeaea;font-size:.92rem}
  .pd-kv .k{color:#a7a7a7}
  .pd-timeline{display:grid;gap:.6rem}
  .pd-tl{display:grid;grid-template-columns:18px 1fr;gap:.6rem;align-items:start}
  .pd-dot{width:10px;height:10px;border-radius:50%;background:var(--primary, #ffd700);box-shadow:0 0 0 3px rgba(255,215,0,.15)}
  @media(max-width:860px){.pd-content{grid-template-columns:1fr}}

.btn-delete-row{border:1px solid #f5c400;color:#f5c400;background:transparent;
  padding:.35rem .7rem;border-radius:.55rem;font-weight:700;cursor:pointer;
  transition:all .12s ease}
.btn-delete-row:hover{background:#f5c400;color:#111}

</style>

<div id="pdOverlay" class="pd-overlay" hidden>
  <section class="pd-modal" role="dialog" aria-modal="true" aria-labelledby="pdTitle">
    <header>
      <h3 id="pdTitle" data-i18n-key="purchase.detailsTitle">Detalles de la Compra</h3>
      <button class="pd-x" id="pdClose" aria-label="Cerrar">✕</button>
    </header>

    <div class="pd-content">
      <figure class="pd-media" aria-label="Imagen del producto">
        <svg viewBox="0 0 600 720" role="img">
          <defs><linearGradient id="pdg" x1="0" x2="1"><stop offset="0" stop-color="#2a0d2d"/><stop offset="1" stop-color="#6f1d75"/></linearGradient></defs>
          <rect width="600" height="720" fill="url(#pdg)"/>
          <text id="pdMediaText" x="50%" y="52%" text-anchor="middle" fill="#fff" font-size="34" font-weight="800" font-family="Montserrat, sans-serif">Producto</text>
        </svg>
      </figure>

      <div class="pd-details">
        <h4 id="pdName">—</h4>
        <p class="pd-desc" id="pdDesc" data-i18n-key="purchase.sampleDesc">Diseño exclusivo con materiales premium.</p>
        <div class="pd-meta">
          <span class="pd-pill" id="pdPrice">—</span>
          <span class="pd-pill" id="pdDate">—</span>
          <span class="pd-pill" id="pdOrder">—</span>
          <span class="pd-pill pd-status pending" id="pdStatus" data-i18n-key="status.pending">Pendiente</span>
          <span class="pd-pill" data-i18n-key="purchase.usdt">USDT</span>
        </div>
        <div class="pd-hr"></div>
      </div>
    </div>

    <div class="pd-actions">
      <button class="pd-btn gold" id="pdInvoice" data-i18n-key="purchase.downloadInvoice">Descargar factura</button>
      <button class="pd-btn warn" id="pdRegen" data-i18n-key="purchase.regeneratePayment">Generar nuevo link de pago</button>
     
    </div>

    <div class="pd-grid">
      <div class="pd-card">
        <h5 data-i18n-key="purchase.paymentInfo">Información de pago</h5>
        <div class="pd-kv">
          <div class="k" data-i18n-key="purchase.method">Método</div><div data-i18n-key="purchase.methodValue">Cripto · USDT</div>
          <div class="k" data-i18n-key="purchase.currency">Moneda</div><div data-i18n-key="purchase.usdt">USDT</div>
          <div class="k" data-i18n-key="purchase.subtotal">Subtotal</div><div id="pdSubtotal">—</div>
          <div class="k" data-i18n-key="purchase.fees">Comisiones</div><div data-i18n-key="purchase.zeroUsdt">0 USDT</div>
          <div class="k" data-i18n-key="purchase.total">Total</div><div id="pdTotal"><strong>—</strong></div>
        </div>
      </div>
      <div class="pd-card">
        <h5 data-i18n-key="purchase.history">Historial</h5>
        <div class="pd-timeline" id="pdTimeline">
          <div class="pd-tl"><span class="pd-dot"></span><div><div class="t" data-i18n-key="purchase.orderCreated">Pedido creado</div><div class="s">—</div></div></div>
          <div class="pd-tl"><span class="pd-dot"></span><div><div class="t" data-i18n-key="purchase.paymentLinkGenerated">Link de pago generado</div><div class="s">—</div></div></div>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
// == PD translator (no-keys). Uses data-i18n-key and repairs any leaked keys in text ==
(function(){
  window.PD_I18N = window.PD_I18N || {};
  const ensure = (lng, entries) => { PD_I18N[lng] = Object.assign({}, PD_I18N[lng]||{}, entries); };

  ensure('es', {
    'purchase.detailsTitle':'Detalles de la Compra',
    'purchase.sampleDesc':'Diseño exclusivo con materiales premium.',
    'purchase.usdt':'USDT',
    'purchase.downloadInvoice':'Descargar factura',
    'purchase.regeneratePayment':'Generar nuevo link de pago',
    'purchase.contactSupport':'Contactar soporte',
    'purchase.paymentInfo':'Información de pago',
    'purchase.method':'Método',
    'purchase.methodValue':'Cripto · USDT',
    'purchase.currency':'Moneda',
    'purchase.subtotal':'Subtotal',
    'purchase.fees':'Comisiones',
    'purchase.zeroUsdt':'0 USDT',
    'purchase.total':'Total',
    'purchase.history':'Historial',
    'purchase.orderCreated':'Pedido creado',
    'purchase.paymentLinkGenerated':'Link de pago generado',
    'status.pending':'Pendiente',
    'status.active':'Activo',
    'status.cancelled':'Cancelado',
    'status.completed':'Completado'
  });
  ensure('en', {
    'purchase.detailsTitle':'Purchase Details',
    'purchase.sampleDesc':'Exclusive design with premium materials.',
    'purchase.usdt':'USDT',
    'purchase.downloadInvoice':'Download invoice',
    'purchase.regeneratePayment':'Generate new payment link',
    'purchase.contactSupport':'Contact support',
    'purchase.paymentInfo':'Payment information',
    'purchase.method':'Method',
    'purchase.methodValue':'Crypto · USDT',
    'purchase.currency':'Currency',
    'purchase.subtotal':'Subtotal',
    'purchase.fees':'Fees',
    'purchase.zeroUsdt':'0 USDT',
    'purchase.total':'Total',
    'purchase.history':'History',
    'purchase.orderCreated':'Order created',
    'purchase.paymentLinkGenerated':'Payment link generated',
    'status.pending':'Pending',
    'status.active':'Active',
    'status.cancelled':'Cancelled',
    'status.completed':'Completed'
  });
  ensure('pt', {
    'purchase.detailsTitle':'Detalhes da Compra',
    'purchase.sampleDesc':'Design exclusivo com materiais premium.',
    'purchase.usdt':'USDT',
    'purchase.downloadInvoice':'Baixar fatura',
    'purchase.regeneratePayment':'Gerar novo link de pagamento',
    'purchase.contactSupport':'Contactar suporte',
    'purchase.paymentInfo':'Informações de pagamento',
    'purchase.method':'Método',
    'purchase.methodValue':'Cripto · USDT',
    'purchase.currency':'Moeda',
    'purchase.subtotal':'Subtotal',
    'purchase.fees':'Comissões',
    'purchase.zeroUsdt':'0 USDT',
    'purchase.total':'Total',
    'purchase.history':'Histórico',
    'purchase.orderCreated':'Pedido criado',
    'purchase.paymentLinkGenerated':'Link de pagamento gerado',
    'status.pending':'Pendente',
    'status.active':'Ativo',
    'status.cancelled':'Cancelado',
    'status.completed':'Concluído'
  });

  function getLang(){
    try {
      if (window.dI18n && (dI18n.lang || dI18n.current || dI18n.locale)) return (dI18n.lang||dI18n.current||dI18n.locale);
    } catch(_) {}
    return document.documentElement.getAttribute('lang') || localStorage.getItem('lang') || 'es';
  }
  function t(key){
    const L = (getLang()||'es').slice(0,2);
    return (PD_I18N[L] && PD_I18N[L][key]) || null;
  }
  function apply(root){
    const scope = root || document;
    // 1) Apply by data-i18n-key (our safe attribute)
    scope.querySelectorAll('#pdOverlay [data-i18n-key]').forEach(el=>{
      const key = el.getAttribute('data-i18n-key');
      const val = t(key);
      if (val) el.textContent = val;
    });
    // 2) Repair any visible keys (purchase.* / status.*) written by other scripts
    scope.querySelectorAll('#pdOverlay *').forEach(el=>{
      if (!el.childNodes) return;
      el.childNodes.forEach(node=>{
        if (node.nodeType === 3) { // text node
          const s = node.nodeValue.trim();
          if (s && (s.startsWith('purchase.') || s.startsWith('status.'))) {
            const val = t(s);
            if (val) node.nodeValue = node.nodeValue.replace(s, val);
          }
        }
      });
    });
  }
  window.pdI18n = { apply };
  document.addEventListener('DOMContentLoaded', ()=> apply());
})();

// == Modal open/fill/close ==
(function(){
  const OVERLAY = document.getElementById('pdOverlay');
  const CLOSE   = document.getElementById('pdClose');
  const EL = {
    name:   document.getElementById('pdName'),
    desc:   document.getElementById('pdDesc'),
    mediaT: document.getElementById('pdMediaText'),
    price:  document.getElementById('pdPrice'),
    date:   document.getElementById('pdDate'),
    order:  document.getElementById('pdOrder'),
    status: document.getElementById('pdStatus'),
    subtotal: document.getElementById('pdSubtotal'),
    total:    document.getElementById('pdTotal'),
    regen:    document.getElementById('pdRegen'),
  };

  function open(){ OVERLAY.classList.add('show'); OVERLAY.removeAttribute('hidden'); document.body.style.overflow='hidden'; }
  function close(){ OVERLAY.classList.remove('show'); OVERLAY.setAttribute('hidden',''); document.body.style.overflow=''; }

  function readStatusKey(el){
    if(!el) return 'pending';
    const known = ['pending','active','completed','cancelled','inactive','paid','disputed'];
    const k = known.find(k => el.classList.contains(k));
    return (k === 'paid') ? 'completed' : (k || 'pending');
  }

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('button.action-btn[data-action="details"]');
    if(!btn) return;

    const tr = btn.closest('tr');
    const tds = tr ? tr.querySelectorAll('td') : [];
    const product = tds[0]?.innerText?.trim() || 'Producto';
    const date    = tds[1]?.innerText?.trim() || '—';
    let value     = '—';
    if (tds[2]) value = tds[2].innerText.replace('$','').replace('USDT','').trim() || '—';
    const statusEl= tr?.querySelector('.status');
    const statusK = readStatusKey(statusEl);

    EL.name.textContent = product;
    EL.mediaT.textContent = product;
    EL.price.textContent = (value !== '—') ? (value + ' USDT') : '—';
    EL.subtotal.textContent = (value !== '—') ? (value + ' USDT') : '—';
    EL.total.innerHTML = '<strong>' + ((value !== '—') ? (value + ' USDT') : '—') + '</strong>';
    EL.date.textContent = date || '—';
    EL.order.textContent = '#—';
    // Robust: set "Order created" and "Payment link generated" dates from the date chip
    (function(){
      const orderDateText = (EL.date && EL.date.textContent || '').trim();
      // Support either .pd-timeline or #pdTimeline containers
      const sNodes = document.querySelectorAll('#pdOverlay .pd-timeline .s, #pdOverlay #pdTimeline .s');
      if (sNodes[0]) sNodes[0].textContent = orderDateText || '—';                // Order created
      if (sNodes[1]) sNodes[1].textContent = (statusK !== 'pending') ? (orderDateText || '—') : '—'; // Payment link generated
    })();


    EL.status.classList.remove('pending','active','cancelled','completed');
    EL.status.classList.add(statusK);
    EL.status.setAttribute('data-i18n-key','status.'+statusK);

    // Translate/repair
    if (window.pdI18n && typeof pdI18n.apply === 'function') {
      pdI18n.apply(OVERLAY);
      setTimeout(()=>pdI18n.apply(OVERLAY), 0);
    }

    EL.regen.style.display = (statusK === 'pending') ? 'inline-block' : 'none';

    open();
  });

  CLOSE?.addEventListener('click', close);
  OVERLAY?.addEventListener('click', (e)=>{ if(e.target === OVERLAY) close(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });
})();
</script>
<!-- END PD MODAL -->


<script>
(function(){
  function resolveSKUFromModal(){
    try{
      var priceText = (document.getElementById('pdPrice')?.textContent || '').replace(/[^0-9.,]/g,'');
      if (priceText) {
        var norm = priceText.replace(/\./g, '').replace(',', '.');
        var price = parseFloat(norm);
        if (!isNaN(price)) {
          if (Math.abs(price - 13500) < 0.01) return 'GOLD-100G';
          if (Math.abs(price - 6500)  < 0.01) return 'PLAT-100G';
          if (Math.abs(price - 19600) < 0.01) return 'ROLEX-126610L';
          if (Math.abs(price - 35)    < 0.01) return 'NUMINA-BRACELET';
        }
      }
      var name = (document.getElementById('pdName')?.textContent || '').toLowerCase();
      if (/oro|gold/.test(name)) return 'GOLD-100G';
      if (/platino|platinum/.test(name)) return 'PLAT-100G';
      if (/rolex|126610/.test(name)) return 'ROLEX-126610L';
      if (/pulsera|bracelet/.test(name)) return 'NUMINA-BRACELET';
    }catch(e){ console.warn('resolveSKUFromModal error', e); }
    return null;
  }

  function handleRegen(){
    try{
      var sku = resolveSKUFromModal();
      var map = (window.FIXED_PAY_URL || {});
      var url = sku ? map[sku] : null;
      if (url) {
        window.open(url, '_blank', 'noopener'); // abre NOWPayments en una nueva pestaña
      } else {
        alert('No se encontró un link de pago para este producto.');
      }
    }catch(e){
      console.error(e);
      alert('Ocurrió un error al generar el link de pago.');
    }
  }

  function init(){
    var btn = document.getElementById('pdRegen');
    if (btn && !btn.__wired) {
      btn.addEventListener('click', handleRegen);
      btn.__wired = true;
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>



<!-- Moved scripts that were incorrectly placed after </html> -->

<!-- === NUMINA: Regenerar link de pago (NOWPayments) — v3 con fallback de ID === -->
<script>
(function(){
  function getSB(){
    try{ return (typeof getSupabase==='function' && getSupabase()) || window.supabaseClient || window.supabase; }
    catch(_){ return null; }
  }
  async function getAccessToken(){
    try{
      const sb = getSB(); if(!sb || !sb.auth) return null;
      const { data } = await sb.auth.getSession();
      return (data && data.session && data.session.access_token) || null;
    }catch(_){ return null; }
  }
  function parseMoney(txt){
    try{
      if(!txt) return null;
      let s = (txt+'').replace(/[^0-9.,]/g,''); s = s.replace(/[,.](?=\d{3}(?:\D|$))/g,''); s = s.replace(/,/g,'.');
      const n = parseFloat(s); return isFinite(n) ? n : null;
    }catch(_){ return null; }
  }
  function text(el){ return (el && (el.textContent||el.innerText)||'').trim(); }

  function findPurchaseId(fromEl){
    let id = fromEl && fromEl.getAttribute && fromEl.getAttribute('data-purchase-id'); if (id) return id;
    let box = fromEl && fromEl.closest && fromEl.closest('[data-purchase-id]'); if (box) return box.getAttribute('data-purchase-id');
    let any = document.querySelector('#purchase-detail [data-purchase-id], .purchase-detail [data-purchase-id]'); if (any) return any.getAttribute('data-purchase-id');
    let t = text(document.querySelector('#nmOrderId, #nmPurchaseId')); if (t) return t;
    return null;
  }

  async function fallbackGuessPurchaseId(){
    const sb = getSB(); if(!sb) return null;
    let userId = null;
    try{ const { data } = await sb.auth.getUser(); userId = data && data.user && data.user.id; }catch(_){}
    if(!userId) return null;

    const scope = document.querySelector('#purchase-detail, .purchase-detail, .modal, body'); if(!scope) return null;
    const totalEl = scope.querySelector('[data-total], .total, .info-de-pago .total, .payment-info .total, .resumen .total, .summary .total');
    const totalText = text(totalEl) || text(scope.querySelector('.info-de-pago, .payment-info, .summary')) || '';
    const amount = parseMoney(totalText);

    let dateStr = text(scope.querySelector('[data-date], .chip-date, .date, .fecha, .badges .date, .chips .date')) || '';
    if(!/\d{1,2}\s*\/\s*\d{1,2}\s*\/\s*\d{2,4}/.test(dateStr)){
      const match = (scope.textContent||'').match(/(\d{1,2}\/\d{1,2}\/\d{2,4})/);
      if(match) dateStr = match[1];
    }
    let startISO=null, endISO=null;
    if(dateStr){
      const [d,m,y] = dateStr.split('/').map(x=>parseInt(x,10));
      if(d && m && y){
        const dt0 = new Date(Date.UTC(y<100?2000+y:y, (m-1), d, 0,0,0));
        const dt1 = new Date(Date.UTC(y<100?2000+y:y, (m-1), d, 23,59,59));
        startISO = dt0.toISOString(); endISO = dt1.toISOString();
      }
    }

    let q = sb.from('purchases').select('id, value, created_at, status').eq('user_id', userId).order('created_at', { ascending:false }).limit(50);
    if (amount != null) q = q.eq('value', amount);
    if (startISO && endISO) q = q.gte('created_at', startISO).lte('created_at', endISO);
    try{
      const { data, error } = await q; if(error || !data) return null;
      if(data.length === 1) return data[0].id;
      const pend = data.find(r => (r.status||'').toLowerCase().startsWith('pend')); if(pend) return pend.id;
      return data[0] ? data[0].id : null;
    }catch(_){ return null; }
  }

  async function callEdge(fnName, payload, accessToken){
    try{
      let base = (window.__SB_BASE || '').replace(/\/$/, '');
      if (!base) {
        try { const sb = getSB(); base = (sb && sb.storage && sb.storage.url) ? sb.storage.url.split('/storage')[0] : ''; } catch(_){}
      }
      if (!base) throw new Error('No pude obtener la URL base de Supabase.');
      const url = base + '/functions/v1/' + fnName;
      const headers = { 'Content-Type': 'application/json' };
      if (window.__SB_ANON) headers['apikey'] = window.__SB_ANON;
      if (accessToken) headers['Authorization'] = 'Bearer ' + accessToken;
      const res = await fetch(url, { method:'POST', headers, body: JSON.stringify(payload||{}) });
      const text = await res.text(); let json = null; try{ json = text ? JSON.parse(text) : null; }catch(_){}
      return { ok: res.ok, status: res.status, json, text };
    }catch(e){ return { ok:false, status:0, json:null, text: (e && e.message) ? e.message : String(e) }; }
  }

  function looksLikeRegenButton(node){
    if (!node) return false;
    if (node.closest('#nmRegenerate, [data-action="regenerate-payment-link"], .regenerate-link, button[data-regenerate]')) return true;
    const clickEl = node.closest('button, a'); if (!clickEl) return false;
    const label = (clickEl.textContent || clickEl.innerText || '').trim().toLowerCase().replace(/\s+/g,' ');
    return label.includes('generar nuevo link de pago') || label.includes('generar nuevo enlace de pago') || label.includes('regenerar link');
  }

  document.addEventListener('click', async (ev) => {
    if (!looksLikeRegenButton(ev.target)) return;
    ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation();
    const btn = ev.target.closest('button, a') || ev.target;

    let purchaseId = findPurchaseId(btn);
    if (!purchaseId) purchaseId = await fallbackGuessPurchaseId();
    if (!purchaseId) { alert('No pude determinar el ID de la compra.'); return; }

    const original = btn.textContent || 'Generando...';
    btn.disabled = true; btn.textContent = 'Generando...';
    try{
      const token = await getAccessToken();
      const { ok, json, text } = await callEdge('create-invoice', { purchase_id: purchaseId }, token);
      if (!ok) throw new Error(text || (json && JSON.stringify(json)));
      const url = (json && (json.payment_url || json.invoice_url)) || (json && json.data && (json.data.payment_url || json.data.invoice_url)) || null;
      if (!url) throw new Error('La función respondió sin URL de pago.');
      window.open(url, '_blank');
    }catch(e){ alert('No se pudo iniciar el cobro: ' + (e && e.message ? e.message : e)); }
    finally{ btn.disabled = false; btn.textContent = original; }
  }, true);
})();
</script>

<style>
/* === Support Claim Modal (sc-*) === */
.sc-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;z-index:2000;}
.sc-overlay.show{display:block;}
.sc-modal{position:relative;width:min(1100px,92vw);margin:6vh auto;background:#161616;color:#fff;
  border:1px solid rgba(255,215,0,.25); border-radius:18px; box-shadow:0 18px 60px rgba(0,0,0,.5);}
.sc-close{position:absolute;right:16px;top:16px;width:40px;height:40px;border-radius:999px;border:1px solid #333;
  background:transparent;color:#cfcfcf;font-size:20px;cursor:pointer}
.sc-modal h3{font-size:28px; font-weight:900; color:var(--primary,#ffd700); margin:24px 24px 10px}
.sc-body{padding:0 24px 24px}
.sc-grid{display:grid;grid-template-columns: 1fr 1fr; gap:20px; margin-top:8px}
@media(max-width:900px){.sc-grid{grid-template-columns:1fr}}
.sc-card{background:linear-gradient(180deg,#141414,#101010); border:1px solid rgba(255,255,255,.08);
  border-radius:16px; padding:22px}
.sc-card h5{font-size:20px; margin:0 0 12px 0}
.sc-kv{display:grid;grid-template-columns:120px 1fr;gap:10px 16px; font-size:16px}
.sc-kv .k{color:#9ea3aa}
.sc-badge{display:inline-block;padding:6px 12px;border-radius:999px;font-weight:800;font-size:14px}
.sc-badge.pending{background:rgba(255,193,7,.16);color:#ffc107;border:1px solid rgba(255,193,7,.35)}
.sc-badge.paid{background:rgba(60,179,113,.18);color:#5ad69a;border:1px solid rgba(60,179,113,.35)}
.sc-label{color:#a9a9a9;font-size:14px;margin:6px 0 4px}
.sc-input, .sc-textarea{width:100%;background:#0f0f0f;border:1px solid #2a2a2a;border-radius:12px;
  color:#fff;padding:12px 14px;outline:none}
.sc-textarea{min-height:140px;resize:vertical}
.sc-actions{display:flex;gap:12px; align-items:center; padding:0 24px 24px}
.sc-btn{border-radius:12px;padding:12px 18px;font-weight:900;cursor:pointer;border:1px solid transparent}
.sc-btn-gold{background:var(--primary,#ffd700); color:#111}
.sc-btn-ghost{background:transparent; color:#ffd700; border-color:rgba(255,215,0,.45)}
.sc-err{color:#f87171; font-size:13px; margin-top:6px; display:none}

.btn-delete-row{border:1px solid #f5c400;color:#f5c400;background:transparent;
  padding:.35rem .7rem;border-radius:.55rem;font-weight:700;cursor:pointer;
  transition:all .12s ease}
.btn-delete-row:hover{background:#f5c400;color:#111}

</style>

<!-- === SUPPORT CLAIM MODAL === -->
<div id="scOverlay" class="sc-overlay" aria-hidden="true">
  <div class="sc-modal" role="dialog" aria-modal="true" aria-labelledby="scTitle" tabindex="-1">
    <button class="sc-close" id="scClose" aria-label="Cerrar">×</button>
    <h3 id="scTitle">Contacto de soporte</h3>
    <div class="sc-body">
      <div class="sc-grid">
        <!-- Columna izquierda: detalle -->
        <div class="sc-card">
          <h5>Detalle de la compra</h5>
          <div class="sc-kv">
            <div class="k">Producto</div> <div id="scProduct">—</div>
            <div class="k">Fecha</div>    <div id="scDate">—</div>
            <div class="k">Monto</div>    <div id="scAmount">—</div>
            <div class="k">Estado</div>   <div><span id="scStatusBadge" class="sc-badge pending">Pendiente</div>
          </div>
        </div>

        <!-- Columna derecha: formulario -->
        <div class="sc-card">
          <h5>Contacto con soporte</h5>
          <label class="sc-label" for="scReason">Motivo</label>
          <select id="scReason" class="sc-input">
            <option value="payment_pending">Realicé el pago y no cambió el estado</option>
            <option value="no_delivery">Nunca recibí mi producto</option>
            <option value="wrong_item">El producto recibido no corresponde</option>
            <option value="otros">Otros</option>
          </select>
          <label class="sc-label" for="scMessage">Descripción</label>
          <textarea id="scMessage" class="sc-textarea" placeholder="Contanos qué pasó…"></textarea>
          <div id="scError" class="sc-err">Escribí una breve descripción (mínimo 10 caracteres).</div>
        </div>
      </div>
    </div>
    <div class="sc-actions">
      <button id="scSubmit" class="sc-btn sc-btn-gold">Enviar</button>
      <button id="scCancel" class="sc-btn sc-btn-ghost">Cancelar</button>
    </div>
  </div>
</div>

<script>
// === Support Claim Modal wiring ===
(function(){
  const SUPPORT_EMAIL = "numina5555@gmail.com"; // ej: 'soporte@tu-dominio.com'
  function $(id){ return document.getElementById(id); }
  function textOf(el){ return (el?.textContent || '').trim(); }

  function openModal(){ const ov = $('scOverlay'); if(!ov) return; ov.classList.add('show'); ov.removeAttribute('aria-hidden'); $('scMessage').focus(); }
  function closeModal(){ const ov = $('scOverlay'); if(!ov) return; ov.classList.remove('show'); ov.setAttribute('aria-hidden','true'); }

  function fillFromRow(tr){
    const tds = tr.querySelectorAll('td');
    const product = (tds[0]?.innerText || '—').trim();
    const date    = (tds[1]?.innerText || '—').trim();
    const amount  = (tds[2]?.innerText || '—').trim();
    const statusT = (tds[3]?.innerText || 'Pendiente').trim();
    $('scProduct').textContent = product;
    $('scDate').textContent = date;
    $('scAmount').textContent = /USDT|USD|\$/.test(amount) ? amount : (amount + ' USDT');
    const badge = $('scStatusBadge');
    const isPending = /pendiente|pending/i.test(statusT);
    badge.textContent = isPending ? 'Pendiente' : (/pagad|paid|complet/i.test(statusT) ? 'Pagado' : statusT);
    badge.className = 'sc-badge ' + (isPending ? 'pending' : 'paid');
  }

  // Delegación: detecta botón "Reclamo" en la tabla
  document.addEventListener('click', function(e){
    const btn = e.target.closest('button.action-btn');
    if (!btn) return;
    const label = textOf(btn).toLowerCase();
    if (!/reclamo/.test(label) && btn.dataset.action !== 'claim') return;
    e.preventDefault();
    const tr = btn.closest('tr');
    if (!tr) return;
    fillFromRow(tr);
    openModal();
  });

  // Cerrar modal
  $('scClose')?.addEventListener('click', closeModal);
  $('scCancel')?.addEventListener('click', function(e){ e.preventDefault(); closeModal(); });
  $('scOverlay')?.addEventListener('click', function(e){ if(e.target === this) closeModal(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

  // Enviar: validación + mailto
  
$('scSubmit')?.addEventListener('click', async function(){
  const btn = this;
  const reasonKey = $('scReason')?.value || 'otros';
  const reasonMap = {
    payment_pending: 'Realicé el pago y no cambió el estado',
    no_delivery: 'Nunca recibí mi producto',
    wrong_item: 'El producto recibido no corresponde',
    otros: 'Otros',
  };
  const reason = reasonMap[reasonKey] || 'Otros';
  const msg = ($('scMessage')?.value || '').trim();
  if (msg.length < 10){ $('scError').style.display = 'block'; return; }
  $('scError').style.display = 'none';

  // Datos mostrados en el modal
  const product = textOf($('scProduct'));
  const date    = textOf($('scDate'));
  const amount  = textOf($('scAmount'));
  const status  = textOf($('scStatusBadge'));

  // Si existe un #pdOrder en tu Detalle, lo usamos como ID
  const orderRaw = (document.getElementById('pdOrder')?.textContent || '').trim();
  const orderId  = orderRaw.replace(/^#/, '') || '';

  const subject = `Reclamo - ${product} (${reason})`;
  const bodyTxt =
`Motivo: ${reason}
${orderId ? `Pedido: #${orderId}\n` : ''}Producto: ${product}
Fecha: ${date}
Monto: ${amount}
Estado: ${status}

Descripción:
${msg}`;

  // Enviar a Supabase y notificar por Edge Function
  try {
    btn.disabled = true;
    const originalLabel = btn.textContent;
    btn.textContent = 'Enviando…';

    const supabase = getSupabase();
    const { data: { user }, error: authErr } = await supabase.auth.getUser();
    if (authErr || !user) throw new Error('No autenticado.');

    // Parsear monto a número (opcional)
    const amountNum = (amount || '')
      .replace(/[^0-9,\.\-]/g,'')
      .replace(/\.(?=\d{3}(\D|$))/g,'') // quita separadores de miles con punto
      .replace(',', '.'); // usa coma como decimal si aplica

    const claimRow = {
      user_id: user.id,
      user_email: user.email || null,
      product_name: product || null,
      product_date: date || null,
      amount_text: amount || null,
      amount_value: isNaN(parseFloat(amountNum)) ? null : parseFloat(amountNum),
      status_text: status || null,
      reason_key: reasonKey,
      reason_label: reason,
      message: msg,
      order_id: orderId || null
    };

    const { data: inserted, error: insErr } = await supabase
      .from('claims')
      .insert(claimRow)
      .select()
      .maybeSingle();

    if (insErr) throw insErr;

    // Invocar Edge Function (usa auth del usuario automáticamente)
    const { data: fnData, error: fnErr } = await supabase.functions.invoke('send-claim-email', {
      body: {
        to: SUPPORT_EMAIL,
        subject,
        text: bodyTxt,
        claim_id: inserted?.id || null,
        user_email: user.email || null,
        claim: claimRow
      }
    });
    if (fnErr) console.warn('send-claim-email error:', fnErr);

    alert('Tu reclamo fue enviado. Te contactaremos por email.');
    closeModal();
  } catch (err) {
    console.error(err);
    const el = $('scError');
    if (el) { el.textContent = 'No pudimos enviar tu reclamo. Intentalo nuevamente.'; el.style.display = 'block'; }
  } finally {
    btn.disabled = false;
    btn.textContent = 'Enviar';
  }
});

})();
</script>

<script>
(function(){
  function hideAllSections(){
    var list = document.querySelectorAll('.section-content');
    for (var i=0;i<list.length;i++){ list[i].style.display = 'none'; }
  }
  function showReferidos(){
    hideAllSections();
    var dash = document.getElementById('main-dashboard');
    if (dash) dash.style.display = 'none';
    var sec = document.getElementById('section-referidos');
    if (sec) sec.style.display = 'block';
  }
  function renderReferidos(rows){
    var total = rows.length;
    var confirmed = 0;
    for (var i=0;i<rows.length;i++){
      if (rows[i].confirmed || rows[i].confirmado) confirmed++;
    }
    var tickets = Math.floor(confirmed / 3);
    var progress = confirmed % 3;
    var pctGeneral = total ? (confirmed/total)*100 : 0;
    var pctProg = (progress/3)*100;

    var setText = function(id, val){ var el=document.getElementById(id); if(el) el.textContent = val; };
    setText('refs-count', confirmed + '/' + total);
    setText('refs-tickets', tickets);
    setText('refs-progress-count', progress + '/3');
// ► Asegura que los tickets por referidos existan en tickets_ledger
try{
  const sb = getSupabase();
  sb.auth.getUser().then(({ data: { user } }) => {
    if (!user) return;
    sb.rpc('award_referral_tickets_me')
  .then(({ data, error }) => {
    if (error) { console.error('RPC error:', error); return; }
    console.log('RPC delta otorgado:', data); // 0 si no había nada, >0 si insertó
    try { if (typeof cargarSorteos === 'function') cargarSorteos(); } catch(_){}
  })
  .catch(e => console.warn('award_referral_tickets_me rpc', e));

  });
}catch(_){}

    var bg=document.getElementById('refs-bar-general'); if(bg) bg.style.width = pctGeneral + '%';
    var bp=document.getElementById('refs-bar-progress'); if(bp) bp.style.width = pctProg + '%';

    var tbody = document.getElementById('refs-tbody');
    if (tbody){
      tbody.innerHTML = '';
      for (var j=0;j<rows.length;j++){
        var r = rows[j];
        var tr = document.createElement('tr'); tr.style.borderTop = '1px solid #1f1f1f';
        var td1 = document.createElement('td'); td1.style.padding = '12px 16px';
        td1.textContent = r.name || r.nombre || '—';
        var tdDate = document.createElement('td'); tdDate.style.padding = '12px 16px';
        var rawDate = r.date || r.fecha || r.created_at || r.createdAt || r.confirmed_at || r.purchase_date;
        var dTxt = '—';
        try { if (rawDate){ var d = new Date(rawDate); if(!isNaN(d.getTime())){ dTxt = ('0'+d.getDate()).slice(-2)+'/'+('0'+(d.getMonth()+1)).slice(-2)+'/'+d.getFullYear(); } } } catch(e) {}
        tdDate.textContent = dTxt;

        var td2 = document.createElement('td'); td2.style.padding = '12px 16px';
        var ok = !!(r.confirmed || r.confirmado);
        var span = document.createElement('span');
        span.textContent = ok ? 'Confirmado' : 'Pendiente';
        span.style.cssText = ok
          ? 'padding:6px 12px;border-radius:9999px;font-weight:800;font-size:12px;background:rgba(16,185,129,.15);color:#34d399;border:1px solid rgba(16,185,129,.35);display:inline-block'
          : 'padding:6px 12px;border-radius:9999px;font-weight:800;font-size:12px;background:rgba(250,204,21,.15);color:#facc15;border:1px solid rgba(250,204,21,.35);display:inline-block';
        td2.appendChild(span);
        tr.appendChild(td1); tr.appendChild(tdDate); tr.appendChild(td2); tbody.appendChild(tr);
      }
      if (total === 0){
        var tr = document.createElement('tr'); tr.style.borderTop = '1px solid #1f1f1f';
        var td = document.createElement('td'); td.colSpan = 3; td.style.padding='16px'; td.style.textAlign='center';
        td.textContent = (window.dI18n && dI18n.t) ? dI18n.t('referrals.none') : 'Sin referidos';
        tr.appendChild(td); tbody.appendChild(tr);
      }
    }
  }
  
function loadReferidos(){
  // Lee desde 'referrals' y deriva nombre, confirmado y fecha.
  if (typeof getSupabase === 'function'){
    try{
      var supabase = getSupabase();
      supabase.auth.getUser().then(function(who){
        var uid = who && who.data && who.data.user && who.data.user.id;
        if (!uid) throw new Error('no-user');
        // Intento 1: join a users por referred_id para traer full_name
        return supabase
          .from('referrals')
          .select('referred_email,purchases_count,created_at,is_active,users:referred_id(full_name)')
          .eq('referrer_id', uid)
          .order('created_at', { ascending: false })
          .limit(500);
      }).then(function(res){
        if (res && !res.error && Array.isArray(res.data)){
          var mapped = res.data.map(function(row){
            var name = (row.users && row.users.full_name) || row.full_name || (row.referred_email ? String(row.referred_email).split('@')[0] : '—');
            var confirmed = !!(row.purchases_count && Number(row.purchases_count) > 0);
            return { nombre:name, name:name, confirmed:confirmed, confirmado:confirmed, date:row.created_at };
          });
          renderReferidos(mapped);
          return;
        }
        // Intento 2: sin join (por si el FK no permite embed)
        return getSupabase().from('referrals').select('referred_email,purchases_count,created_at').limit(500);
      }).then(function(res2){
        if (res2 && !res2.error && Array.isArray(res2.data)){
          var mapped2 = res2.data.map(function(row){
            var name = row.referred_email ? String(row.referred_email).split('@')[0] : '—';
            var confirmed = !!(row.purchases_count && Number(row.purchases_count) > 0);
            return { nombre:name, name:name, confirmed:confirmed, confirmado:confirmed, date:row.created_at };
          });
          if (mapped2) renderReferidos(mapped2);
          else renderReferidos([]);
        } else if (!res2){ /* no-op */ }
      }).catch(function(){
        renderReferidos([
          { name:'Juan Pérez', confirmed:true, date:'2025-08-12' },
          { name:'María Gómez', confirmed:false, date:'2025-08-10' },
          { name:'Carlos López', confirmed:true, date:'2025-08-08' },
          { name:'Ana Torres', confirmed:true, date:'2025-08-07' },
          { name:'Luis Martínez', confirmed:false, date:'2025-08-06' }
        ]);
      });
    }catch(e){
      renderReferidos([
        { name:'Juan Pérez', confirmed:true, date:'2025-08-12' },
        { name:'María Gómez', confirmed:false, date:'2025-08-10' },
        { name:'Carlos López', confirmed:true, date:'2025-08-08' },
        { name:'Ana Torres', confirmed:true, date:'2025-08-07' },
        { name:'Luis Martínez', confirmed:false, date:'2025-08-06' }
      ]);
    }
  } else {
    renderReferidos([
      { name:'Juan Pérez', confirmed:true, date:'2025-08-12' },
      { name:'María Gómez', confirmed:false, date:'2025-08-10' },
      { name:'Carlos López', confirmed:true, date:'2025-08-08' },
      { name:'Ana Torres', confirmed:true, date:'2025-08-07' },
      { name:'Luis Martínez', confirmed:false, date:'2025-08-06' }
    ]);
  }
}

  
  function filterReferrals(term){
    term = (term||'').toLowerCase().trim();
    var tbody = document.getElementById('refs-tbody');
    if (!tbody) return;
    var rows = tbody.querySelectorAll('tr');
    var anyVisible = false;
    for (var i=0;i<rows.length;i++){
      var row = rows[i];
      // row text content
      var txt = row.textContent.toLowerCase();
      var match = term === '' || txt.indexOf(term) !== -1;
      row.style.display = match ? '' : 'none';
      if (match) anyVisible = true;
    }
    // empty-state row when no matches
    if (!anyVisible){
      var tr = document.createElement('tr'); tr.setAttribute('data-empty','1'); tr.style.borderTop='1px solid #1f1f1f';
      var td = document.createElement('td'); td.colSpan = 3; td.style.padding='16px'; td.style.textAlign='center';
      td.textContent = (window.dI18n && dI18n.t) ? dI18n.t('referrals.none') : 'Sin referidos';
      tr.appendChild(td); tbody.appendChild(tr);
    } else {
      var empties = tbody.querySelectorAll('tr[data-empty="1"]');
      for (var j=0;j<empties.length;j++){ empties[j].remove(); }
    }
  }
  function bindFilter(){
    var input = document.getElementById('refs-search');
    var clearBtn = document.getElementById('refs-clear');
    if (input){
      input.addEventListener('input', function(){ filterReferrals(input.value); });
    }
    if (clearBtn){
      clearBtn.addEventListener('click', function(){
        if (input){ input.value=''; }
        filterReferrals('');
        input && input.focus();
      });
    }
  }
function bindShare(){
    var btn = document.getElementById('refs-share');
    if (!btn) return;
    btn.addEventListener('click', function(){
      var enlace = (window.REF_LINK && typeof window.REF_LINK === 'string')
        ? window.REF_LINK
        : (window.location.origin + '/register?ref=MI_CODIGO');
      if (navigator.clipboard && window.isSecureContext){
        navigator.clipboard.writeText(enlace).then(function(){ alert('Enlace copiado al portapapeles'); })
          .catch(function(err){ alert('No se pudo copiar el enlace: ' + String(err)); });
      } else {
        var ta = document.createElement('textarea');
        ta.value = enlace; ta.style.position='fixed'; ta.style.left='-9999px';
        document.body.appendChild(ta); ta.focus(); ta.select();
        try{ document.execCommand('copy'); alert('Enlace copiado al portapapeles'); }
        catch(err){ alert('No se pudo copiar el enlace: ' + String(err)); }
        document.body.removeChild(ta);
      }
    });
  }
  
  function applyI18n(container){
    try{
      if (window.dI18n && typeof dI18n.translateNode === 'function'){ dI18n.translateNode(container||document.body); }
      else if (window.applyTranslations){ window.applyTranslations(container||document); }
      else if (window.dI18n && typeof dI18n.refresh === 'function'){ dI18n.refresh(); }
    }catch(e){}
  }

  document.addEventListener('DOMContentLoaded', function(){
    var item = document.querySelector('.menu-item[data-target="referidos"]');
    if (item){
      item.addEventListener('click', function(ev){
        ev.preventDefault();
        showReferidos();
        applyI18n(document.getElementById('section-referidos'));
        (function(){
          function fix(id, es, pt, en){
            var el = document.getElementById(id); if(!el) return;
            var txt = (el.textContent||'').trim();
            if (!txt || txt.indexOf('.') !== -1 || /^referrals\./i.test(txt)){
              var lang = (document.documentElement.getAttribute('lang') || (window.APP_LANG||'es')).toLowerCase().slice(0,2);
              var map = { es:es, pt:pt, en:en };
              el.textContent = map[lang] || es;
            }
          }
          fix('refs-label-confirmed','Referidos confirmados','Indicações confirmadas','Confirmed referrals');
          fix('refs-label-progress','Progreso hacia próximo ticket','Progresso para o próximo ticket','Progress to next ticket');
        })();
        // ensureLabelFallbacks removed (inlined fallback below)
        loadReferidos();
        bindShare();
        bindFilter();
      });
    }
  });
})();
</script>
    

<!-- BEGIN: NOWPayments email param injector -->
<script>
(function(){
  // Runs after DOM is ready
  const onReady = (fn) => {
    if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", fn, { once: true });
    else fn();
  };

  onReady(function(){
    // Helper: try to get user email from Supabase auth OR from dashboard UI fallback
    async function getUserEmail() {
      try {
        if (window.supabase && window.supabase.auth && typeof window.supabase.auth.getUser === "function") {
          const { data } = await window.supabase.auth.getUser();
          if (data && data.user && data.user.email) return data.user.email;
        }
      } catch (e) { console.warn("supabase.auth.getUser() falló:", e); }

      try {
        // Fallback: read from UI element if present
        const el = document.querySelector("#user-email");
        if (el) {
          const txt = (el.textContent || el.innerText || "").trim();
          if (txt.includes("@")) return txt;
        }
      } catch(e){ console.warn("fallback de #user-email falló:", e); }

      return null;
    }

    function appendEmailParam(url, email){
      try {
        const hasQuery = url.includes("?");
        const sep = hasQuery ? "&" : "?";
        // If URL already contains an 'email' param, replace it
        const u = new URL(url, window.location.origin);
        if (u.searchParams.has("email")) {
          u.searchParams.set("email", email);
          return u.toString();
        }
        return url + sep + "email=" + encodeURIComponent(email);
      } catch(_){
        // If URL() constructor fails (cross-origin relative edge cases), do a best-effort append
        return url + (url.includes("?") ? "&" : "?") + "email=" + encodeURIComponent(email);
      }
    }

    // Public helper in case your markup calls abrirPago('#')
    window.abrirPago = async function(baseUrl){
      const email = await getUserEmail();
      if (!email) {
        alert("Necesitas iniciar sesión para comprar (no pude obtener tu email).");
        return;
      }
      const finalUrl = appendEmailParam(baseUrl, email);
      window.open(finalUrl, "_blank", "noopener");
    };

    // Global click interceptor for any <a> that points to NOWPayments
    document.addEventListener("click", async function(ev){
      const a = ev.target.closest && ev.target.closest('a[href*="nowpayments.io"]');
      if (!a) return;

      // Ignore if developer opted-out explicitly
      if (a.dataset.nowpNoHijack === "true") return;

      ev.preventDefault();
      const email = await getUserEmail();
      if (!email) {
        alert("Necesitas iniciar sesión para comprar (no pude obtener tu email).");
        return;
      }
      const finalUrl = appendEmailParam(a.href, email);
      window.open(finalUrl, a.target || "_blank", "noopener");
    }, true);
  });
})();
</script>
<!-- END: NOWPayments email param injector -->

<script>
/* === NOWPayments dynamic USDT checkout override (capture-phase) ===
   This block intercepts clicks on the modal "Comprar" button (#nmBuy) and the
   "Generar nuevo link de pago" (#pdRegen), creates a purchase in Supabase with currency USDT,
   then calls an Edge Function 'create-invoice' to create a NOWPayments invoice
   for the exact amount shown in the modal. Finally it redirects to NOWPayments.
   It uses capture:true + stopImmediatePropagation() to prevent older fixed-link handlers.
*/
(function(){
  function ready(fn){ if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded', fn);} else { fn(); } }
  function parseAmountFromText(txt){
    try{
      if(!txt) return null;
      // keep digits, comma, dot
      var clean = (txt+'').replace(/[^0-9,\.]/g,'');
      // normalize: if it has both comma and dot, assume comma thousands -> remove commas
      if (clean.indexOf(',')>-1 && clean.indexOf('.')>-1){
        clean = clean.replace(/,/g,'');
      } else if (clean.indexOf(',')>-1 && clean.indexOf('.')===-1){
        // comma as decimal
        clean = clean.replace(',', '.');
      }
      var n = parseFloat(clean);
      return isFinite(n) ? n : null;
    }catch(_){ return null; }
  }
  function getSku(){ var el=document.getElementById('nmSku'); return (el && el.textContent || '').trim(); }
  function getName(){ var el=document.getElementById('nmName'); return (el && el.textContent || '').trim(); }
  function getPrice(){
  try{
    var buy = document.getElementById('nmBuy');
    if (buy && buy.dataset && buy.dataset.price){
      var v = parseFloat(buy.dataset.price);
      if (isFinite(v) && v>0) return v;
    }
  }catch(_){ }
  try{
    if (window.CATALOG && window.CATALOG[currentSku] && typeof window.CATALOG[currentSku].price === 'number'){
      return window.CATALOG[currentSku].price;
    }
  }catch(_){ }
  try{
    var el = document.getElementById('nmPrice');
    var txt = el ? el.textContent : '';
    if (txt){
      var clean = (txt+'').replace(/[^0-9,\.]/g,'');
      if (clean.indexOf(',')>-1 && clean.indexOf('.')>-1) clean = clean.replace(/,/g,'');
      else if (clean.indexOf(',')>-1) clean = clean.replace(',', '.');
      var f = parseFloat(clean);
      if (isFinite(f) && f>0) return f;
    }
  }catch(_){ }
  try{
    var opener = (typeof lastTrigger!=='undefined' && lastTrigger) ? lastTrigger.closest('.product-card') : null;
    var priceEl = opener ? opener.querySelector('.price, [data-price]') : null;
    var raw = priceEl ? (priceEl.getAttribute('data-price') || priceEl.textContent) : '';
    if (raw){
      var c = (raw+'').replace(/[^0-9,\.]/g,'');
      if (c.indexOf(',')>-1 && c.indexOf('.')>-1) c = c.replace(/,/g,'');
      else if (c.indexOf(',')>-1) c = c.replace(',', '.');
      var v2 = parseFloat(c);
      if (isFinite(v2) && v2>0) return v2;
    }
  }catch(_){ }
  return null;
}

  async function ensureUser(){
    try{
      var supabase = (typeof getSupabase==='function') ? getSupabase() : (window.supabaseClient||null);
      if (!supabase || !supabase.auth || !supabase.auth.getUser) throw new Error('Supabase no inicializado');
      var out = await supabase.auth.getUser();
      var user = out && out.data && out.data.user || null;
      return { supabase, user };
    }catch(e){
      console.error('auth error', e);
      return { supabase:null, user:null };
    }
  }

  async function createInvoiceFlow(ev){
    try{
      ev.preventDefault(); ev.stopPropagation(); ev.stopImmediatePropagation();
      var ctx = await ensureUser();
      if (!ctx.user){ alert('Inicia sesión para continuar con la compra.'); window.location.href='/login.html'; return; }
      var sku = getSku();
      var name = getName();
      var amount = getPrice();
      if (!amount || amount<=0){ alert('No pude detectar el monto del producto.'); return; }

      // Insert purchase (status pending) using USDT
      var ins = await ctx.supabase
        .from('purchases')
        .insert({ user_id: ctx.user.id, product_name: name || sku || 'Producto', sku: sku || null, value: amount, currency: 'USDT', status: 'pending' })
        .select('id')
        .single();
      if (ins.error || !ins.data){ console.error('insert error', ins.error); alert('No se pudo crear la compra.'); return; }
      var orderId = ins.data.id;

      // Call Edge Function to create the NOWPayments invoice in USDT
      var payload = { purchase_id: orderId };
      var fn = await ctx.supabase.functions.invoke('create-invoice', { body: payload });
      var data = fn && fn.data;
      var paymentUrl = (data && (data.payment_url || data.invoice_url || (data.raw && (data.raw.payment_url || data.raw.invoice_url)))) || null;
if (fn.error || !paymentUrl){
        console.error('edge function error', fn.error || data);
        alert('No se pudo iniciar el cobro en NOWPayments. ' + JSON.stringify(fn.error || data || {}, null, 2));
        return;
      }
      window.location.href = paymentUrl;
    }catch(e){
      console.error('checkout error', e);
      alert('Error inesperado: ' + (e && e.message ? e.message : e));
    }
  }

  function wireOverrides(){
    var buy = document.getElementById('nmBuy');
    if (buy && !buy.__npCapture){
      buy.addEventListener('click', createInvoiceFlow, true); // capture-phase override
      buy.__npCapture = true;
    }
    var regen = document.getElementById('pdRegen');
    if (regen && !regen.__npCapture){
      regen.addEventListener('click', createInvoiceFlow, true); // reuse same flow
      regen.__npCapture = true;
    }
  }

  ready(wireOverrides);
})();
</script>

<script>
(function(){
  window.__callEdge = async function(fnName, body, accessToken){
    try{
      var base = (window.__SB_BASE || '').replace(/\/$/, '');
      if (!base) {
        try {
          var sb = (typeof getSupabase==='function' && getSupabase()) || (window.supabase && window.supabase);
          base = sb && sb.storage && sb.storage.url ? sb.storage.url.split('/storage')[0] : '';
        } catch(_) { base=''; }
      }
      if (!base) throw new Error('Supabase base URL not found');
      var url = base + '/functions/v1/' + fnName;
      var headers = { 'Content-Type': 'application/json' };
      if (window.__SB_ANON) headers['apikey'] = window.__SB_ANON;
      if (accessToken) headers['Authorization'] = 'Bearer ' + accessToken;
      var res = await fetch(url, { method:'POST', headers, body: JSON.stringify(body||{}) });
      var text = await res.text();
      var json = null; try{ json = text ? JSON.parse(text) : null; }catch(_){}
      return { ok: res.ok, status: res.status, json, text };
    }catch(e){
      return { ok:false, status:0, json:null, text: (e && e.message) ? e.message : String(e) };
    }
  };
})();
</script>


<style>
.btn-delete-row{
  border:1px solid #f5c400; color:#f5c400; background:transparent;
  padding:.35rem .7rem; border-radius:.55rem; font-weight:700; cursor:pointer;
  transition:all .12s ease
}
.btn-delete-row:hover{ background:#f5c400; color:#111 }
</style>

<script>
(function () {
  function getSB() {
    try { return (typeof getSupabase === 'function') ? getSupabase() : (window.supabaseClient || window.supabase); }
    catch (_) { return null; }
  }

  // Crea botón "Eliminar" al lado de "Detalles" (por texto o data-action)
  function injectRowButtons(){
    var nodes = Array.from(document.querySelectorAll('button, a'));
    nodes.forEach(function(btn){
      var label = (btn.textContent||btn.innerText||'').trim().toLowerCase();
      var looksDetails = (btn.dataset && (btn.dataset.action==='details' || btn.dataset.action==='reclamo')) || /^detall/.test(label) || /^reclamo/.test(label);
      if(!looksDetails) return;
      if(btn.nextElementSibling && btn.nextElementSibling.dataset && btn.nextElementSibling.dataset.action==='delete-purchase') return;

      var del = document.createElement('button');
      del.className = 'btn-delete-row';
      del.setAttribute('data-i18n','actions.delete'); del.textContent = (window.dI18n? dI18n.t('actions.delete') : 'Eliminar'); try{ if(window.dI18n&&dI18n.apply) dI18n.apply(); }catch(_){}
      del.setAttribute('data-action','delete-purchase');

      // Obtener ID desde botón/fila/descendientes
      var tr = btn.closest('tr');
      var id = btn.getAttribute('data-purchase-id') || (tr && tr.getAttribute('data-purchase-id')) || '';
      if(!id){ var any = tr ? tr.querySelector('[data-purchase-id]') : null; if(any) id = any.getAttribute('data-purchase-id'); }
      if(id) del.setAttribute('data-purchase-id', id);

      btn.after(del);
    });
  }

  async function deletePurchaseById(id, row){
    const sb = getSB();
    if(!sb) return alert('No se pudo inicializar Supabase.');
    try{
      const { error } = await sb.from('purchases').delete().eq('id', id);
      if(error) throw error;
      if(row) row.remove();
    }catch(err){
      alert('No se pudo eliminar: ' + (err && err.message ? err.message : err));
    }
  }

  document.addEventListener('click', function(e){
    const delBtn = e.target.closest('[data-action="delete-purchase"]');
    if(!delBtn) return;
    const row = delBtn.closest('tr');
    const id = delBtn.getAttribute('data-purchase-id') || (row && row.getAttribute('data-purchase-id'));
    if(!id){
      if(!confirm(window.dI18n? dI18n.t('confirm.noRowId') : 'No encuentro el ID en la fila. ¿Eliminar solo visualmente?')) return;
      if(row) row.remove();
      return;
    }
    if(!confirm(window.dI18n? dI18n.t('confirm.deletePurchase') : '¿Eliminar esta compra? Esta acción es permanente.')) return;
    deletePurchaseById(id, row);
  });

  function setup(){
    injectRowButtons();
    const obs = new MutationObserver(function(){ injectRowButtons(); });
    obs.observe(document.body, { childList:true, subtree:true });
  }
  if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', setup);
  else setup();
})();
</script>

<!-- === NUMINA: Regenerar link de pago (NOWPayments) sin leer monto del DOM === -->
<script>
(function(){
  async function getAccessToken(){
    try{
      const sb = (typeof getSupabase==='function' && getSupabase()) || window.supabaseClient || window.supabase;
      if (!sb || !sb.auth) return null;
      const { data } = await sb.auth.getSession();
      return (data && data.session && data.session.access_token) || null;
    }catch(_){ return null; }
  }
  function findPurchaseId(fromEl){
    let id = fromEl.getAttribute('data-purchase-id');
    if (id) return id;
    let box = fromEl.closest('[data-purchase-id]');
    if (box) return box.getAttribute('data-purchase-id');
    let any = document.querySelector('#purchase-detail [data-purchase-id], .purchase-detail [data-purchase-id]');
    if (any) return any.getAttribute('data-purchase-id');
    let t = (document.querySelector('#nmOrderId, #nmPurchaseId') || {}).textContent || '';
    t = (t || '').trim();
    return t || null;
  }
  async function callEdge(fnName, payload, accessToken){
    try{
      // intenta deducir base de supabase de forma segura
      let base = (window.__SB_BASE || '').replace(/\/$/, '');
      if (!base) {
        try {
          const sb = (typeof getSupabase==='function' && getSupabase()) || window.supabaseClient || window.supabase;
          // si storage.url existe, retrocede hasta el dominio del proyecto
          base = (sb && sb.storage && sb.storage.url) ? sb.storage.url.split('/storage')[0] : '';
        } catch(_){}
      }
      if (!base) throw new Error('No pude obtener la URL base de Supabase.');
      const url = base + '/functions/v1/' + fnName;
      const headers = { 'Content-Type': 'application/json' };
      if (window.__SB_ANON) headers['apikey'] = window.__SB_ANON;
      if (accessToken) headers['Authorization'] = 'Bearer ' + accessToken;
      const res = await fetch(url, { method:'POST', headers, body: JSON.stringify(payload||{}) });
      const text = await res.text();
      let json = null; try{ json = text ? JSON.parse(text) : null; }catch(_){}
      return { ok: res.ok, status: res.status, json, text };
    }catch(e){
      return { ok:false, status:0, json:null, text: (e && e.message) ? e.message : String(e) };
    }
  }
  document.addEventListener('click', async (ev)=>{
    const btn = ev.target.closest(
      '#nmRegenerate, [data-action="regenerate-payment-link"], .regenerate-link, button[data-regenerate]'
    );
    if (!btn) return;
    ev.preventDefault();
    const purchaseId = findPurchaseId(btn);
    if (!purchaseId) { alert('No pude determinar el ID de la compra.'); return; }
    const original = btn.textContent;
    btn.disabled = true; btn.textContent = 'Generando...';
    try{
      const token = await getAccessToken();
      const { ok, json, text } = await callEdge('create-invoice', { purchase_id: purchaseId }, token);
      if (!ok) throw new Error(text || (json && JSON.stringify(json)));
      const url =
        (json && (json.payment_url || json.invoice_url)) ||
        (json && json.data && (json.data.payment_url || json.data.invoice_url)) || null;
      if (!url) throw new Error('La función respondió sin URL de pago.');
      window.open(url, '_blank');
    }catch(e){
      alert('No se pudo iniciar el cobro: ' + (e && e.message ? e.message : e));
    }finally{
      btn.disabled = false; btn.textContent = original;
    }
  });
})();
</script>



<!-- NUMINA share-invite upgrade: builds https://numina.vip/login.html?ref=YOUR_CODE -->
<script>
(function(){
  function getSB(){
    try{ return (typeof getSupabase==='function' && getSupabase()) || window.supabaseClient || window.supabase || null; }
    catch(_){ return null; }
  }
  
  async function getRefCode(){
    // 1) From explicit DOM anchors
    var dom = document.querySelector('[data-ref-code], #refCode, #nmRefCode, .ref-code, .referral-code code, .referral-code .value');
    var code = (dom && (dom.dataset && dom.dataset.refCode || (dom.textContent||'').trim())) || '';

    // 2) Heuristic: look near a "Copiar" button
    if(!code){
      try{
        var copyBtns = Array.from(document.querySelectorAll('button, a')).filter(function(b){
          return /copiar/i.test((b.textContent||b.innerText||''));
        });
        for (var i=0;i<copyBtns.length;i++){
          var box = copyBtns[i].closest('[class*="ref"], [class*="invite"], .chip, .badge, .row, .toolbar, .group, div');
          if(!box) continue;
          var c = box.cloneNode(true);
          c.querySelectorAll('button,a,svg,i,img').forEach(function(n){ n.remove(); });
          var t = (c.textContent||'').replace(/\s+/g,' ').trim();
          var m = t.match(/\b[A-Z0-9]{6,20}\b/);
          if(m){ code = m[0]; break; }
        }
      }catch(e){}
    }

    // 3) Fallback: any element whose id/class hints "ref"
    if(!code){
      try{
        var cands = Array.from(document.querySelectorAll('[id*="ref" i], [class*="ref" i]'));
        for (var j=0;j<cands.length;j++){
          var text = (cands[j].textContent||'').replace(/\s+/g,' ').trim();
          var m2 = text.match(/\b[A-Z][A-Z0-9]{5,19}\b/);
          if(m2){ code = m2[0]; break; }
        }
      }catch(e){}
    }

    // 4) From Supabase user_metadata
    if(!code){
      try{
        var sb = getSB();
        if(sb && sb.auth && sb.auth.getUser){
          var u = await sb.auth.getUser();
          var meta = (u && u.data && u.data.user && u.data.user.user_metadata) || {};
          code = meta.ref || meta.ref_code || meta.invite_code || '';
        }
      }catch(e){}
    }
    return (code||'').trim();
  }

  async function buildInviteUrl(){
    var code = await getRefCode();
    var url = 'https://numina.vip/login.html' + (code ? ('?ref='+encodeURIComponent(code)) : '');
    return {url:url, code:code};
  }
  document.addEventListener('click', async function(e){
    var el = e.target.closest('a,button');
    if(!el) return;
    var label = (el.textContent||el.innerText||'').toLowerCase();
    if(!/compartir.*enlace.*invitaci|share.*invitation/.test(label)) return;
    e.preventDefault();
    var out = await buildInviteUrl();
    if(!out.code){
      alert('No encontré tu código de referido. Verifícalo en tu perfil.');
      return;
    }
    if(el.tagName==='A'){ el.href = out.url; el.setAttribute('target','_blank'); }
    try{
      if(navigator.share){
        await navigator.share({title:'Únete a NUMINA', text:'Registrate con mi invitación', url: out.url});
      }else{
        await navigator.clipboard.writeText(out.url);
        alert('Enlace copiado:\n' + out.url);
      }
    }catch(_){
      try{
        await navigator.clipboard.writeText(out.url);
        alert('Enlace copiado:\n' + out.url);
      }catch(__){ location.href = out.url; }
    }
  }, {capture:true});
})();
</script>
<script>
async function cargarSorteos(){
  try{
    const tbody = document.getElementById('sorteos-tbody');
    if (tbody) tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;">'+ (window.dI18n ? dI18n.t('labels.loading') : 'Cargando…') +'</td></tr>';

    const supabase = getSupabase();
    const { data: { user }, error: authError } = await supabase.auth.getUser();
    if (authError || !user){ window.location.href = '/login.html'; return; }

    // 1) Tickets activos (sumatoria en tickets_ledger)
    let totalTickets = 0;
    let tksRows = [];
    try{
      ({ data: tksRows, error: tErr } = await supabase
        .from('tickets_ledger')
        .select('count')
        .eq('user_id', user.id)
      );
      if (!tErr && Array.isArray(tksRows)){
        totalTickets = tksRows.reduce((acc, r)=> acc + (parseInt(r.count,10)||0), 0);
      }
    }catch(_){}
    const tActivosEl = document.getElementById('srt-tickets-activos');
    if (tActivosEl) tActivosEl.textContent = String(totalTickets);

    
    // === Upgrade Numina (histórico de tickets obtenidos) ===
    // Calculamos el total histórico SOLO de entradas positivas (tickets otorgados),
    // independientemente de los tickets gastados posteriormente.
    let totalHistorico = 0;
    try {
      if (Array.isArray(tksRows)) {
        totalHistorico = tksRows.reduce((acc, r) => acc + ( (parseInt(r.count,10) > 0) ? parseInt(r.count,10) : 0 ), 0);
      }
    } catch (_) {}
    // Actualizar valor visible y barra
    const MAX_UPGRADE = 10000;
    const upgValEl = document.getElementById('srt-upgrade-valor');
    const upgFill  = document.getElementById('srt-fill');
    const upgProg  = document.querySelector('.srt-progress');
    function fmt(n){ try{ return new Intl.NumberFormat('en-US').format(n); }catch(_){ return String(n); } }
    if (upgValEl) upgValEl.textContent = `${fmt(totalHistorico)} / ${fmt(MAX_UPGRADE)}`;
    const pct = Math.max(0, Math.min(100, (totalHistorico / MAX_UPGRADE) * 100));
    if (upgFill)  upgFill.style.width = pct + '%';
    if (upgProg)  upgProg.setAttribute('aria-valuenow', Math.round(totalHistorico));
    // Encender hitos 25%, 50% y 100%
    const hit25 = document.getElementById('srt-25');
    const hit50 = document.getElementById('srt-50');
    const hit100 = document.getElementById('srt-100');
    if (hit25) hit25.classList.toggle('on', totalHistorico >= 2500);
    if (hit50) hit50.classList.toggle('on', totalHistorico >= 5000);
    if (hit100) hit100.classList.toggle('on', totalHistorico >= 10000);
// 2) Historial de uso: negativos (tickets usados)
    const { data: hist, error } = await supabase
      .from('tickets_ledger')
      .select('id, sku, count, created_at')
      .eq('user_id', user.id)
      .lt('count', 0)
      .order('created_at', { ascending: false });

    if (error){
      console.error('Sorteos error:', error);
      if (tbody) tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Error</td></tr>';
      return;
    }

    const rows = Array.isArray(hist) ? hist : [];
    if (!rows.length){
      if (tbody) tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;"><span data-i18n="raffles.noParticipations">'+ (window.dI18n ? dI18n.t('raffles.noParticipations') : 'Sin participaciones') +'</span></td></tr>';
      return;
    }

    // Normalizar nombre del sorteo a partir del sku (e.g., "raffle:xyz" => "xyz")
    function prettyName(sku){
      if (!sku) return '';
      var s = String(sku);
      if (s.includes(':')) s = s.split(':').slice(1).join(':').trim();
      s = s.replace(/[_-]+/g, ' ').replace(/\s+/g, ' ').trim();
      if (!s) s = String(sku);
      return s.charAt(0).toUpperCase() + s.slice(1);
    }

    const htmlRows = rows.map(r=>{
      const date = r.created_at ? new Date(r.created_at).toLocaleDateString() : '';
      const name = prettyName(r.sku);
      const used = Math.abs(parseInt(r.count,10)||0);
      return `<tr><td>${date}</td><td>${name}</td><td>${used}</td></tr>`;
    }).join('');

    if (tbody) tbody.innerHTML = htmlRows;

    // 3) Re-aplicar filtro si el usuario ya escribió algo
    try{ window.__applySorteosFilter && window.__applySorteosFilter(); }catch(_){}

    // 4) Upgrade: actualizado con progreso real basado en el histórico de tickets positivos.
  }catch(e){
    console.error('cargarSorteos fatal', e);
    const tbody = document.getElementById('sorteos-tbody');
    if (tbody) tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Error</td></tr>';
  }
}
</script>
<!-- jsPDF (para generar PDF del lado del cliente) -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<!-- Handler simple para el botón "Descargar factura" -->
<script>
(function(){
  function t(id){ try{ return (document.getElementById(id)?.textContent || '').trim(); }catch(_){ return ''; } }
  function normalizeOrderId(s){
    if(!s) return '';
    return s.replace(/^\s*#?\s*/,'').replace(/^(pedido|order)\s*:?\s*/i,'').trim();
  }
  function wire(){
    var btn = document.getElementById('pdInvoice');
    if(!btn || btn.__wired) return; btn.__wired = true;
    btn.addEventListener('click', function(){
      try{
  var PDF = (window.jspdf && window.jspdf.jsPDF) ? window.jspdf.jsPDF : null;
  if(!PDF){ alert('No se pudo cargar jsPDF.'); return; }

  // 1) Datos desde el DOM (igual que antes)
  var orderId  = normalizeOrderId(t('pdOrder'));
  var name     = t('pdName') || 'Producto';
  var desc     = t('pdDesc') || '';
  var date     = t('pdDate') || new Date().toLocaleString('es-AR');
  var status   = (t('pdStatus') || '').toLowerCase();
  var price    = t('pdPrice') || '';
  var subtotal = t('pdSubtotal') || '';
  var total    = t('pdTotal') || price;
  var qty      = t('pdQty') || '1';
  var clientId = t('nmUserId') || t('pdUserId') || ''; // opcional

  // 2) Normalizo estado → estilos (como tus plantillas)
  function norm(s){
    s = (s||'').toLowerCase();
    if(/paid|pagad/.test(s)) return 'paid';
    if(/pend|pending/.test(s)) return 'pending';
    if(/cancel|cance/.test(s)) return 'cancelled';
    return 'other';
  }
  var st = norm(status);
  var STYLES = {
    paid:     {bg:[232,245,233], fg:[27,94,32],  label:'PAGADO'},
    pending:  {bg:[255,243,205], fg:[133,100,4], label:'PENDIENTE'},
    cancelled:{bg:[255,235,238], fg:[183,28,28], label:'CANCELADO'},
    other:    {bg:[238,238,238], fg:[66,66,66],  label:status.toUpperCase()||'ESTADO'}
  };
  var S = STYLES[st];

  // 3) PDF y medidas
  var doc = new PDF({ unit:'pt', format:'a4' });
  var W = doc.internal.pageSize.getWidth();
  var H = doc.internal.pageSize.getHeight();

  // ===== Marca de agua si está PENDIENTE =====
  if (st === 'pending') {
    doc.setFont('helvetica','bold'); doc.setFontSize(110);
    doc.setTextColor(0,0,0);
    // gris suave para simular baja opacidad
    doc.setTextColor(0,0,0); 
    doc.setTextColor(150,150,150);
    doc.text('PENDIENTE', W/2, H/2, {angle:-20, align:'center'});
  }

  // ===== Header =====
  doc.setFont('helvetica','bold'); doc.setFontSize(24); doc.setTextColor(17,17,17);
  doc.text('NUMINA', 40, 60);

  // Badge a la derecha (pill con colores)
  var label = S.label;
  doc.setFontSize(12); doc.setFont('helvetica','bold');
  var tw = doc.getTextWidth(label);
  var paddingX = 12, paddingY = 8, pillH = 24, pillW = tw + paddingX*2;
  var px = W - 40 - pillW, py = 44; // y basado en tipografía
  doc.setFillColor.apply(doc, S.bg);
  if (doc.roundedRect) doc.roundedRect(px, py - pillH + 6, pillW, pillH, 10, 10, 'F');
  else doc.rect(px, py - pillH + 6, pillW, pillH, 'F');
  doc.setTextColor.apply(doc, S.fg);
  doc.text(label, px + paddingX, py);

  // Título + meta
  doc.setTextColor(17,17,17);
  doc.setFont('helvetica','bold'); doc.setFontSize(16);
  var y = 96; doc.text('Factura / Invoice', 40, y);
  doc.setFont('helvetica','normal'); doc.setFontSize(12);
  y += 20;
  doc.text('N.º de pedido: #' + (orderId || '-') + ' • Fecha: ' + date, 40, y);
  y += 16;
  if (clientId) { doc.text('Cliente: ' + clientId, 40, y); y += 2; }

  // ===== Tabla =====
  y += 18;
  // encabezado
  doc.setFillColor(245,245,245);
  doc.rect(40, y-14, W-80, 24, 'F');
  doc.setFont('helvetica','bold'); doc.setFontSize(12);
  doc.text('Concepto', 50, y);
  doc.text('Cant.',    360, y);
  doc.text('Precio',   430, y);
  doc.text('Total',    510, y);

  // fila item
  y += 24; doc.setFont('helvetica','normal'); doc.setFontSize(11);
  doc.text(name, 50, y);
  if (desc) {
    var wrap = doc.splitTextToSize(desc, 280);
    doc.text(wrap, 50, y+14);
  }
  doc.text(String(qty),   360, y);
  doc.text(String(price), 430, y);
  doc.text(String(total), 510, y);

  // línea separadora
  doc.setDrawColor(238,238,238); doc.setLineWidth(1);
  doc.line(40, y+16, W-40, y+16);

  // total en tfoot
  y += 44; 
  doc.setFont('helvetica','bold'); doc.setFontSize(12);
  doc.text('Total', 50, y);
  doc.text(String(total), 510, y);

  // Mensaje final
  y += 24; doc.setFont('helvetica','normal'); doc.setFontSize(11);
  var msg = (st === 'paid') ? 'Pago recibido. ¡Gracias!' : 'Documento proforma .';
  doc.setTextColor(102,102,102);
  doc.text(msg, 40, y);

  // Guardar
  doc.save('Factura-' + (orderId || Date.now()) + '.pdf');
}catch(e){
  alert('No se pudo generar la factura: ' + (e?.message || e));
}
    });
  }
  (document.readyState === 'loading') ? document.addEventListener('DOMContentLoaded', wire) : wire();
})();
</script>



<!-- Fix: IntersectionObserver para animaciones en scroll y contenido dinámico -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const SELECTOR = '.section-title, .product-card';

  function markAnimated(el){
    if (!el.classList.contains('animate-in')) el.classList.add('animate-in');
  }

  function observeTargets(root=document){
    const candidates = root.querySelectorAll(SELECTOR);
    if (!('IntersectionObserver' in window)) {
      candidates.forEach(markAnimated);
      return;
    }
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if (e.isIntersecting){
          markAnimated(e.target);
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.15 });
    candidates.forEach(el=>{
      if (!el.classList.contains('animate-in')) io.observe(el);
    });
  }

  observeTargets();

  const root = document.querySelector('.main-content') || document.body;
  try{
    const mo = new MutationObserver(() => {
      setTimeout(observeTargets, 30);
    });
    mo.observe(root, { childList: true, subtree: true, attributes: true, attributeFilter: ['style', 'class'] });
  }catch(_){}
});
</script>

<!-- ==== NUMINA FINAL PATCH: Mystery Box dentro del overlay existente (sin borrar nada) ==== -->
<script>
(function(){
  function renderMBContent(){
    // Espera breve para asegurar que el overlay ya esté visible
    let tries = 0;
    (function attempt(){
      const overlay = document.getElementById('numina-main-overlay');
      const main = document.querySelector('.main-content');
      const isOn = !!(main && main.classList.contains('numina-on'));
      if (overlay && isOn){
        if (!document.getElementById('mb-overlay-content')){
          const wrap = document.createElement('div');
          wrap.id = 'mb-overlay-content';
          wrap.style.position = 'absolute';
          wrap.style.inset = '0';
          wrap.style.padding = '20px';
          wrap.style.paddingTop = '64px';
          wrap.style.overflow = 'auto';
          wrap.innerHTML = `
            <style>
              .mbox-wrap{max-width:1100px;margin:0 auto}
              .mbox-tabs{display:flex;gap:10px;align-items:center;margin-bottom:14px}
              .mbox-tab{background:#1a1a1a;border:1px solid #2a2a2a;color:#f0f0f0;padding:10px 14px;border-radius:999px;font-weight:800;cursor:pointer}
              .mbox-tab.active{background:var(--primary);color:#111;border-color:var(--primary)}
              .mbox-search{flex:1;display:flex}
              .mbox-search input{width:100%;background:#141414;border:1px solid #2a2a2a;color:#eaeaea;padding:10px 14px;border-radius:999px;outline:none}
              .mbox-card{background:#0f0f0f;border:1px solid #1f1f1f;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,.35);overflow:hidden}
              .mbox-card-head{position:relative;height:240px;background:linear-gradient(180deg,#151515,#0f0f0f)}
              .mbox-chip{position:absolute;top:14px;left:14px;background:var(--primary);color:#111;border-radius:999px;padding:6px 12px;font-weight:800;font-size:.85rem}
              .mbox-card-body{padding:18px}
              .mbox-title{font-size:1.25rem;font-weight:900;margin:2px 0 6px}
              .mbox-subtle{color:#cfcfcf;font-size:.9rem;margin-bottom:10px}
              .mbox-badges{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
              .mbox-badge{background:#141414;border:1px solid #2a2a2a;color:#e7e7e7;padding:8px 12px;border-radius:999px;font-weight:700;font-size:.85rem}
              .mbox-cta{display:flex;gap:12px;margin-top:10px}
              .mbox-btn{background:#161616;border:1px solid #2a2a2a;color:#f5f5f5;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
              .mbox-btn:hover{transform:translateY(-2px)}
              .mbox-primary{background:var(--primary);border-color:var(--primary);color:#111}
            </style>

            <div class="mbox-wrap">
              <div class="mbox-tabs">
                <button class="mbox-tab active"><span data-i18n="mbox.tabs.open">' + (window.dI18n? dI18n.t('mbox.tabs.open') : 'Abiertos') + '</span></button>'
                <button class="mbox-tab"><span data-i18n="mbox.tabs.upcoming">' + (window.dI18n? dI18n.t('mbox.tabs.upcoming') : 'Próximamente') + '</span></button>'
                <button class="mbox-tab"><span data-i18n="mbox.tabs.closed">' + (window.dI18n? dI18n.t('mbox.tabs.closed') : 'Finalizados') + '</span></button>'
                <div class="mbox-search"><input data-i18n-ph="filters.search.raffles" placeholder="' + (window.dI18n? dI18n.t('filters.search.raffles') : 'Buscar sorteos…') + '" /></div>
              </div>

              <div class="mbox-card">
                <div class="mbox-card-head">
                  <span class="mbox-chip" data-i18n="mbox.status.open">' + (window.dI18n? dI18n.t('mbox.status.open') : 'Abierto') + '</span>'
                </div>
                <div class="mbox-card-body">
                  <div class="mbox-title">Sorteo Semanal</div>
                  <div class="mbox-subtle">Pozo acumulado</div>
                  <div class="mbox-badges">
                    <span class="mbox-badge">2 ticket(s)</span>
                    <span class="mbox-badge">3h</span>
                    <span class="mbox-badge">Pozo: 0 tickets</span>
                    <span class="mbox-badge">Casa: 10%</span>
                  </div>
                  <div class="mbox-badges">
                    <span class="mbox-badge">Neto: 0 tickets</span>
                  </div>
                  <div class="mbox-cta">
                    <button class="mbox-btn" id="mb-detalles-btn"><span data-i18n="mbox.actions.details">' + (window.dI18n? dI18n.t('mbox.actions.details') : 'Detalles') + '</span></button>'
                    <button class="mbox-btn mbox-primary" id="mb-participar-btn"><span data-i18n="mbox.actions.participate">' + (window.dI18n? dI18n.t('mbox.actions.participate') : 'Participar') + '</span></button>'
                  </div>
                </div>
              </div>
            </div>
          `;
          overlay.appendChild(wrap);
          try{ if(window.dI18n && dI18n.apply) dI18n.apply(); }catch(_){}
          // Eventos de ejemplo (no tocan tu lógica)
          const participar = wrap.querySelector('#mb-participar-btn');
          if (participar){
            participar.addEventListener('click', function(ev){
              ev.preventDefault();
              alert('Participar (UI demo).');
            });
          }
        }
      }else if (tries++ < 25){
        // reintenta ~500ms total
        setTimeout(attempt, 20);
      }
    })();
  }

  function bindMBOnly(){
    // Escucha cliqueos y, si el card es MYSTERY BOX, inyecta el contenido del overlay
    document.addEventListener('click', function(ev){
      var el = ev.target;
      if(!el || !el.closest) return;
      var card = el.closest('.stat-card');
      if (!card) return;
      var label = (card.textContent || '').toLowerCase();
      if (label.indexOf('mystery box') !== -1 || label.indexOf('tickets.vip') !== -1){
        // difiere para no interferir con el handler original
        setTimeout(renderMBContent, 0);
      }
    }, true); // captura para correr antes que otros listeners
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', bindMBOnly);
  } else { bindMBOnly(); }

  try{
    const mo = new MutationObserver(bindMBOnly);
    mo.observe(document.body, {childList:true, subtree:true});
  }catch(_){}
})();
</script>

<!-- ==== NUMINA SCOPE GUARD: Mystery Box solo desde #balance-value o [data-open="mystery"] ==== -->
<script>
(function(){
  // Flag que habilita MB solo si el click vino del target correcto
  window.__mbAllow = false;

  // Capturamos todos los clicks antes que nada y marcamos si son "válidos"
  document.addEventListener('click', function(ev){
    try{
      const path = ev.composedPath ? ev.composedPath() : (function(p){var a=[]; while(p){a.push(p); p=p.parentNode;} return a;})(ev.target);
      const ok = path.some(function(n){
        if (!n || n === document || n === window) return false;
        if (n.id === 'balance-value') return true;
        if (n.getAttribute && n.getAttribute('data-open') === 'mystery') return true;
        // Permite un contenedor específico si el HTML tiene un id de card para Mystery
        if (n.id === 'card-mysterybox') return true;
        return false;
      });
      window.__mbAllow = ok;
    }catch(_){
      window.__mbAllow = false;
    }
  }, true); // captura

  // Si existen funciones previas para renderizar MB, las guardamos y envolvemos con el guard
  var _r1 = window.renderMBContent;
  var _r2 = window.renderMysteryBox;
  window.renderMBContent = function(){
    if (!window.__mbAllow) return;
    if (typeof _r1 === 'function') return _r1.apply(this, arguments);
  };
  window.renderMysteryBox = function(){
    if (!window.__mbAllow) return;
    if (typeof _r2 === 'function') return _r2.apply(this, arguments);
  };

  // Además, si algún listener viejo llama a renderMBContent inmediatamente, lo anulamos con un microtask
  // hasta que haya un click válido marcando __mbAllow=true.
  setInterval(function(){
    // resetea el flag si no hubo clicks válidos recientemente
    window.__mbAllow = false;
  }, 350);
})();
</script>




<!-- NMN: Yellow card opens NEW tab (no overlay, no sidebar) -->
<script>
(function(){
  var valueEl = document.getElementById('balance-value');
  var card = valueEl ? valueEl.closest('.stat-card') : null;

  function ensureMysteryTab(){ 
    var dash = document.getElementById('main-dashboard');
    var tab = document.getElementById('tab-mystery');
    if(!tab){
      tab = document.createElement('section');
      tab.id = 'tab-mystery';
      tab.className = 'section-content';
      tab.style.display = 'none';
      if(dash && dash.parentNode){ dash.parentNode.insertBefore(tab, dash.nextSibling); }
      else { document.body.appendChild(tab); }
    }
    return tab;
  }

  function wireInteractions(root){
    try{
      var tabs = root.querySelectorAll('.mbox-tab');
      tabs.forEach(function(btn){
        btn.addEventListener('click', function(){
          tabs.forEach(function(b){ b.classList.remove('active'); });
          btn.classList.add('active');
        });
      });
      var search = root.querySelector('.mbox-search input');
      if(search){
        var list = root.querySelectorAll('.mbox-card');
        search.addEventListener('input', function(){
          var q = search.value.toLowerCase();
          list.forEach(function(card){
            var t = card.textContent.toLowerCase();
            card.style.display = t.indexOf(q) !== -1 ? '' : 'none';
          });
        });
      }
    }catch(_){}
  }

  function openMystery(e){
    if(e) e.preventDefault();
    var dash = document.getElementById('main-dashboard');
    var tab = ensureMysteryTab();
    try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
    if(!tab.dataset.filled){
      tab.innerHTML = `
            <style>
              .mbox-wrap{max-width:1100px;margin:0 auto}
              .mbox-tabs{display:flex;gap:10px;align-items:center;margin-bottom:14px}
              .mbox-tab{background:#1a1a1a;border:1px solid #2a2a2a;color:#f0f0f0;padding:10px 14px;border-radius:999px;font-weight:800;cursor:pointer}
              .mbox-tab.active{background:var(--primary);color:#111;border-color:var(--primary)}
              .mbox-search{flex:1;display:flex}
              .mbox-search input{width:100%;background:#141414;border:1px solid #2a2a2a;color:#eaeaea;padding:10px 14px;border-radius:999px;outline:none}
              .mbox-card{background:#0f0f0f;border:1px solid #1f1f1f;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,.35);overflow:hidden}
              .mbox-card-head{position:relative;height:240px;background:linear-gradient(180deg,#151515,#0f0f0f)}
              .mbox-chip{position:absolute;top:14px;left:14px;background:var(--primary);color:#111;border-radius:999px;padding:6px 12px;font-weight:800;font-size:.85rem}
              .mbox-card-body{padding:18px}
              .mbox-title{font-size:1.25rem;font-weight:900;margin:2px 0 6px}
              .mbox-subtle{color:#cfcfcf;font-size:.9rem;margin-bottom:10px}
              .mbox-badges{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
              .mbox-badge{background:#141414;border:1px solid #2a2a2a;color:#e7e7e7;padding:8px 12px;border-radius:999px;font-weight:700;font-size:.85rem}
              .mbox-cta{display:flex;gap:12px;margin-top:10px}
              .mbox-btn{background:#161616;border:1px solid #2a2a2a;color:#f5f5f5;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
              .mbox-btn:hover{transform:translateY(-2px)}
              .mbox-primary{background:var(--primary);border-color:var(--primary);color:#111}
            </style>

            <div class="mbox-wrap">
              <div class="mbox-tabs">
                <button class="mbox-tab active"><span data-i18n="mbox.tabs.open">' + (window.dI18n? dI18n.t('mbox.tabs.open') : 'Abiertos') + '</span></button>'
                <button class="mbox-tab"><span data-i18n="mbox.tabs.upcoming">' + (window.dI18n? dI18n.t('mbox.tabs.upcoming') : 'Próximamente') + '</span></button>'
                <button class="mbox-tab"><span data-i18n="mbox.tabs.closed">' + (window.dI18n? dI18n.t('mbox.tabs.closed') : 'Finalizados') + '</span></button>'
                <div class="mbox-search"><input data-i18n-ph="filters.search.raffles" placeholder="' + (window.dI18n? dI18n.t('filters.search.raffles') : 'Buscar sorteos…') + '" /></div>
              </div>

              <div class="mbox-card">
                <div class="mbox-card-head">
                  <span class="mbox-chip" data-i18n="mbox.status.open">' + (window.dI18n? dI18n.t('mbox.status.open') : 'Abierto') + '</span>'
                </div>
                <div class="mbox-card-body">
                  <div class="mbox-title">Sorteo Semanal</div>
                  <div class="mbox-subtle">Pozo acumulado</div>
                  <div class="mbox-badges">
                    <span class="mbox-badge">2 ticket(s)</span>
                    <span class="mbox-badge">3h</span>
                    <span class="mbox-badge">Pozo: 0 tickets</span>
                    <span class="mbox-badge">Casa: 10%</span>
                  </div>
                  <div class="mbox-badges">
                    <span class="mbox-badge">Neto: 0 tickets</span>
                  </div>
                  <div class="mbox-cta">
                    <button class="mbox-btn" id="mb-detalles-btn"><span data-i18n="mbox.actions.details">' + (window.dI18n? dI18n.t('mbox.actions.details') : 'Detalles') + '</span></button>'
                    <button class="mbox-btn mbox-primary" id="mb-participar-btn"><span data-i18n="mbox.actions.participate">' + (window.dI18n? dI18n.t('mbox.actions.participate') : 'Participar') + '</span></button>'
                  </div>
                </div>
              </div>
            </div>
          `;
      tab.dataset.filled = '1';
      wireInteractions(tab);
    
      // Inject header + KPI cards (once)
      if(!tab.querySelector('.mb-head')){
        var headerWrap = document.createElement('div');
        headerWrap.innerHTML = '\
          <style>\
            .mb-head{max-width:1100px;margin:0 auto 18px auto;padding:0 2px}\
            .mb-title{font-weight:900;font-size:1.8rem;letter-spacing:.2px}\
            .mb-title em{font-style:normal;color:var(--primary)}\
            .mb-kpis{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px;margin-top:14px}\
            .mb-kpi{background:#141414;border:1px solid #232323;border-radius:16px;padding:14px 16px;box-shadow:0 8px 20px rgba(0,0,0,.35)}\
            .mb-kpi .label{font-size:.85rem;letter-spacing:.4px;color:#bdbdbd;margin-bottom:6px}\
            .mb-kpi .value{font-weight:900;font-size:1.6rem}\
            @media (max-width: 900px){ .mb-kpis{grid-template-columns:1fr} }\
          </style>\
          <div class=\"mb-head\">\
            <div class=\"mb-title\">Mystery Box — <em><span data-i18n=\"sections.sorteoTitle\">Sorteos</span></em></div>\
            <div class=\"mb-kpis\">\
              <div class=\"mb-kpi\"><div class=\"label\"><span data-i18n=\"mb.kpi.yourTickets\">TUS TICKETS</div><div class=\"value\" id=\"mb-kpi-tickets\">—</div></div>\
              <div class=\"mb-kpi\"><div class=\"label\"><span data-i18n=\"mb.kpi.openRaffles\">SORTEOS ABIERTOS</div><div class=\"value\" id=\"mb-kpi-abiertos\">—</div></div>\
              <div class=\"mb-kpi\"><div class=\"label\"><span data-i18n=\"mb.kpi.yourParticipation\">TU PARTICIPACIÓN</div><div class=\"value\" id=\"mb-kpi-part\">—</div></div>\
            </div>\
          </div>';
        var header = headerWrap.firstElementChild; // <style> is first, then .mb-head
        var styleEl = header; var headEl = header.nextElementSibling;
        // Insert style + header before the mbox-wrap
        var wrap = tab.querySelector('.mbox-wrap');
        if(wrap){ tab.insertBefore(styleEl, wrap); tab.insertBefore(headEl, wrap); }
        else { tab.prepend(headEl); tab.prepend(styleEl); }
        try { if (window.dI18n && typeof dI18n.apply === "function") dI18n.apply(); } catch(_) {}
      }

      // Populate KPI numbers (best-effort)
      (function populateKpis(root){
        try{
          // Tus tickets: prefer dashboard #tickets-value, else #balance-value, else em dash
          var tSrc = document.getElementById('tickets-value') || document.getElementById('balance-value') || null;
          var tickets = tSrc ? (tSrc.textContent||'').trim() : '—';
          if(!tickets || tickets==='—' || /^-+$/.test(tickets)) tickets = '—';
          var e1 = root.querySelector('#mb-kpi-tickets'); if(e1) e1.textContent = tickets;

          // Sorteos abiertos: count visible .mbox-card under current filter
          var cards = root.querySelectorAll('.mbox-card');
          var abiertos = 0;
          cards.forEach(function(c){ if(c.style.display!== 'none') abiertos += 1; });
          var e2 = root.querySelector('#mb-kpi-abiertos'); if(e2) e2.textContent = String(abiertos);

          // Tu participación: placeholder (can be refined later)
          var e3 = root.querySelector('#mb-kpi-part'); if(e3) e3.textContent = '—';
        }catch(_){}
      })(tab);
}
    if(dash){ dash.classList.add('section-content'); dash.style.display = 'none'; }
    tab.classList.remove('section-content');
    tab.style.removeProperty('display');
    if(!tab.style.display) tab.style.display = 'block';
  }

  var target = card || valueEl;
  if(target){
    target.style.cursor = 'pointer';
    target.addEventListener('click', openMystery);
  }
})();
</script>

<!-- NMN: Back button (yellow), fade, reset filters -->
<script>
(function(){
  function fadeIn(el, dur){ dur = dur||200; if(!el) return; el.style.removeProperty('display'); if(!el.style.display) el.style.display='block'; el.style.opacity=0; el.style.transition='opacity '+dur+'ms ease'; requestAnimationFrame(function(){ el.style.opacity=1; }); }
  function fadeOut(el, dur, done){ dur = dur||200; if(!el){ if(done) done(); return; } el.style.opacity=1; el.style.transition='opacity '+dur+'ms ease'; requestAnimationFrame(function(){ el.style.opacity=0; setTimeout(function(){ el.style.display='none'; if(done) done(); }, dur+20); }); }
  function ensureToolbar(tab){
    if(!tab) return;
    if(tab.querySelector('#nmn-back-btn')) return;
    var content = tab.innerHTML;
    tab.innerHTML = '<style>.nmn-toolbar{position:sticky;top:0;z-index:2;display:flex;justify-content:flex-start;}.nmn-back{margin:14px 0 12px 0;background:var(--primary);border:1px solid var(--primary);color:#111;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}.nmn-back:hover{filter:brightness(0.95)}.nmn-back:active{transform:translateY(1px)}</style>' + '<div class="nmn-toolbar"><button id="nmn-back-btn" class="nmn-back"><span data-i18n="buttons.back">'+(window.dI18n?dI18n.t('buttons.back'):'Volver')+'</span></button></div>' + content;
  }
  function resetSearches(root){ try{ var inputs = root.querySelectorAll('input[placeholder*="Buscar"], .mbox-search input'); inputs.forEach(function(inp){ inp.value=''; inp.dispatchEvent(new Event('input', {bubbles:true})); }); root.querySelectorAll('.mbox-card').forEach(function(c){ c.style.display=''; }); }catch(_){}} 
  function wireBack(){ var dash=document.getElementById('main-dashboard'); var tab=document.getElementById('tab-mystery'); if(!tab) return; ensureToolbar(tab); var back=tab.querySelector('#nmn-back-btn'); if(back && !back.__bound){ back.__bound=true; back.addEventListener('click', function(ev){ ev.preventDefault(); resetSearches(tab); fadeOut(tab,200,function(){ if(dash){ dash.classList.remove('section-content'); dash.style.removeProperty('display'); fadeIn(dash,200); try{ window.scrollTo({top:0, behavior:'smooth'}); }catch(_){ } } }); }); } }
  if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', wireBack);} else { wireBack(); } try{ var mo=new MutationObserver(wireBack); mo.observe(document.body,{childList:true,subtree:true}); }catch(_){}
})();
</script>


<!-- NMN: Auto-hide the custom Mystery tab when navigating via sidebar -->
<script>
(function(){
  function hideMysteryTab(){
    var tab = document.getElementById('tab-mystery');
    if(!tab) return;
    // Only if visible
    var isHiddenByDisplay = (tab.style.display === 'none');
    var isHiddenByClass = tab.classList.contains('section-content');
    if(isHiddenByDisplay && isHiddenByClass) return;
    tab.classList.add('section-content');
    tab.style.display = 'none';
    try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
  }
  // Clicks on any sidebar item should hide the tab
  document.addEventListener('click', function(e){
    var item = e.target && e.target.closest ? e.target.closest('.sidebar .menu-item') : null;
    if(item){ hideMysteryTab(); }
  }, true);
  // Also hide on history/hash navigation triggers (defensive)
  window.addEventListener('popstate', hideMysteryTab);
  window.addEventListener('hashchange', hideMysteryTab);
})();
</script>


<!-- NMN: 'Compras Activas' card opens its own tab (not sidebar) -->
<script>
(function(){
  function ensureComprasTab(){
    var dash = document.getElementById('main-dashboard');
    var tab = document.getElementById('tab-compras');
    if(!tab){
      tab = document.createElement('section');
      tab.id = 'tab-compras';
      tab.className = 'section-content';
      tab.style.display = 'none';
      // toolbar + styles (reuse from previous)
      var style = document.createElement('style');
      style.textContent = '.nmn-toolbar{position:sticky;top:0;z-index:2;display:flex;justify-content:flex-start;}' +
                          '.nmn-back{margin:14px 0 12px 0;background:var(--primary);border:1px solid var(--primary);color:#111;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}' +
                          '.nmn-back:hover{filter:brightness(0.95)}' +
                          '.nmn-back:active{transform:translateY(1px)}';
      var bar = document.createElement('div');
      bar.className = 'nmn-toolbar';
      var btn = document.createElement('button');
      btn.id = 'nmn-back-btn-compras';
      btn.className = 'nmn-back';
      btn.innerHTML = '<span data-i18n="buttons.back">' + (window.dI18n ? dI18n.t('buttons.back') : 'Volver') + '</span>';bar.appendChild(btn);
      tab.appendChild(style);
      tab.appendChild(bar);
      try{if(window.dI18n&&dI18n.apply)dI18n.apply();}catch(e){}if(dash && dash.parentNode){ dash.parentNode.insertBefore(tab, dash.nextSibling); }
      else { document.body.appendChild(tab); }
    }
    return tab;
  }

  function findComprasNodes(){
    // Find the <h2> with data-i18n="sections.comprasActivas"
    var titleSpan = document.querySelector('h2.section-title [data-i18n="sections.comprasActivas"]');
    var h2 = titleSpan ? titleSpan.closest('h2') : null;
    // The purchases table container should be the next .table-container that contains #purchases-table or #purchases-body
    var container = null;
    if(h2){
      var sib = h2.nextElementSibling;
      while(sib){
        if(sib.classList && sib.classList.contains('table-container') &&
            (sib.querySelector('#purchases-table') || sib.querySelector('#purchases-body'))){
          container = sib;
          break;
        }
        // stop if we reach another section-title to avoid moving unintended content
        if(sib.matches && sib.matches('h2.section-title')) break;
        sib = sib.nextElementSibling;
      }
    }
    return {h2:h2, container:container};
  }

  function placeMarkers(nodes){
    // Create hidden markers once to restore later
    if(nodes.h2 && !document.getElementById('compras-h2-marker')){
      var m1 = document.createElement('div');
      m1.id = 'compras-h2-marker'; m1.style.display='none';
      nodes.h2.parentNode.insertBefore(m1, nodes.h2.nextSibling);
    }
    if(nodes.container && !document.getElementById('compras-table-marker')){
      var m2 = document.createElement('div');
      m2.id = 'compras-table-marker'; m2.style.display='none';
      nodes.container.parentNode.insertBefore(m2, nodes.container.nextSibling);
    }
  }

  function moveComprasToTab(tab){
    var nodes = findComprasNodes();
    if(!nodes.h2 || !nodes.container) return false;
    placeMarkers(nodes);
    tab.appendChild(nodes.h2);
    tab.appendChild(nodes.container);
    return true;
  }

  function restoreComprasToDashboard(){
    var h2m = document.getElementById('compras-h2-marker');
    var tm = document.getElementById('compras-table-marker');
    var h2 = document.querySelector('h2.section-title [data-i18n="sections.comprasActivas"]');
    h2 = h2 ? h2.closest('h2') : null;
    var cont = document.querySelector('.table-container #purchases-table') || document.querySelector('.table-container #purchases-body');
    cont = cont ? (function(el){ while(el && !el.classList.contains('table-container')) el = el.parentElement; return el; })(cont) : null;
    if(h2m && h2){ h2m.parentNode.insertBefore(h2, h2m); }
    if(tm && cont){ tm.parentNode.insertBefore(cont, tm); }
  }

  function fadeIn(el, dur){
    dur = dur || 200;
    if(!el) return;
    el.style.removeProperty('display');
    if(!el.style.display) el.style.display = 'block';
    el.style.opacity = 0;
    el.style.transition = 'opacity '+dur+'ms ease';
    requestAnimationFrame(function(){ el.style.opacity = 1; });
  }
  function fadeOut(el, dur, done){
    dur = dur || 200;
    if(!el){ if(done) done(); return; }
    el.style.opacity = 1;
    el.style.transition = 'opacity '+dur+'ms ease';
    requestAnimationFrame(function(){
      el.style.opacity = 0;
      setTimeout(function(){
        el.style.display = 'none';
        if(done) done();
      }, dur + 20);
    });
  }

  function openCompras(e){
    if(e) e.preventDefault();
    var dash = document.getElementById('main-dashboard');
    var tab = ensureComprasTab();
    if(tab.dataset.bound !== '1'){
      // Back wiring
      var back = tab.querySelector('#nmn-back-btn-compras');
      back.addEventListener('click', function(ev){
        ev.preventDefault();
        restoreComprasToDashboard();
        fadeOut(tab, 200, function(){
          tab.classList.add('section-content');
          if(dash){
            dash.classList.remove('section-content');
            dash.style.removeProperty('display');
            fadeIn(dash, 200);
          }
        });
      });
      tab.dataset.bound = '1';
    }
    // Move content into tab (once per open, in case it was restored)
    moveComprasToTab(tab);

    // Hide dashboard, show tab
    if(dash){ dash.classList.add('section-content'); dash.style.display = 'none'; }
    tab.classList.remove('section-content');
    tab.style.removeProperty('display');
    try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
  }

  // Bind click ONLY to the 'Compras Activas' KPI card
  (function bindComprasCard(){
    var el = document.getElementById('purchases-value');
    var card = el ? el.closest('.stat-card') : null;
    var target = card || el;
    if(target && !target.__nmnComprasBound){
      target.__nmnComprasBound = true;
      target.style.cursor = 'pointer';
      target.addEventListener('click', openCompras);
    }
  })();

  // Hide compras tab (and restore content) when navigating sidebar
  document.addEventListener('click', function(e){
    var item = e.target && e.target.closest ? e.target.closest('.sidebar .menu-item') : null;
    if(item){
      var tab = document.getElementById('tab-compras');
      if(tab && tab.style.display !== 'none'){
        restoreComprasToDashboard();
        tab.classList.add('section-content');
        tab.style.display = 'none';
        try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
      }
    }
  }, true);
  window.addEventListener('popstate', function(){ var tab=document.getElementById('tab-compras'); if(tab){ restoreComprasToDashboard(); tab.classList.add('section-content'); tab.style.display='none'; } });
  window.addEventListener('hashchange', function(){ var tab=document.getElementById('tab-compras'); if(tab){ restoreComprasToDashboard(); tab.classList.add('section-content'); tab.style.display='none'; } });
})();
</script>


<!-- NMN: 'Referidos' card opens its own tab (not sidebar) -->
<script>
(function(){
  function ensureReferidosTab(){
    var dash = document.getElementById('main-dashboard');
    var tab = document.getElementById('tab-referidos');
    if(!tab){
      tab = document.createElement('section');
      tab.id = 'tab-referidos';
      tab.className = 'section-content';
      tab.style.display = 'none';
      // toolbar + styles
      var style = document.createElement('style');
      style.textContent = '.nmn-toolbar{position:sticky;top:0;z-index:2;display:flex;justify-content:flex-start;}' +
                          '.nmn-back{margin:14px 0 12px 0;background:var(--primary);border:1px solid var(--primary);color:#111;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}' +
                          '.nmn-back:hover{filter:brightness(0.95)}' +
                          '.nmn-back:active{transform:translateY(1px)}';
      var bar = document.createElement('div');
      bar.className = 'nmn-toolbar';
      var btn = document.createElement('button');
      btn.id = 'nmn-back-btn-referidos';
      btn.className = 'nmn-back';
      btn.innerHTML = '<span data-i18n="buttons.back">' + (window.dI18n ? dI18n.t('buttons.back') : 'Volver') + '</span>';bar.appendChild(btn);
      tab.appendChild(style);
      tab.appendChild(bar);
      try{if(window.dI18n&&dI18n.apply)dI18n.apply();}catch(e){}if(dash && dash.parentNode){ dash.parentNode.insertBefore(tab, dash.nextSibling); }
      else { document.body.appendChild(tab); }
    }
    return tab;
  }

  function findReferidosNodes(){
    // h2.section-title containing data-i18n="sections.referralsHistory"
    var titleSpan = document.querySelector('h2.section-title [data-i18n="sections.referralsHistory"]');
    var h2 = titleSpan ? titleSpan.closest('h2') : null;
    var container = null;
    if(h2){
      var sib = h2.nextElementSibling;
      while(sib){
        if(sib.classList && sib.classList.contains('table-container') &&
           (sib.querySelector('#referrals-table') || sib.querySelector('#referrals-body'))){
          container = sib;
          break;
        }
        if(sib.matches && sib.matches('h2.section-title')) break;
        sib = sib.nextElementSibling;
      }
    }
    return {h2:h2, container:container};
  }

  function placeMarkers(nodes){
    if(nodes.h2 && !document.getElementById('referidos-h2-marker')){
      var m1 = document.createElement('div');
      m1.id = 'referidos-h2-marker'; m1.style.display='none';
      nodes.h2.parentNode.insertBefore(m1, nodes.h2.nextSibling);
    }
    if(nodes.container && !document.getElementById('referidos-table-marker')){
      var m2 = document.createElement('div');
      m2.id = 'referidos-table-marker'; m2.style.display='none';
      nodes.container.parentNode.insertBefore(m2, nodes.container.nextSibling);
    }
  }

  function moveReferidosToTab(tab){
    var nodes = findReferidosNodes();
    if(!nodes.h2 || !nodes.container) return false;
    placeMarkers(nodes);
    tab.appendChild(nodes.h2);
    tab.appendChild(nodes.container);
    return true;
  }

  function restoreReferidosToDashboard(){
    var h2m = document.getElementById('referidos-h2-marker');
    var tm = document.getElementById('referidos-table-marker');
    // Current nodes (wherever they are)
    var h2 = document.querySelector('h2.section-title [data-i18n="sections.referralsHistory"]');
    h2 = h2 ? h2.closest('h2') : null;
    var cont = document.querySelector('.table-container #referrals-table') || document.querySelector('.table-container #referrals-body');
    cont = cont ? (function(el){ while(el && !el.classList.contains('table-container')) el = el.parentElement; return el; })(cont) : null;
    if(h2m && h2){ h2m.parentNode.insertBefore(h2, h2m); }
    if(tm && cont){ tm.parentNode.insertBefore(cont, tm); }
  }

  function fadeIn(el, dur){
    dur = dur || 200;
    if(!el) return;
    el.style.removeProperty('display');
    if(!el.style.display) el.style.display = 'block';
    el.style.opacity = 0;
    el.style.transition = 'opacity '+dur+'ms ease';
    requestAnimationFrame(function(){ el.style.opacity = 1; });
  }
  function fadeOut(el, dur, done){
    dur = dur || 200;
    if(!el){ if(done) done(); return; }
    el.style.opacity = 1;
    el.style.transition = 'opacity '+dur+'ms ease';
    requestAnimationFrame(function(){
      el.style.opacity = 0;
      setTimeout(function(){
        el.style.display = 'none';
        if(done) done();
      }, dur + 20);
    });
  }

  function openReferidos(e){
    if(e) e.preventDefault();
    var dash = document.getElementById('main-dashboard');
    var tab = ensureReferidosTab();
    if(tab.dataset.bound !== '1'){
      var back = tab.querySelector('#nmn-back-btn-referidos');
      back.addEventListener('click', function(ev){
        ev.preventDefault();
        restoreReferidosToDashboard();
        fadeOut(tab, 200, function(){
          tab.classList.add('section-content');
          if(dash){
            dash.classList.remove('section-content');
            dash.style.removeProperty('display');
            fadeIn(dash, 200);
          }
        });
      });
      tab.dataset.bound = '1';
    }
    moveReferidosToTab(tab);
    // Hide dashboard, show tab
    if(dash){ dash.classList.add('section-content'); dash.style.display = 'none'; }
    tab.classList.remove('section-content');
    tab.style.removeProperty('display');
    try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
  }

  // Bind only the Referrals KPI card
  (function bindReferralsCard(){
    var el = document.getElementById('referrals-value');
    var card = el ? el.closest('.stat-card') : null;
    var target = card || el;
    if(target && !target.__nmnRefBound){
      target.__nmnRefBound = true;
      target.style.cursor = 'pointer';
      target.addEventListener('click', openReferidos);
    }
  })();

  // Hide tab when navigating sidebar
  document.addEventListener('click', function(e){
    var item = e.target && e.target.closest ? e.target.closest('.sidebar .menu-item') : null;
    if(item){
      var tab = document.getElementById('tab-referidos');
      if(tab && tab.style.display !== 'none'){
        restoreReferidosToDashboard();
        tab.classList.add('section-content');
        tab.style.display = 'none';
        try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
      }
    }
  }, true);
  window.addEventListener('popstate', function(){ var tab=document.getElementById('tab-referidos'); if(tab){ restoreReferidosToDashboard(); tab.classList.add('section-content'); tab.style.display='none'; } });
  window.addEventListener('hashchange', function(){ var tab=document.getElementById('tab-referidos'); if(tab){ restoreReferidosToDashboard(); tab.classList.add('section-content'); tab.style.display='none'; } });
})();
</script>


<!-- === NUMINA: Tickets Activos (inline tab) + KPI cards === -->
<script>
(function(){
  function ensureTicketsTab(){
    var dash = document.getElementById('main-dashboard');
    var tab = document.getElementById('tab-tickets');
    if(!tab){
      tab = document.createElement('section');
      tab.id = 'tab-tickets';
      tab.className = 'section-content';
      tab.style.display = 'none';

      // Scoped styles
      var style = document.createElement('style');
      style.textContent =
        '#tab-tickets{background:#0f0f0f;color:#e6e6e6;padding-bottom:24px}'+
        '.nmn-toolbar{position:sticky;top:0;z-index:2;display:flex;justify-content:flex-start;background:transparent}'+
        '.nmn-back{margin:14px 0 12px 0;background:var(--primary);border:1px solid var(--primary);color:#111;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}'+
        '.nmn-back:hover{filter:brightness(0.95)}'+
        '.nmn-back:active{transform:translateY(1px)}'+
        '.ta-wrap{max-width:1100px;margin:0 auto;padding:0 12px}'+
        '.ta-title{font-weight:900;font-size:2rem;letter-spacing:.2px;margin:8px 0 16px}'+
        '.ta-title em{font-style:normal;color:var(--primary)}'+
        /* KPI cards */
        '.kpi-row{display:grid;grid-template-columns:repeat(2,minmax(220px,1fr));gap:16px;margin:8px 0 18px}'+
        '.kpi-card{background:#141414;border:1px solid #232323;border-radius:16px;padding:18px 20px;box-shadow:0 8px 20px rgba(0,0,0,.25)}'+
        '.kpi-title{font-size:.85rem;letter-spacing:.6px;text-transform:uppercase;color:#bdbdbd;margin-bottom:6px}'+
        '.kpi-value{font-weight:900;font-size:2rem;line-height:1;color:#e6e6e6}'+
        '@media (max-width:720px){.kpi-row{grid-template-columns:1fr}}'+
        /* Controls + table */ 
        '.ta-controls{display:flex;gap:10px;align-items:center;margin:6px 0 14px}'+
        '.ta-search{flex:1;display:flex;align-items:center;background:#111;border:1px solid #2a2a2a;border-radius:12px;padding:10px 14px}'+
        '.ta-search input{flex:1;background:transparent;border:0;outline:none;color:#e6e6e6}'+
        '.ta-clear{background:transparent;border:1px solid var(--primary);color:var(--primary);padding:10px 14px;border-radius:12px;font-weight:800;cursor:pointer}'+
        '.ta-clear:hover{filter:brightness(1.06)}'+
        '.table-container{background:#141414;border:1px solid #232323;border-radius:16px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.35)}'+
        'table{width:100%;border-collapse:collapse;table-layout:fixed}'+
        'thead th{font-size:.8rem;letter-spacing:.6px;text-transform:uppercase;color:var(--primary);background:#1c1c1c;padding:14px 16px;text-align:left;border-bottom:1px solid #2a2a2a}'+
        '.table-container thead th.col-tickets,.table-container thead th.col-referrals{text-align:center}'+
        '.table-container thead th.col-date,.table-container thead th.col-product{text-align:left}'+
        'tbody td{padding:16px;color:#e6e6e6;border-top:1px solid #1f1f1f;vertical-align:middle}'+
        'td[data-col="date"],td[data-col="product"]{text-align:left}'+
        'td[data-col="tickets"],td[data-col="referrals"]{text-align:center}'+
        '.col-date,td[data-col="date"]{width:20%}'+
        '.col-product,td[data-col="product"]{width:38%}'+
        '.col-tickets,td[data-col="tickets"]{width:22%;text-align:center}'+
        '.col-referrals,td[data-col="referrals"]{width:20%;text-align:center}'+
        'tbody tr:first-child td{border-top:none}'+
        'tbody tr:hover{background:rgba(255,255,255,.03)}'+
        '@media (max-width:640px){thead{display:none}table,tbody,tr,td{display:block;width:100%}tbody tr{padding:10px 12px}tbody td{border:0;padding:6px 0}tbody td::before{content:attr(data-label);display:block;font-size:.75rem;color:#9a9a9a;margin-bottom:2px}}'+
        '.ref-list{display:flex;flex-direction:column;align-items:center;gap:4px}'+
        '.ref-chip{background:#0f0f0f;border:1px solid #2a2a2a;color:#e6e6e6;border-radius:10px;padding:2px 8px;font-size:.85rem;line-height:1.2}'+
        '.ref-empty{opacity:.6}';
      tab.appendChild(style);

      var bar = document.createElement('div');
      bar.className = 'nmn-toolbar';
      var btn = document.createElement('button');
      btn.id = 'nmn-back-btn-tickets';
      btn.className = 'nmn-back';
      btn.innerHTML = '<span data-i18n="buttons.back">' + (window.dI18n ? dI18n.t('buttons.back') : 'Volver') + '</span>';bar.appendChild(btn);
      tab.appendChild(bar);

      try{if(window.dI18n&&dI18n.apply)dI18n.apply();}catch(e){}var wrap = document.createElement('div');
      wrap.className = 'ta-wrap';
      wrap.innerHTML =
        '<div class="ta-title" id="ta-title-i18n" data-i18n="raffles.activeTickets">' + (window.dI18n? dI18n.t('raffles.activeTickets') : 'Tickets activos') + '</div>'+
        '<div class="kpi-row">'+
        '  <div class="kpi-card"><div class="kpi-title"><span data-i18n="raffles.activeTickets">' + (window.dI18n? dI18n.t('raffles.activeTickets') : 'Tickets activos') + '</div><div class="kpi-value" id="kpi-active">--</div></div>'+
        '  <div class="kpi-card"><div class="kpi-title"><span data-i18n="raffles.ticketsUsed">' + (window.dI18n? dI18n.t('raffles.ticketsUsed') : 'Tickets usados') + '</div><div class="kpi-value" id="kpi-used">--</div></div>'+
        '</div>'+
        '<div class="ta-controls">'+
        '  <label class="ta-search"><input type="text" data-i18n-ph="filters.search.raffles" placeholder="' + (window.dI18n? dI18n.t('filters.search.raffles') : 'Buscar sorteos…') + '"></label>'+
        '  <button class="ta-clear"><span data-i18n="filters.clear">' + (window.dI18n? dI18n.t('filters.clear') : 'Limpiar') + '</span></button>'+
        '</div>'+
        '<div class="table-container">'+
        '  <table id="tickets-activos-table">'+
        '    <thead>'+
        '      <tr>'+
        '        <th class="col-date"><span data-i18n="table.date">' + (window.dI18n? dI18n.t('table.date') : 'FECHA') + '</span></th>'+
        '        <th class="col-product"><span data-i18n="table.product">' + (window.dI18n? dI18n.t('table.product') : 'PRODUCTO') + '</span></th>'+
        '        <th class="col-tickets"><span data-i18n="table.tickets">' + (window.dI18n? dI18n.t('table.tickets') : 'TICKETS') + '</span></th>'+
        '        <th class="col-referrals"><span data-i18n="table.referral">' + (window.dI18n? dI18n.t('table.referral') : 'REFERIDO') + '</span></th>'+
        '      </tr>'+
        '    </thead>'+
        '    <tbody id="tickets-activos-body"></tbody>'+
        '  </table>'+
        '</div>';
      tab.appendChild(wrap);
      try{ if(window.dI18n && typeof dI18n.apply==='function'){ dI18n.apply(); } }catch(_){ } try{ if(window.applyI18nPlaceholders) window.applyI18nPlaceholders(tab); }catch(_){ }
      (function(){
        try{
          
          var el = document.getElementById('ta-title-i18n');
          if(!el) return;
          function applyTitleHighlight(){
            try{
              if(!el) return;
              // Avoid re-highlighting if <em> already present
              if(el.querySelector('em')) return;
              var t = (el.textContent||'').trim();
              if(!t) return;
              var parts = t.split(/\s+/);
              if(parts.length===1){
                el.innerHTML = '<em style=\"color:var(--primary)\">'+parts[0]+'</em>';
                return;
              }
              function norm(w){ return w.toLowerCase().replace(/[^a-záéíóúüñçãõâêô]+/g,''); }
              var idxTickets = parts.findIndex(function(w){ return norm(w)==='tickets'; });
              if(idxTickets<0){
                parts[0] = '<em style=\"color:var(--primary)\">'+parts[0]+'</em>';
              }else{
                var idxOther = idxTickets===0 ? 1 : 0;
                parts[idxOther] = '<em style=\"color:var(--primary)\">'+parts[idxOther]+'</em>';
              }
              el.innerHTML = parts.join(' ');
            }catch(e){}
          }
          applyTitleHighlight();
          // Keep highlight even if i18n rewrites later
          try{
            var mo = new MutationObserver(function() {
              try{ mo.disconnect(); }catch(_){} // avoid loops
              applyTitleHighlight();
            });
            mo.observe(el, {childList:true, characterData:true, subtree:true});
          }catch(_){}

        }catch(e){}
      })();

      if(dash && dash.parentNode){ dash.parentNode.insertBefore(tab, dash.nextSibling); }
      else { document.body.appendChild(tab); }
    }
    return tab;
  }

  // Helpers fade
  function fadeIn(el, dur){ dur = dur||180; if(!el) return; el.style.removeProperty('display'); if(!el.style.display) el.style.display='block'; el.style.opacity=0; el.style.transition='opacity '+dur+'ms ease'; requestAnimationFrame(function(){ el.style.opacity=1; }); }
  function fadeOut(el, dur, done){ dur = dur||180; if(!el){ if(done) done(); return; } el.style.opacity=1; el.style.transition='opacity '+dur+'ms ease'; requestAnimationFrame(function(){ el.style.opacity=0; setTimeout(function(){ el.style.display='none'; if(done) done(); }, dur+20); }); }

  function normalizeName(s){ return (s||'').toString().toLowerCase(); }
  function mapEventToRow(e){
    var product = '', tickets = 1, referido = [];
    switch(e.type){
      case 'catalog': {
        product = e.productName || '';
        var n = 1; var name = normalizeName(e.productName);
        if(name.includes('rolex')) n = 5;
        else if(name.includes('pulsera')) n = 1;
        else if(name.includes('lingote') && (name.includes('oro') || name.includes('platino'))) n = 2;
        tickets = n;
        break;
      }
      case 'third_purchase': {
        product = 'Tercera compra';
        tickets = 1;
        if(e.email) referido = [e.email];
        break;
      }
      case 'third_referral_first_purchase': {
        product = 'Tercer referido';
        tickets = 1;
        if(Array.isArray(e.emails)) referido = e.emails.slice(0,3);
        break;
      }
      default: {
        product = e.productName || e.title || '—';
        tickets = e.tickets || 1;
        referido = e.referido ? [].concat(e.referido) : [];
      }
    }
    return { date: e.date, product: product, tickets: tickets, referido: referido };
  }
  function fmtDate(d){
    if(!d) return '—';
    try{
      var dt = (typeof d === 'string' && /\d{4}-\d{2}-\d{2}/.test(d)) ? new Date(d+'T00:00:00') : new Date(d);
      var dd = dt.getDate(); var mm = dt.getMonth()+1; var yy = dt.getFullYear();
      return dd+'/'+mm+'/'+yy;
    }catch(_){ return d; }
  }
  function renderRows(root, rows){
    var tbody = root.querySelector('#tickets-activos-body');
    if(!tbody) return;
    
    if(!rows || !rows.length){
      tbody.innerHTML = '<tr>'+
        '<td data-col="date" data-label="' + (window.dI18n? dI18n.t('table.date') : 'FECHA') + '">—</td>'+
        '<td data-col="product" data-label="' + (window.dI18n? dI18n.t('table.product') : 'PRODUCTO') + '">' + (window.dI18n? dI18n.t('table.noData') : 'Sin datos') + '</td>'+
        '<td data-col="tickets" data-label="' + (window.dI18n? dI18n.t('table.tickets') : 'TICKETS') + '">—</td>'+
        '<td data-col="referrals" data-label="' + (window.dI18n? dI18n.t('table.referral') : 'REFERIDO') + '">—</td>'+
      '</tr>';
      return;
    }
    tbody.innerHTML = rows.map(function(r){
      var refHtml = (r.referido && r.referido.length)
        ? ('<div class="ref-list">' + r.referido.map(function(x){ return '<span class="ref-chip">'+x+'</span>'; }).join('') + '</div>')
        : '—';
      return '<tr>' +
        '<td data-col="date" data-label="' + (window.dI18n? dI18n.t('table.date') : 'FECHA') + '">'+ fmtDate(r.date) +'</td>' +
        '<td data-col="product" data-label="' + (window.dI18n? dI18n.t('table.product') : 'PRODUCTO') + '">'+ r.product +'</td>' +
        '<td data-col="tickets" data-label="' + (window.dI18n? dI18n.t('table.tickets') : 'TICKETS') + '">'+ r.tickets +'</td>' +
        '<td data-col="referrals" data-label="' + (window.dI18n? dI18n.t('table.referral') : 'REFERIDO') + '">'+ refHtml +'</td>' +
      '</tr>';
    }).join('');
    
  }

  function wireAndPopulate(tab){
    if(tab.dataset.bound !== '1'){
      var back = tab.querySelector('#nmn-back-btn-tickets');
      back.addEventListener('click', function(ev){
        ev.preventDefault();
        fadeOut(tab, 180, function(){
          tab.classList.add('section-content');
          var dash = document.getElementById('main-dashboard');
          if(dash){ dash.classList.remove('section-content'); dash.style.removeProperty('display'); fadeIn(dash, 180); }
          var input = tab.querySelector('.ta-search input'); if(input){ input.value=''; }
        });
      });
      tab.dataset.bound = '1';
    }

    var input = tab.querySelector('.ta-search input');
    var clearBtn = tab.querySelector('.ta-clear');
    
    // Load rows strictly from Supabase (no demo)
    var rows = [];
    async function loadRowsFromSupabase(){
      try{
        // Prefer existing client instance
        var sb = (window.supabase && typeof window.supabase.from === 'function')
                 ? window.supabase
                 : (window.supabase && window.supabase.createClient && (window.NMN_SUPABASE_URL || window.SUPABASE_URL) && (window.NMN_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY)
                    ? window.supabase.createClient(window.NMN_SUPABASE_URL || window.SUPABASE_URL, window.NMN_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY)
                    : null);
        if(!sb){ renderRows(tab, []); return; }

        var { data: userRes } = await sb.auth.getUser();
        var userId = window.NMN_USER_ID || (userRes && userRes.user && userRes.user.id);
        if(!userId){ renderRows(tab, []); return; }

        // 1) Pull raw ledger rows
        var { data: ledger, error: e1 } = await sb.from('tickets_ledger')
          .select('count, created_at, purchase_id, sku')
          .eq('user_id', userId)
          .order('created_at', { ascending: false });
        if(e1){ console.warn('tickets_ledger error:', e1); ledger = []; }

        // 2) Map to table rows; fetch purchase names for purchase_ids found
        var pidSet = new Set((ledger||[]).map(r => r.purchase_id).filter(Boolean));
        var purchasesById = {};
        if(pidSet.size){
          var ids = Array.from(pidSet);
          var { data: purchases, error: e2 } = await sb.from('purchases')
            .select('id, product_name')
            .in('id', ids);
          if(!e2 && Array.isArray(purchases)){ purchases.forEach(p => purchasesById[p.id] = p); }
        }

        rows = (ledger||[]).map(ev => {
          return {
            date: ev.created_at,
            product: (ev.purchase_id && purchasesById[ev.purchase_id]) ? (purchasesById[ev.purchase_id].product_name || ev.sku || '—') : (ev.sku || '—'),
            tickets: ev.count || 0,
            referido: [] // (veremos luego cómo resolver referidos por esquema)
          };
        });

        renderRows(tab, rows);
      }catch(err){
        console.warn('loadRowsFromSupabase failed:', err);
        renderRows(tab, []);
      }
    }
    loadRowsFromSupabase();
    function filter(){
      var q = (input && input.value || '').toLowerCase();
      var filtered = !q ? rows : rows.filter(function(r){
        var ref = (r.referido||[]).join(' ');
        var t = [fmtDate(r.date), r.product, String(r.tickets), ref].join(' ').toLowerCase();
        return t.indexOf(q) !== -1;
      });
      renderRows(tab, filtered);
      paintKpis(); // recompute active after filter clear/apply
    }
    if(input && !input.__bound){ input.__bound = true; input.addEventListener('input', filter); }
    if(clearBtn && !clearBtn.__bound){ clearBtn.__bound = true; clearBtn.addEventListener('click', function(){ if(input){ input.value = ''; } filter(); }); }

    // === KPIs ===
    function computeActiveFromTable(){
      var cells = tab.querySelectorAll('#tickets-activos-table tbody td[data-col="tickets"]');
      var total = 0; cells.forEach(function(td){ var n = parseInt((td.textContent||'').trim(),10); if(!isNaN(n)) total += n; });
      return total;
    }
    function computeUsed(){
      var used = 0;
      if(Array.isArray(window.nmnUsedTickets)){ window.nmnUsedTickets.forEach(function(e){ used += (e.tickets||1); }); }
      else if(window.nmnTicketsSummary && typeof window.nmnTicketsSummary.used === 'number'){ used = window.nmnTicketsSummary.used; }
      return used;
    }
    function paintKpis(){
      var active = computeActiveFromTable();
      var used = computeUsed();
      var a = tab.querySelector('#kpi-active'); if(a) a.textContent = String(active);
      var u = tab.querySelector('#kpi-used'); if(u) u.textContent = String(used);
    }
    
    // === Supabase-backed Active Tickets (optional) ===
    async function tryLoadActiveFromSupabaseIntoKPI(tabEl){
      try{
        if(!window.supabase || !window.supabase.createClient) return false;
        var SUPABASE_URL = window.NMN_SUPABASE_URL || window.SUPABASE_URL;
        var SUPABASE_ANON_KEY = window.NMN_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY;
        if(!SUPABASE_URL || !SUPABASE_ANON_KEY) return false;
        var sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Resolve user id (prefer explicit global, otherwise current session user)
        var userId = window.NMN_USER_ID;
        if(!userId){
          var { data: { user } } = await sb.auth.getUser();
          userId = user && user.id;
        }
        if(!userId) return false;

        // Strategy 1: direct 'tickets' table with status='active'
        var q1 = await sb.from('tickets')
          .select('*', { count: 'exact', head: true })
          .eq('user_id', userId)
          .eq('status', 'active');
        if(q1.error && !['PGRST116'].includes(q1.error.code)){ console.warn('Supabase tickets count error:', q1.error); }
        var activeCount = q1.count || 0;

        // Strategy 2 (fallback): 'ticket_events' ledger (delta or product-based)
        if(activeCount === 0){
          var q2 = await sb.from('ticket_events')
            .select('type, product_name, emails, tickets, delta, created_at')
            .eq('user_id', userId);
          if(!q2.error && Array.isArray(q2.data)){
            var rows2 = q2.data.map(mapEventToRow);
            // if a 'delta' exists, use it, else tickets value
            var deltaSum = q2.data.reduce((s,e)=> s + (typeof e.delta === 'number' ? e.delta : 0), 0);
            var baseSum = rows2.reduce((s,r)=> s + (r.tickets||0), 0);
            activeCount = deltaSum !== 0 ? deltaSum : baseSum;
          }
        }

        var a = tabEl.querySelector('#kpi-active');
        if(a){ a.textContent = String(activeCount); }
        return true;
      }catch(err){
        console.warn('Supabase active tickets load failed:', err);
        return false;
      }
    }

    paintKpis(); tryLoadActiveFromSupabaseIntoKPI(tab);
    }

  function openTickets(e){
    if(e) e.preventDefault();
    var dash = document.getElementById('main-dashboard');
    var tab = ensureTicketsTab();
    wireAndPopulate(tab);
    if(dash){ dash.classList.add('section-content'); dash.style.display = 'none'; }
    tab.classList.remove('section-content');
    tab.style.removeProperty('display');
    try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
  }

  (function bindTicketsCard(){
    var el = document.getElementById('tickets-value');
    var card = el ? el.closest('.stat-card') : null;
    var target = card || el;
    if(target && !target.__nmnTicketsBound){
      target.__nmnTicketsBound = true;
      target.style.cursor = 'pointer';
      target.addEventListener('click', openTickets);
    }
  })();

  document.addEventListener('click', function(e){
    var item = e.target && e.target.closest ? e.target.closest('.sidebar .menu-item') : null;
    if(item){
      var tab = document.getElementById('tab-tickets');
      if(tab && tab.style.display !== 'none'){
        tab.classList.add('section-content');
        tab.style.display = 'none';
        try{ tab.style.removeProperty('opacity'); tab.style.removeProperty('transition'); }catch(_){}
      }
    }
  }, true);
  window.addEventListener('popstate', function(){ var tab=document.getElementById('tab-tickets'); if(tab){ tab.classList.add('section-content'); tab.style.display='none'; } });
  window.addEventListener('hashchange', function(){ var tab=document.getElementById('tab-tickets'); if(tab){ tab.classList.add('section-content'); tab.style.display='none'; } });
})();
</script>


<!-- NUMINA PATCH: Unify tickets KPI logic across Dashboard and Sorteos -->
<script>
(function(){
  // Sum tickets from tickets_ledger for the current user (positives + negatives)
  async function sumActiveTickets(){
    try{
      var sb = (typeof getSupabase === 'function') ? getSupabase() : null;
      if(!sb) return null;
      var auth = await sb.auth.getUser();
      if (auth && auth.error) return null;
      var user = auth && auth.data ? auth.data.user : null;
      if(!user) return null;
      var resp = await sb.from('tickets_ledger').select('count').eq('user_id', user.id);
      if (resp && !resp.error && Array.isArray(resp.data)){
        return resp.data.reduce(function(acc, r){
          var n = parseInt(r && r.count, 10); if (isNaN(n)) n = 0;
          return acc + n;
        }, 0);
      }
      return null;
    }catch(_){ return null; }
  }

  async function writeDashboardTickets(){
    try{
      var el = document.getElementById('tickets-value');
      if(!el) return;
      var total = await sumActiveTickets();
      if (typeof total === 'number') el.textContent = String(total);
    }catch(_){}
  }

  // Wrap cargarDashboard to enforce the correct logic after it runs
  try{
    var _orig = window.cargarDashboard;
    window.cargarDashboard = async function(){
      if (typeof _orig === 'function') { try { await _orig(); } catch(_){ } }
      try { await writeDashboardTickets(); } catch(_){}
    };
  }catch(_){}

  // Also run once on DOM ready (in case dashboard is visible already)
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){ writeDashboardTickets(); });
  } else {
    writeDashboardTickets();
  }
})();
</script>


<!-- NUMINA PATCH 2: Unify KPI logic in Tickets Activos tab with Sorteos (use tickets_ledger) -->
<script>
(function(){
  async function _getClient(){
    try {
      if (typeof getSupabase === 'function') return getSupabase();
      if (window.supabase && window.SUPABASE_URL && window.SUPABASE_ANON_KEY){
        return window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);
      }
    } catch(_) {}
    return null;
  }
  async function _sumLedger(sb, uid){
    try{
      var { data, error } = await sb.from('tickets_ledger').select('count').eq('user_id', uid);
      if (error || !Array.isArray(data)) return null;
      var active = 0, used = 0;
      for (var i=0;i<data.length;i++){
        var n = parseInt(data[i] && data[i].count, 10); if (isNaN(n)) n = 0;
        active += n;
        if (n < 0) used += Math.abs(n);
      }
      return { active: active, used: used };
    }catch(_){ return null; }
  }
  async function writeTicketsTabKpis(){
    try{
      var tab = document.getElementById('tab-tickets');
      if (!tab || tab.style.display === 'none') return;
      var sb = await _getClient();
      if (!sb) return;
      var auth = await sb.auth.getUser();
      var user = auth && auth.data ? auth.data.user : null;
      if (!user) return;
      var sums = await _sumLedger(sb, user.id);
      if (!sums) return;
      var a = tab.querySelector('#kpi-active'); if (a) a.textContent = String(sums.active);
      var u = tab.querySelector('#kpi-used');   if (u) u.textContent = String(sums.used);
    }catch(_){}
  }
  // Run once on ready, and whenever the Tickets tab is inserted/shown.
  function schedule(){
    try { writeTicketsTabKpis(); } catch(_) {}
    setTimeout(writeTicketsTabKpis, 150);  // after table paint
    setTimeout(writeTicketsTabKpis, 600);  // after any async fills
  }
  // Observe visibility changes and DOM mutations within the app container
  var obs = new MutationObserver(function(){
    var tab = document.getElementById('tab-tickets');
    if (tab && tab.style.display !== 'none') schedule();
  });
  try { obs.observe(document.body, { childList: true, subtree: true }); } catch(_){}
  // Also run on hash changes (since navigation uses location hash)
  window.addEventListener('hashchange', schedule);
  window.addEventListener('popstate', schedule);
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', schedule);
  } else { schedule(); }
  // Expose a manual hook (optional)
  window.nmnWriteTicketsTabKpis = writeTicketsTabKpis;
})();
</script>


<!-- NUMINA PATCH 3: Fill Tickets Activos table from tickets_ledger (fecha, producto, tickets, referido) -->
<script>
(function(){
  function _prettyName(sku){
    try{
      if(!sku) return '—';
      var s = String(sku);
      if (s.includes(':')) s = s.split(':').slice(1).join(':').trim();
      s = s.replace(/[_-]+/g, ' ').replace(/\s+/g, ' ').trim();
      if (!s) s = String(sku);
      return s.charAt(0).toUpperCase() + s.slice(1);
    }catch(_){ return String(sku||'—'); }
  }
  function _fmtDate(d){
    try{
      if(!d) return '—';
      // If it's a string, try to extract YYYY-MM-DD safely
      if (typeof d === 'string'){
        var m = d.match(/(\d{4})-(\d{2})-(\d{2})/);
        if (m){ return m[3] + '/' + m[2] + '/' + m[1]; }
        // Fallback to native parser (ISO strings)
        var dtIso = new Date(d);
        if (!isNaN(dtIso.getTime())){ return dtIso.toLocaleDateString(); }
        return '—';
      }
      // If it's a Date or timestamp
      var dt = (d instanceof Date) ? d : new Date(d);
      if (!isNaN(dt.getTime())){ return dt.toLocaleDateString(); }
      return '—';
    }catch(_){ return '—'; }
  }
  async function _getClient(){
    try {
      if (typeof getSupabase === 'function') return getSupabase();
      if (window.supabase && (window.NMN_SUPABASE_URL || window.SUPABASE_URL) && (window.NMN_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY)){
        return window.supabase.createClient(window.NMN_SUPABASE_URL || window.SUPABASE_URL, window.NMN_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY);
      }
    } catch(_) {}
    return null;
  }
  function _renderRows(rows){
    var tab = document.getElementById('tab-tickets');
    if(!tab) return;
    var tbody = tab.querySelector('#tickets-activos-body');
    if(!tbody) return;
    if(!rows || !rows.length){
      tbody.innerHTML = '<tr>'+
        '<td data-col="date">—</td>'+
        '<td data-col="product">'+ (window.dI18n? dI18n.t('table.noData') : 'Sin datos') +'</td>'+
        '<td data-col="tickets">—</td>'+
        '<td data-col="referrals">—</td>'+
      '</tr>';
      return;
    }
    tbody.innerHTML = rows.map(function(r){
      var refHtml = (r.referido && r.referido.length)
        ? ('<div class="ref-list">' + r.referido.map(function(x){ return '<span class="ref-chip">'+x+'</span>'; }).join('') + '</div>')
        : '—';
      return '<tr>' +
        '<td data-col="date">'+ _fmtDate(r.date) +'</td>' +
        '<td data-col="product">'+ (r.product||'—') +'</td>' +
        '<td data-col="tickets">'+ String(r.tickets||0) +'</td>' +
        '<td data-col="referrals">'+ refHtml +'</td>' +
      '</tr>';
    }).join('');
  }
  
const fillTicketsRowsFromLedger = async () => {
    try{
      var tab = document.getElementById('tab-tickets');
      if(!tab || tab.style.display === 'none') return;
      var sb = await _getClient(); if(!sb) return;
      var auth = await sb.auth.getUser();
      var user = auth && auth.data && auth.data.user; if(!user) return;

      // 1) Fetch ledger rows
      var q = await sb.from('tickets_ledger')
        .select('*')
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });
      if(q.error){ console.warn('ledger error', q.error); return; }
      var ledger = Array.isArray(q.data) ? q.data : [];

      // Keep only entries where tickets were GANADOS (count > 0)
      var earned = ledger.filter(function(ev){
        var n = parseInt(ev && ev.count, 10); return !isNaN(n) && n > 0;
      });

      // 2) Preload purchases and (optionally) referrer users
      var pidSet = new Set();
      var refSet = new Set();
      var refRowsIdx = []; // indexes of earned that look like referral
      earned.forEach(function(ev, idx){
        if (ev.purchase_id) pidSet.add(ev.purchase_id);
        if (ev.referrer_id) refSet.add(ev.referrer_id);
        var sk = (ev.sku || ev.source || '').toString().toLowerCase();
        if (/referr?/.test(sk)) refRowsIdx.push(idx);
      });

      var purchasesById = {};
      if(pidSet.size){
        var pr = await sb.from('purchases').select('id, product_name').in('id', Array.from(pidSet));
        if(!pr.error && Array.isArray(pr.data)){ pr.data.forEach(function(p){ purchasesById[p.id] = p; }); }
      }

      var usersById = {};
      if(refSet.size){
        try{
          var ur = await sb.from('users').select('id, email, full_name').in('id', Array.from(refSet));
          if(!ur.error && Array.isArray(ur.data)){ ur.data.forEach(function(u){ usersById[u.id] = u; }); }
        }catch(_){} // users table podría no permitir lectura por RLS
      }

      // 3) Opcional: buscar eventos para identificar 3Ref.C1 vs 1Ref.C3
      var events = [];
      try{
        var er = await sb.from('ticket_events')
          .select('type, emails, email, tickets, created_at')
          .eq('user_id', user.id);
        if(!er.error && Array.isArray(er.data)){ events = er.data.slice(); }
      }catch(_){}

      function nearestEvent(ts){
        if(!events.length) return null;
        var target = (new Date(ts)).getTime();
        var best=null, bestAbs=Infinity, bestIdx=-1;
        for(var i=0;i<events.length;i++){
          var e = events[i];
          var et = (new Date(e.created_at)).getTime();
          var diff = Math.abs(et - target);
          // accept within 36h; pick nearest
          if (diff < bestAbs && diff <= 36*60*60*1000){ best=e; bestAbs=diff; bestIdx=i; }
        }
        if(best){ events.splice(bestIdx,1); }
        return best;
      }

      // 4) Map rows
      var rows = earned.map(function(ev){
        var product = (ev.purchase_id && purchasesById[ev.purchase_id] && purchasesById[ev.purchase_id].product_name)
          ? purchasesById[ev.purchase_id].product_name
          : (_prettyName(ev.sku) || '—');
        var referido = [];
        if (ev.referrer_id && usersById[ev.referrer_id]){
          var u = usersById[ev.referrer_id];
          referido = [ (u.full_name || u.email || (u.id||'')).toString() ];
        } else if (typeof ev.source === 'string' && /referr?/i.test(ev.source)) {
          referido = [ 'Sí' ];
        } else if (typeof ev.sku === 'string' && /referr?/i.test(ev.sku)) {
          referido = [ 'Sí' ];
        }

        // identificar patron 3Ref.C1 vs 1Ref.C3
        var isReferral = /referr?/i.test((ev.sku||ev.source||'').toString());
        if(isReferral){
          var ne = nearestEvent(ev.created_at);
          if(ne && typeof ne.type === 'string'){
            var t = ne.type;
            if(t === 'third_referral_first_purchase'){ product = '3Ref.C1'; if(Array.isArray(ne.emails)) referido = ne.emails.slice(0,3); }
            else if(t === 'third_purchase'){ product = '1Ref.C3'; if(ne.email) referido = [ne.email]; }
          } else {
            // heuristic fallback
            if((ev.sku||'').toString().toLowerCase().includes('c3')) product = '1Ref.C3';
            else product = '3Ref.C1';
          }
        }

        return { date: ev.created_at, product: product, tickets: parseInt(ev.count,10)||0, referido: referido };
      });

      _renderRows(rows);
    }catch(err){
      console.warn('fillTicketsRowsFromLedger failed', err);
    }
  };

  // Run when the tab shows and after small delays to win last-write
  const scheduleFill = () =>{
    try{ fillTicketsRowsFromLedger(); }catch(_){}
    setTimeout(fillTicketsRowsFromLedger, 150);
    setTimeout(fillTicketsRowsFromLedger, 600);
  };

  var obs = new MutationObserver(function(){
    var tab = document.getElementById('tab-tickets');
    if (tab && tab.style.display !== 'none') scheduleFill();
  });
  try{ obs.observe(document.body, { childList:true, subtree:true }); }catch(_){}
  window.addEventListener('hashchange', scheduleFill);
  window.addEventListener('popstate', scheduleFill);
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', scheduleFill);
  } else { scheduleFill(); }
  window.nmnFillTicketsRowsFromLedger = fillTicketsRowsFromLedger;
})();
</script>

</body>
</html>

